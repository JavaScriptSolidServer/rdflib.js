{"version":3,"file":"rdflib.min.js","mappings":"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","sources":["webpack://$rdf/webpack/universalModuleDefinition","webpack://$rdf/webpack/runtime/create fake namespace object","webpack://$rdf/webpack/runtime/load script","webpack://$rdf/./node_modules/@frogcat/ttl2jsonld/ttl2jsonld.js","webpack://$rdf/external umd \"window\"","webpack://$rdf/./node_modules/solid-namespace/index.js","webpack://$rdf/webpack/bootstrap","webpack://$rdf/webpack/runtime/compat get default export","webpack://$rdf/webpack/runtime/define property getters","webpack://$rdf/webpack/runtime/ensure chunk","webpack://$rdf/webpack/runtime/get javascript chunk filename","webpack://$rdf/webpack/runtime/global","webpack://$rdf/webpack/runtime/hasOwnProperty shorthand","webpack://$rdf/webpack/runtime/make namespace object","webpack://$rdf/webpack/runtime/publicPath","webpack://$rdf/webpack/runtime/jsonp chunk loading","webpack://$rdf/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://$rdf/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://$rdf/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://$rdf/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://$rdf/./src/class-order.ts","webpack://$rdf/./src/node-internal.ts","webpack://$rdf/./src/types.ts","webpack://$rdf/./src/blank-node.ts","webpack://$rdf/./src/utils/termValue.ts","webpack://$rdf/./src/utils/terms.ts","webpack://$rdf/./src/named-node.ts","webpack://$rdf/./src/xsd-internal.js","webpack://$rdf/./src/literal.ts","webpack://$rdf/./src/collection.ts","webpack://$rdf/./src/empty.ts","webpack://$rdf/./src/utils/default-graph-uri.ts","webpack://$rdf/./src/default-graph.ts","webpack://$rdf/./src/statement.ts","webpack://$rdf/./src/uri.ts","webpack://$rdf/./src/variable.ts","webpack://$rdf/./src/factories/factory-types.ts","webpack://$rdf/./src/factories/canonical-data-factory.ts","webpack://$rdf/./src/log.js","webpack://$rdf/./src/namespace.ts","webpack://$rdf/./src/utils-js.js","webpack://$rdf/./src/xsd.js","webpack://$rdf/./src/serializer.js","webpack://$rdf/./src/serialize.ts","webpack://$rdf/./src/utils.ts","webpack://$rdf/./src/formula.ts","webpack://$rdf/./src/node.ts","webpack://$rdf/./src/query.js","webpack://$rdf/./src/store.ts","webpack://$rdf/./src/lists.ts","webpack://$rdf/./src/n3parser.js","webpack://$rdf/./src/factories/extended-term-factory.ts","webpack://$rdf/./src/jsonldparser.js","webpack://$rdf/./src/nquads-parser.ts","webpack://$rdf/./src/rdfaparser.js","webpack://$rdf/./src/rdfxmlparser.js","webpack://$rdf/./src/patch-parser.js","webpack://$rdf/./src/parse.ts","webpack://$rdf/./src/fetcher.ts","webpack://$rdf/./src/jsonparser.js","webpack://$rdf/./src/query-to-sparql.js","webpack://$rdf/./src/sparql-to-query.js","webpack://$rdf/./src/update-manager.ts","webpack://$rdf/./src/factories/rdflib-data-factory.ts","webpack://$rdf/./src/updates-via.js","webpack://$rdf/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory((function webpackLoadOptionalExternalModule() { try { return require(\"window\"); } catch(e) {} }()));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"window\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"$rdf\"] = factory((function webpackLoadOptionalExternalModule() { try { return require(\"window\"); } catch(e) {} }()));\n\telse\n\t\troot[\"$rdf\"] = factory(root[\"window\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__392__) => {\nreturn ","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"$rdf:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n(function(root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.ttl2jsonld = factory();\n  }\n})(this, function() {\n  \"use strict\";\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function peg$SyntaxError(message, expected, found, location) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.location = location;\n    this.name     = \"SyntaxError\";\n\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(this, peg$SyntaxError);\n    }\n  }\n\n  peg$subclass(peg$SyntaxError, Error);\n\n  peg$SyntaxError.buildMessage = function(expected, found) {\n    var DESCRIBE_EXPECTATION_FNS = {\n          literal: function(expectation) {\n            return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n          },\n\n          \"class\": function(expectation) {\n            var escapedParts = \"\",\n                i;\n\n            for (i = 0; i < expectation.parts.length; i++) {\n              escapedParts += expectation.parts[i] instanceof Array\n                ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n                : classEscape(expectation.parts[i]);\n            }\n\n            return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n          },\n\n          any: function(expectation) {\n            return \"any character\";\n          },\n\n          end: function(expectation) {\n            return \"end of input\";\n          },\n\n          other: function(expectation) {\n            return expectation.description;\n          }\n        };\n\n    function hex(ch) {\n      return ch.charCodeAt(0).toString(16).toUpperCase();\n    }\n\n    function literalEscape(s) {\n      return s\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\"/g,  '\\\\\"')\n        .replace(/\\0/g, '\\\\0')\n        .replace(/\\t/g, '\\\\t')\n        .replace(/\\n/g, '\\\\n')\n        .replace(/\\r/g, '\\\\r')\n        .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n    }\n\n    function classEscape(s) {\n      return s\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\\]/g, '\\\\]')\n        .replace(/\\^/g, '\\\\^')\n        .replace(/-/g,  '\\\\-')\n        .replace(/\\0/g, '\\\\0')\n        .replace(/\\t/g, '\\\\t')\n        .replace(/\\n/g, '\\\\n')\n        .replace(/\\r/g, '\\\\r')\n        .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n    }\n\n    function describeExpectation(expectation) {\n      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n    }\n\n    function describeExpected(expected) {\n      var descriptions = new Array(expected.length),\n          i, j;\n\n      for (i = 0; i < expected.length; i++) {\n        descriptions[i] = describeExpectation(expected[i]);\n      }\n\n      descriptions.sort();\n\n      if (descriptions.length > 0) {\n        for (i = 1, j = 1; i < descriptions.length; i++) {\n          if (descriptions[i - 1] !== descriptions[i]) {\n            descriptions[j] = descriptions[i];\n            j++;\n          }\n        }\n        descriptions.length = j;\n      }\n\n      switch (descriptions.length) {\n        case 1:\n          return descriptions[0];\n\n        case 2:\n          return descriptions[0] + \" or \" + descriptions[1];\n\n        default:\n          return descriptions.slice(0, -1).join(\", \")\n            + \", or \"\n            + descriptions[descriptions.length - 1];\n      }\n    }\n\n    function describeFound(found) {\n      return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n    }\n\n    return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n  };\n\n  function peg$parse(input, options) {\n    options = options !== void 0 ? options : {};\n\n    var peg$FAILED = {},\n\n        peg$startRuleFunctions = { turtleDoc: peg$parseturtleDoc },\n        peg$startRuleFunction  = peg$parseturtleDoc,\n\n        peg$c0 = function(statements) {\n          var jsonld = context.toJSON();\n          jsonld[\"@graph\"] = [];\n          statements.filter(a=>Array.isArray(a)).forEach(a=>{\n            a.forEach(b=>{\n              jsonld[\"@graph\"].push(b);\n            });\n          });\n\n          if(jsonld[\"@graph\"].length===1){\n            Object.assign(jsonld,jsonld[\"@graph\"][0]);\n            delete jsonld[\"@graph\"];\n          }\n\n          return jsonld;\n        },\n        peg$c1 = \"\\uFEFF\",\n        peg$c2 = peg$literalExpectation(\"\\uFEFF\", false),\n        peg$c3 = \".\",\n        peg$c4 = peg$literalExpectation(\".\", false),\n        peg$c5 = function(a) {return a;},\n        peg$c6 = \"#\",\n        peg$c7 = peg$literalExpectation(\"#\", false),\n        peg$c8 = /^[^\\n]/,\n        peg$c9 = peg$classExpectation([\"\\n\"], true, false),\n        peg$c10 = \"\\n\",\n        peg$c11 = peg$literalExpectation(\"\\n\", false),\n        peg$c12 = function(a) {return a.join(\"\");},\n        peg$c13 = \"@prefix\",\n        peg$c14 = peg$literalExpectation(\"@prefix\", false),\n        peg$c15 = function(a, b) {\n          context.addPrefix(a===\"\" ? \"0\" : a,b);\n          return {};\n        },\n        peg$c16 = \"@base\",\n        peg$c17 = peg$literalExpectation(\"@base\", false),\n        peg$c18 = function(a) {\n          context.addBase(a);\n          return {};\n        },\n        peg$c19 = /^[Bb]/,\n        peg$c20 = peg$classExpectation([\"B\", \"b\"], false, false),\n        peg$c21 = /^[Aa]/,\n        peg$c22 = peg$classExpectation([\"A\", \"a\"], false, false),\n        peg$c23 = /^[Ss]/,\n        peg$c24 = peg$classExpectation([\"S\", \"s\"], false, false),\n        peg$c25 = /^[Ee]/,\n        peg$c26 = peg$classExpectation([\"E\", \"e\"], false, false),\n        peg$c27 = /^[Pp]/,\n        peg$c28 = peg$classExpectation([\"P\", \"p\"], false, false),\n        peg$c29 = /^[Rr]/,\n        peg$c30 = peg$classExpectation([\"R\", \"r\"], false, false),\n        peg$c31 = /^[Ff]/,\n        peg$c32 = peg$classExpectation([\"F\", \"f\"], false, false),\n        peg$c33 = /^[Ii]/,\n        peg$c34 = peg$classExpectation([\"I\", \"i\"], false, false),\n        peg$c35 = /^[Xx]/,\n        peg$c36 = peg$classExpectation([\"X\", \"x\"], false, false),\n        peg$c37 = function(s, p) {\n          var x = {};\n          if(typeof s==='string' && s!=='[]') x[\"@id\"] = s;\n          else if(typeof s==='object') Object.assign(x,s);\n          if(p) Object.assign(x,p);\n          return [x];\n        },\n        peg$c38 = function(s, p) {\n          var x = {};\n          if(s) Object.assign(x,s);\n          if(p) Object.assign(x,p);\n          return [x];\n        },\n        peg$c39 = \";\",\n        peg$c40 = peg$literalExpectation(\";\", false),\n        peg$c41 = function(a, b, e, f) {var x={};x[e]=f;return x;},\n        peg$c42 = function(a, b, d) {return d;},\n        peg$c43 = function(a, b, c) {\n          var x = {};\n          c.unshift(createObject(a,b));\n          c.forEach(t=>{\n            if(!t) return;\n            Object.keys(t).forEach(key=>{\n              t[key].forEach(val=>{\n                if(key===\"@type\" && val[\"@id\"]!==undefined) val = val[\"@id\"];\n                if(x[key]===undefined) x[key] = val;\n                else if(Array.isArray(x[key])) x[key].push(val);\n                else x[key] = [x[key],val];\n              });\n            });\n          });\n          return x;\n        },\n        peg$c44 = \",\",\n        peg$c45 = peg$literalExpectation(\",\", false),\n        peg$c46 = function(a, c) {return c;},\n        peg$c47 = function(a, b) {\n          b.unshift(a);\n          return b;\n        },\n        peg$c48 = \"a\",\n        peg$c49 = peg$literalExpectation(\"a\", false),\n        peg$c50 = function() {return '@type';},\n        peg$c51 = function(a) {return expandList(a,true);},\n        peg$c52 = function(a) {return expandList(a,false);},\n        peg$c53 = function(a) {return a===\"[]\" ? {} : {\"@id\":a};},\n        peg$c54 = function(a) {return {\"@id\":a};},\n        peg$c55 = \"[\",\n        peg$c56 = peg$literalExpectation(\"[\", false),\n        peg$c57 = \"]\",\n        peg$c58 = peg$literalExpectation(\"]\", false),\n        peg$c59 = \"(\",\n        peg$c60 = peg$literalExpectation(\"(\", false),\n        peg$c61 = \")\",\n        peg$c62 = peg$literalExpectation(\")\", false),\n        peg$c63 = function(a) {return {\"@list\":a};},\n        peg$c64 = function(a, b) {return {\"@value\":a,\"@language\":b};},\n        peg$c65 = \"^^\",\n        peg$c66 = peg$literalExpectation(\"^^\", false),\n        peg$c67 = function(a, b) {\n            if(b===\"http://www.w3.org/2001/XMLSchema#boolean\" && a===\"true\") return true;\n            if(b===\"http://www.w3.org/2001/XMLSchema#boolean\" && a===\"false\") return false;\n            if(b===\"http://www.w3.org/2001/XMLSchema#integer\") return parseInt(a);\n            if(b===\"http://www.w3.org/2001/XMLSchema#double\") return parseFloat(a);\n\n            const uri = context.resolve(b,true);\n            if(uri){\n              const prefix = b.split(\":\")[0];\n              if(uri===\"http://www.w3.org/2001/XMLSchema#boolean\" && a===\"true\"){\n                context.decrement(prefix);\n                return true;\n              }\n              if(uri===\"http://www.w3.org/2001/XMLSchema#boolean\" && a===\"false\"){\n                context.decrement(prefix);\n                return false;\n              }\n              if(uri===\"http://www.w3.org/2001/XMLSchema#integer\"){\n                context.decrement(prefix);\n                return parseInt(a);\n              }\n              if(uri===\"http://www.w3.org/2001/XMLSchema#double\"){\n                context.decrement(prefix);\n                return parseFloat(a);\n              }\n            }\n            return {\"@value\":a,\"@type\":b};\n          },\n        peg$c68 = \"true\",\n        peg$c69 = peg$literalExpectation(\"true\", false),\n        peg$c70 = function() {return true;},\n        peg$c71 = \"false\",\n        peg$c72 = peg$literalExpectation(\"false\", false),\n        peg$c73 = function() {return false;},\n        peg$c74 = function(a) {return a+\":\";},\n        peg$c75 = \"<\",\n        peg$c76 = peg$literalExpectation(\"<\", false),\n        peg$c77 = /^[^\\0- <>\"{}|\\^`\\\\]/,\n        peg$c78 = peg$classExpectation([[\"\\0\", \" \"], \"<\", \">\", \"\\\"\", \"{\", \"}\", \"|\", \"^\", \"`\", \"\\\\\"], true, false),\n        peg$c79 = \">\",\n        peg$c80 = peg$literalExpectation(\">\", false),\n        peg$c81 = function(a) {\n          const decoded = a.map(s=> {\n            if(0x10000 <= s.codePointAt(0) && s.codePointAt(0) <= 0xeffff) return 'a';\n            if(s.length===1) return s;\n            if(s.length===6) return String.fromCharCode(\"0x\"+s.substring(2));\n            if(s.length===10) return String.fromCodePoint(\"0x\"+s.substring(2));\n            return s;\n          }).join(\"\");\n          if(decoded.match(/^[^\\u0000-\\u0020<>\"{}|^`\\\\]*$/)){\n            var join = a.join(\"\");\n            try{\n              return context.resolve(join);\n            }catch(e){\n              error(\"Invalid IRIREF \"+join);\n            }\n          }\n          else error(\"Invalid IRIREF \"+a.join(\"\")+\" / \"+decoded);\n        },\n        peg$c82 = \":\",\n        peg$c83 = peg$literalExpectation(\":\", false),\n        peg$c84 = function(a) {\n          a = a || \"0\";\n          if(context.hasPrefix(a)===false)\n            error(\"undefined prefix \"+a);\n          return a;\n        },\n        peg$c85 = function(a) {return (a||\"\");},\n        peg$c86 = function(a, b) {\n          context.increment(a);\n          return context.resolve(a+\":\"+b);\n        },\n        peg$c87 = \"_:\",\n        peg$c88 = peg$literalExpectation(\"_:\", false),\n        peg$c89 = /^[0-9]/,\n        peg$c90 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n        peg$c91 = \"@\",\n        peg$c92 = peg$literalExpectation(\"@\", false),\n        peg$c93 = /^[a-zA-Z]/,\n        peg$c94 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false),\n        peg$c95 = \"-\",\n        peg$c96 = peg$literalExpectation(\"-\", false),\n        peg$c97 = /^[a-zA-Z0-9]/,\n        peg$c98 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"]], false, false),\n        peg$c99 = function(a, s) {return '-'+s.join(\"\");},\n        peg$c100 = function(a, b) {return a.join(\"\")+b.join(\"\");},\n        peg$c101 = /^[+\\-]/,\n        peg$c102 = peg$classExpectation([\"+\", \"-\"], false, false),\n        peg$c103 = function(a) {\n          if(a.match(/^[0+][0-9]+$/))\n            return {\n              \"@value\" : a,\n              \"@type\" : \"http://www.w3.org/2001/XMLSchema#integer\"\n            };\n          return parseInt(a);\n        },\n        peg$c104 = function(a) {\n          return {\n            \"@value\" : a,\n            \"@type\" : \"http://www.w3.org/2001/XMLSchema#decimal\"\n          }\n        },\n        peg$c105 = function(a) {\n          return {\n            \"@value\" : a,\n            \"@type\" : \"http://www.w3.org/2001/XMLSchema#double\"\n          };\n        },\n        peg$c106 = /^[eE]/,\n        peg$c107 = peg$classExpectation([\"e\", \"E\"], false, false),\n        peg$c108 = \"\\\"\",\n        peg$c109 = peg$literalExpectation(\"\\\"\", false),\n        peg$c110 = /^[^\"\\\\\\n\\r]/,\n        peg$c111 = peg$classExpectation([\"\\\"\", \"\\\\\", \"\\n\", \"\\r\"], true, false),\n        peg$c112 = \"'\",\n        peg$c113 = peg$literalExpectation(\"'\", false),\n        peg$c114 = /^[^'\\\\\\n\\r]/,\n        peg$c115 = peg$classExpectation([\"'\", \"\\\\\", \"\\n\", \"\\r\"], true, false),\n        peg$c116 = \"'''\",\n        peg$c117 = peg$literalExpectation(\"'''\", false),\n        peg$c118 = /^[^'\\\\]/,\n        peg$c119 = peg$classExpectation([\"'\", \"\\\\\"], true, false),\n        peg$c120 = \"''\",\n        peg$c121 = peg$literalExpectation(\"''\", false),\n        peg$c122 = function(head, a) {return \"''\"+a.join(\"\");},\n        peg$c123 = function(head, a) {return \"'\" +a.join(\"\");},\n        peg$c124 = function(head, body) {return head.join(\"\")+body.join(\"\");},\n        peg$c125 = \"\\\"\\\"\\\"\",\n        peg$c126 = peg$literalExpectation(\"\\\"\\\"\\\"\", false),\n        peg$c127 = /^[^\"\\\\]/,\n        peg$c128 = peg$classExpectation([\"\\\"\", \"\\\\\"], true, false),\n        peg$c129 = \"\\\"\\\"\",\n        peg$c130 = peg$literalExpectation(\"\\\"\\\"\", false),\n        peg$c131 = function(head, a) {return '\"\"'+a.join(\"\");},\n        peg$c132 = function(head, a) {return '\"' +a.join(\"\");},\n        peg$c133 = \"\\\\U\",\n        peg$c134 = peg$literalExpectation(\"\\\\U\", false),\n        peg$c135 = function(hex) {\n            return String.fromCodePoint(parseInt(hex.join(\"\"),16));\n          },\n        peg$c136 = \"\\\\u\",\n        peg$c137 = peg$literalExpectation(\"\\\\u\", false),\n        peg$c138 = function(hex) {\n            return String.fromCharCode(parseInt(hex.join(\"\"),16));\n          },\n        peg$c139 = \"\\\\t\",\n        peg$c140 = peg$literalExpectation(\"\\\\t\", false),\n        peg$c141 = function() {return '\\t';},\n        peg$c142 = \"\\\\b\",\n        peg$c143 = peg$literalExpectation(\"\\\\b\", false),\n        peg$c144 = function() {return '\\b';},\n        peg$c145 = \"\\\\n\",\n        peg$c146 = peg$literalExpectation(\"\\\\n\", false),\n        peg$c147 = function() {return '\\n';},\n        peg$c148 = \"\\\\r\",\n        peg$c149 = peg$literalExpectation(\"\\\\r\", false),\n        peg$c150 = function() {return '\\r';},\n        peg$c151 = \"\\\\f\",\n        peg$c152 = peg$literalExpectation(\"\\\\f\", false),\n        peg$c153 = function() {return '\\f';},\n        peg$c154 = \"\\\\\\\"\",\n        peg$c155 = peg$literalExpectation(\"\\\\\\\"\", false),\n        peg$c156 = function() {return '\"';},\n        peg$c157 = \"\\\\'\",\n        peg$c158 = peg$literalExpectation(\"\\\\'\", false),\n        peg$c159 = function() {return \"'\";},\n        peg$c160 = \"\\\\\\\\\",\n        peg$c161 = peg$literalExpectation(\"\\\\\\\\\", false),\n        peg$c162 = function() {return '\\\\';},\n        peg$c163 = /^[ \\t\\r\\n]/,\n        peg$c164 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false),\n        peg$c165 = function() {return \"[]\";},\n        peg$c166 = /^[\\uD800-\\uDBFF]/,\n        peg$c167 = peg$classExpectation([[\"\\uD800\", \"\\uDBFF\"]], false, false),\n        peg$c168 = /^[\\uDC00-\\uDFFF]/,\n        peg$c169 = peg$classExpectation([[\"\\uDC00\", \"\\uDFFF\"]], false, false),\n        peg$c170 = function(a, b) {return a+b;},\n        peg$c171 = /^[A-Za-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/,\n        peg$c172 = peg$classExpectation([[\"A\", \"Z\"], [\"a\", \"z\"], [\"\\xC0\", \"\\xD6\"], [\"\\xD8\", \"\\xF6\"], [\"\\xF8\", \"\\u02FF\"], [\"\\u0370\", \"\\u037D\"], [\"\\u037F\", \"\\u1FFF\"], [\"\\u200C\", \"\\u200D\"], [\"\\u2070\", \"\\u218F\"], [\"\\u2C00\", \"\\u2FEF\"], [\"\\u3001\", \"\\uD7FF\"], [\"\\uF900\", \"\\uFDCF\"], [\"\\uFDF0\", \"\\uFFFD\"]], false, false),\n        peg$c173 = \"_\",\n        peg$c174 = peg$literalExpectation(\"_\", false),\n        peg$c175 = \"\\xB7\",\n        peg$c176 = peg$literalExpectation(\"\\xB7\", false),\n        peg$c177 = /^[\\u0300-\\u036F]/,\n        peg$c178 = peg$classExpectation([[\"\\u0300\", \"\\u036F\"]], false, false),\n        peg$c179 = /^[\\u203F-\\u2040]/,\n        peg$c180 = peg$classExpectation([[\"\\u203F\", \"\\u2040\"]], false, false),\n        peg$c181 = function(head, body, a, b) {return a.join(\"\")+b.join(\"\");},\n        peg$c182 = function(head, body, tail) {return head+body.join(\"\")+tail.join(\"\");},\n        peg$c183 = \"%\",\n        peg$c184 = peg$literalExpectation(\"%\", false),\n        peg$c185 = /^[0-9A-Fa-f]/,\n        peg$c186 = peg$classExpectation([[\"0\", \"9\"], [\"A\", \"F\"], [\"a\", \"f\"]], false, false),\n        peg$c187 = \"\\\\\",\n        peg$c188 = peg$literalExpectation(\"\\\\\", false),\n        peg$c189 = /^[_~.!$&'()*+,;=\\/?#@%\\-]/,\n        peg$c190 = peg$classExpectation([\"_\", \"~\", \".\", \"!\", \"$\", \"&\", \"'\", \"(\", \")\", \"*\", \"+\", \",\", \";\", \"=\", \"/\", \"?\", \"#\", \"@\", \"%\", \"-\"], false, false),\n\n        peg$currPos          = 0,\n        peg$savedPos         = 0,\n        peg$posDetailsCache  = [{ line: 1, column: 1 }],\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$savedPos, peg$currPos);\n    }\n\n    function location() {\n      return peg$computeLocation(peg$savedPos, peg$currPos);\n    }\n\n    function expected(description, location) {\n      location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n      throw peg$buildStructuredError(\n        [peg$otherExpectation(description)],\n        input.substring(peg$savedPos, peg$currPos),\n        location\n      );\n    }\n\n    function error(message, location) {\n      location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n      throw peg$buildSimpleError(message, location);\n    }\n\n    function peg$literalExpectation(text, ignoreCase) {\n      return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n    }\n\n    function peg$classExpectation(parts, inverted, ignoreCase) {\n      return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n    }\n\n    function peg$anyExpectation() {\n      return { type: \"any\" };\n    }\n\n    function peg$endExpectation() {\n      return { type: \"end\" };\n    }\n\n    function peg$otherExpectation(description) {\n      return { type: \"other\", description: description };\n    }\n\n    function peg$computePosDetails(pos) {\n      var details = peg$posDetailsCache[pos], p;\n\n      if (details) {\n        return details;\n      } else {\n        p = pos - 1;\n        while (!peg$posDetailsCache[p]) {\n          p--;\n        }\n\n        details = peg$posDetailsCache[p];\n        details = {\n          line:   details.line,\n          column: details.column\n        };\n\n        while (p < pos) {\n          if (input.charCodeAt(p) === 10) {\n            details.line++;\n            details.column = 1;\n          } else {\n            details.column++;\n          }\n\n          p++;\n        }\n\n        peg$posDetailsCache[pos] = details;\n        return details;\n      }\n    }\n\n    function peg$computeLocation(startPos, endPos) {\n      var startPosDetails = peg$computePosDetails(startPos),\n          endPosDetails   = peg$computePosDetails(endPos);\n\n      return {\n        start: {\n          offset: startPos,\n          line:   startPosDetails.line,\n          column: startPosDetails.column\n        },\n        end: {\n          offset: endPos,\n          line:   endPosDetails.line,\n          column: endPosDetails.column\n        }\n      };\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildSimpleError(message, location) {\n      return new peg$SyntaxError(message, null, null, location);\n    }\n\n    function peg$buildStructuredError(expected, found, location) {\n      return new peg$SyntaxError(\n        peg$SyntaxError.buildMessage(expected, found),\n        expected,\n        found,\n        location\n      );\n    }\n\n    function peg$parseturtleDoc() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseBOM();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseBOM();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsestatement();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsestatement();\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseIGNORE();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseIGNORE();\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c0(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseBOM() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 65279) {\n        s0 = peg$c1;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c2); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsestatement() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$parsedirective();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsetriples();\n        if (s1 !== peg$FAILED) {\n          s2 = [];\n          s3 = peg$parseIGNORE();\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseIGNORE();\n          }\n          if (s2 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s3 = peg$c3;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s3 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c5(s1);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseCOMMENT() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 35) {\n        s1 = peg$c6;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c7); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c8.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c9); }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c8.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c9); }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 10) {\n            s3 = peg$c10;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c11); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c12(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseIGNORE() {\n      var s0;\n\n      s0 = peg$parseWS();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseCOMMENT();\n      }\n\n      return s0;\n    }\n\n    function peg$parsedirective() {\n      var s0;\n\n      s0 = peg$parseprefixID();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsebase();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsesparqlPrefix();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parsesparqlBase();\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseprefixID() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 7) === peg$c13) {\n          s2 = peg$c13;\n          peg$currPos += 7;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c14); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseIGNORE();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseIGNORE();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parsePNAME_NS_NO_CHECK();\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parseIGNORE();\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$parseIGNORE();\n              }\n              if (s5 !== peg$FAILED) {\n                s6 = peg$parseIRIREF();\n                if (s6 !== peg$FAILED) {\n                  s7 = [];\n                  s8 = peg$parseIGNORE();\n                  while (s8 !== peg$FAILED) {\n                    s7.push(s8);\n                    s8 = peg$parseIGNORE();\n                  }\n                  if (s7 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 46) {\n                      s8 = peg$c3;\n                      peg$currPos++;\n                    } else {\n                      s8 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                    }\n                    if (s8 !== peg$FAILED) {\n                      peg$savedPos = s0;\n                      s1 = peg$c15(s4, s6);\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsebase() {\n      var s0, s1, s2, s3, s4, s5, s6;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 5) === peg$c16) {\n          s2 = peg$c16;\n          peg$currPos += 5;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c17); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseIGNORE();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseIGNORE();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseIRIREF();\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parseIGNORE();\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$parseIGNORE();\n              }\n              if (s5 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 46) {\n                  s6 = peg$c3;\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                }\n                if (s6 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c18(s4);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsesparqlBase() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (peg$c19.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c20); }\n        }\n        if (s2 !== peg$FAILED) {\n          if (peg$c21.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c22); }\n          }\n          if (s3 !== peg$FAILED) {\n            if (peg$c23.test(input.charAt(peg$currPos))) {\n              s4 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c24); }\n            }\n            if (s4 !== peg$FAILED) {\n              if (peg$c25.test(input.charAt(peg$currPos))) {\n                s5 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c26); }\n              }\n              if (s5 !== peg$FAILED) {\n                s6 = [];\n                s7 = peg$parseIGNORE();\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  s7 = peg$parseIGNORE();\n                }\n                if (s6 !== peg$FAILED) {\n                  s7 = peg$parseIRIREF();\n                  if (s7 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c18(s7);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsesparqlPrefix() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (peg$c27.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c28); }\n        }\n        if (s2 !== peg$FAILED) {\n          if (peg$c29.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c30); }\n          }\n          if (s3 !== peg$FAILED) {\n            if (peg$c25.test(input.charAt(peg$currPos))) {\n              s4 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c26); }\n            }\n            if (s4 !== peg$FAILED) {\n              if (peg$c31.test(input.charAt(peg$currPos))) {\n                s5 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c32); }\n              }\n              if (s5 !== peg$FAILED) {\n                if (peg$c33.test(input.charAt(peg$currPos))) {\n                  s6 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c34); }\n                }\n                if (s6 !== peg$FAILED) {\n                  if (peg$c35.test(input.charAt(peg$currPos))) {\n                    s7 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c36); }\n                  }\n                  if (s7 !== peg$FAILED) {\n                    s8 = [];\n                    s9 = peg$parseIGNORE();\n                    while (s9 !== peg$FAILED) {\n                      s8.push(s9);\n                      s9 = peg$parseIGNORE();\n                    }\n                    if (s8 !== peg$FAILED) {\n                      s9 = peg$parsePNAME_NS_NO_CHECK();\n                      if (s9 !== peg$FAILED) {\n                        s10 = [];\n                        s11 = peg$parseIGNORE();\n                        while (s11 !== peg$FAILED) {\n                          s10.push(s11);\n                          s11 = peg$parseIGNORE();\n                        }\n                        if (s10 !== peg$FAILED) {\n                          s11 = peg$parseIRIREF();\n                          if (s11 !== peg$FAILED) {\n                            peg$savedPos = s0;\n                            s1 = peg$c15(s9, s11);\n                            s0 = s1;\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsetriples() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsesubject();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsepredicateObjectList();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c37(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseblankNodePropertyList();\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsepredicateObjectList();\n          if (s2 === peg$FAILED) {\n            s2 = null;\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c38(s1, s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsepredicateObjectList() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$currPos;\n      s1 = peg$parseverb();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseobjectList();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$currPos;\n          s5 = [];\n          s6 = peg$parseIGNORE();\n          while (s6 !== peg$FAILED) {\n            s5.push(s6);\n            s6 = peg$parseIGNORE();\n          }\n          if (s5 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 59) {\n              s6 = peg$c39;\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c40); }\n            }\n            if (s6 !== peg$FAILED) {\n              s7 = peg$currPos;\n              s8 = peg$parseverb();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parseobjectList();\n                if (s9 !== peg$FAILED) {\n                  peg$savedPos = s7;\n                  s8 = peg$c41(s1, s2, s8, s9);\n                  s7 = s8;\n                } else {\n                  peg$currPos = s7;\n                  s7 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s7;\n                s7 = peg$FAILED;\n              }\n              if (s7 === peg$FAILED) {\n                s7 = null;\n              }\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c42(s1, s2, s7);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$currPos;\n            s5 = [];\n            s6 = peg$parseIGNORE();\n            while (s6 !== peg$FAILED) {\n              s5.push(s6);\n              s6 = peg$parseIGNORE();\n            }\n            if (s5 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 59) {\n                s6 = peg$c39;\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c40); }\n              }\n              if (s6 !== peg$FAILED) {\n                s7 = peg$currPos;\n                s8 = peg$parseverb();\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parseobjectList();\n                  if (s9 !== peg$FAILED) {\n                    peg$savedPos = s7;\n                    s8 = peg$c41(s1, s2, s8, s9);\n                    s7 = s8;\n                  } else {\n                    peg$currPos = s7;\n                    s7 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s7;\n                  s7 = peg$FAILED;\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = null;\n                }\n                if (s7 !== peg$FAILED) {\n                  peg$savedPos = s4;\n                  s5 = peg$c42(s1, s2, s7);\n                  s4 = s5;\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c43(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseobjectList() {\n      var s0, s1, s2, s3, s4, s5, s6;\n\n      s0 = peg$currPos;\n      s1 = peg$parseobject();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parseIGNORE();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parseIGNORE();\n        }\n        if (s4 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 44) {\n            s5 = peg$c44;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c45); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parseobject();\n            if (s6 !== peg$FAILED) {\n              peg$savedPos = s3;\n              s4 = peg$c46(s1, s6);\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$currPos;\n          s4 = [];\n          s5 = peg$parseIGNORE();\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$parseIGNORE();\n          }\n          if (s4 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 44) {\n              s5 = peg$c44;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c45); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseobject();\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s3;\n                s4 = peg$c46(s1, s6);\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c47(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseverb() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsepredicate();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c5(s1);\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseIGNORE();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseIGNORE();\n        }\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 97) {\n            s2 = peg$c48;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c49); }\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c50();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsesubject() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      s1 = peg$parsecollection();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c51(s1);\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseBlankNode();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseiri();\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsepredicate() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseiri();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseobject() {\n      var s0, s1;\n\n      s0 = peg$parseliteral();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsecollection();\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c52(s1);\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$parseBlankNode();\n          if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c53(s1);\n          }\n          s0 = s1;\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parseblankNodePropertyList();\n            if (s1 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c5(s1);\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n              s0 = peg$currPos;\n              s1 = peg$parseiri();\n              if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c54(s1);\n              }\n              s0 = s1;\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseliteral() {\n      var s0;\n\n      s0 = peg$parseRDFLiteral();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseNumericLiteral();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseBooleanLiteral();\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseblankNodePropertyList() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 91) {\n          s2 = peg$c55;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c56); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsepredicateObjectList();\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            s5 = peg$parseIGNORE();\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              s5 = peg$parseIGNORE();\n            }\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 93) {\n                s5 = peg$c57;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c58); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c5(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsecollection() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 40) {\n          s2 = peg$c59;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c60); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseobject();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseobject();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            s5 = peg$parseIGNORE();\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              s5 = peg$parseIGNORE();\n            }\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 41) {\n                s5 = peg$c61;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c62); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c63(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseNumericLiteral() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseDOUBLE();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseDECIMAL();\n          if (s2 === peg$FAILED) {\n            s2 = peg$parseINTEGER();\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseRDFLiteral() {\n      var s0, s1, s2, s3, s4, s5, s6;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseString();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseIGNORE();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseIGNORE();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseLANGTAG();\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c64(s2, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseIGNORE();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseIGNORE();\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parseString();\n          if (s2 !== peg$FAILED) {\n            s3 = [];\n            s4 = peg$parseIGNORE();\n            while (s4 !== peg$FAILED) {\n              s3.push(s4);\n              s4 = peg$parseIGNORE();\n            }\n            if (s3 !== peg$FAILED) {\n              if (input.substr(peg$currPos, 2) === peg$c65) {\n                s4 = peg$c65;\n                peg$currPos += 2;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c66); }\n              }\n              if (s4 !== peg$FAILED) {\n                s5 = [];\n                s6 = peg$parseIGNORE();\n                while (s6 !== peg$FAILED) {\n                  s5.push(s6);\n                  s6 = peg$parseIGNORE();\n                }\n                if (s5 !== peg$FAILED) {\n                  s6 = peg$parseiri();\n                  if (s6 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c67(s2, s6);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = [];\n          s2 = peg$parseIGNORE();\n          while (s2 !== peg$FAILED) {\n            s1.push(s2);\n            s2 = peg$parseIGNORE();\n          }\n          if (s1 !== peg$FAILED) {\n            s2 = peg$parseString();\n            if (s2 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c5(s2);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseBooleanLiteral() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 4) === peg$c68) {\n          s2 = peg$c68;\n          peg$currPos += 4;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c69); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c70();\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseIGNORE();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseIGNORE();\n        }\n        if (s1 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 5) === peg$c71) {\n            s2 = peg$c71;\n            peg$currPos += 5;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c72); }\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c73();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseString() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseSTRING_LITERAL_LONG_SINGLE_QUOTE();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseSTRING_LITERAL_LONG_QUOTE();\n          if (s2 === peg$FAILED) {\n            s2 = peg$parseSTRING_LITERAL_SINGLE_QUOTE();\n            if (s2 === peg$FAILED) {\n              s2 = peg$parseSTRING_LITERAL_QUOTE();\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseiri() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseIRIREF();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseIGNORE();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseIGNORE();\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsePrefixedName();\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c5(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsePrefixedName() {\n      var s0, s1;\n\n      s0 = peg$parsePNAME_LN();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsePNAME_NS();\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c74(s1);\n        }\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parseBlankNode() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseIGNORE();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseIGNORE();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseBLANK_NODE_LABEL();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseIGNORE();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseIGNORE();\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parseANON();\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c5(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseIRIREF() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 60) {\n        s1 = peg$c75;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c76); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c77.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c78); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$parseUCHAR();\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c77.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c78); }\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseUCHAR();\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 62) {\n            s3 = peg$c79;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c80); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c81(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsePNAME_NS() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsePN_PREFIX();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s2 = peg$c82;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c83); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c84(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsePNAME_NS_NO_CHECK() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsePN_PREFIX();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s2 = peg$c82;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c83); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c85(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsePNAME_LN() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsePNAME_NS();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsePN_LOCAL();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c86(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseBLANK_NODE_LABEL() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c87) {\n        s2 = peg$c87;\n        peg$currPos += 2;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c88); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsePN_CHARS_U();\n        if (s3 === peg$FAILED) {\n          if (peg$c89.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c90); }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$parsePN_CHARS();\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$parsePN_CHARS();\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = [];\n            s6 = peg$currPos;\n            s7 = [];\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s8 = peg$c3;\n              peg$currPos++;\n            } else {\n              s8 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s8 !== peg$FAILED) {\n              while (s8 !== peg$FAILED) {\n                s7.push(s8);\n                if (input.charCodeAt(peg$currPos) === 46) {\n                  s8 = peg$c3;\n                  peg$currPos++;\n                } else {\n                  s8 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                }\n              }\n            } else {\n              s7 = peg$FAILED;\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = [];\n              s9 = peg$parsePN_CHARS();\n              if (s9 !== peg$FAILED) {\n                while (s9 !== peg$FAILED) {\n                  s8.push(s9);\n                  s9 = peg$parsePN_CHARS();\n                }\n              } else {\n                s8 = peg$FAILED;\n              }\n              if (s8 !== peg$FAILED) {\n                s7 = [s7, s8];\n                s6 = s7;\n              } else {\n                peg$currPos = s6;\n                s6 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s6;\n              s6 = peg$FAILED;\n            }\n            while (s6 !== peg$FAILED) {\n              s5.push(s6);\n              s6 = peg$currPos;\n              s7 = [];\n              if (input.charCodeAt(peg$currPos) === 46) {\n                s8 = peg$c3;\n                peg$currPos++;\n              } else {\n                s8 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n              if (s8 !== peg$FAILED) {\n                while (s8 !== peg$FAILED) {\n                  s7.push(s8);\n                  if (input.charCodeAt(peg$currPos) === 46) {\n                    s8 = peg$c3;\n                    peg$currPos++;\n                  } else {\n                    s8 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                  }\n                }\n              } else {\n                s7 = peg$FAILED;\n              }\n              if (s7 !== peg$FAILED) {\n                s8 = [];\n                s9 = peg$parsePN_CHARS();\n                if (s9 !== peg$FAILED) {\n                  while (s9 !== peg$FAILED) {\n                    s8.push(s9);\n                    s9 = peg$parsePN_CHARS();\n                  }\n                } else {\n                  s8 = peg$FAILED;\n                }\n                if (s8 !== peg$FAILED) {\n                  s7 = [s7, s8];\n                  s6 = s7;\n                } else {\n                  peg$currPos = s6;\n                  s6 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s6;\n                s6 = peg$FAILED;\n              }\n            }\n            if (s5 !== peg$FAILED) {\n              s2 = [s2, s3, s4, s5];\n              s1 = s2;\n            } else {\n              peg$currPos = s1;\n              s1 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s1;\n            s1 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parseLANGTAG() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 64) {\n        s1 = peg$c91;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c92); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c93.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c94); }\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            if (peg$c93.test(input.charAt(peg$currPos))) {\n              s3 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c94); }\n            }\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 45) {\n            s5 = peg$c95;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c96); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = [];\n            if (peg$c97.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c98); }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (peg$c97.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c98); }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              peg$savedPos = s4;\n              s5 = peg$c99(s2, s6);\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 45) {\n              s5 = peg$c95;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c96); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              if (peg$c97.test(input.charAt(peg$currPos))) {\n                s7 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c98); }\n              }\n              if (s7 !== peg$FAILED) {\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  if (peg$c97.test(input.charAt(peg$currPos))) {\n                    s7 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c98); }\n                  }\n                }\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c99(s2, s6);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c100(s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseINTEGER() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$currPos;\n      if (peg$c101.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c102); }\n      }\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        if (peg$c89.test(input.charAt(peg$currPos))) {\n          s5 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c90); }\n        }\n        if (s5 !== peg$FAILED) {\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            if (peg$c89.test(input.charAt(peg$currPos))) {\n              s5 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c90); }\n            }\n          }\n        } else {\n          s4 = peg$FAILED;\n        }\n        if (s4 !== peg$FAILED) {\n          s3 = [s3, s4];\n          s2 = s3;\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = input.substring(s1, peg$currPos);\n      } else {\n        s1 = s2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c103(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseDECIMAL() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$currPos;\n      if (peg$c101.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c102); }\n      }\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        if (peg$c89.test(input.charAt(peg$currPos))) {\n          s5 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c90); }\n        }\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          if (peg$c89.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c90); }\n          }\n        }\n        if (s4 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s5 = peg$c3;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = [];\n            if (peg$c89.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c90); }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (peg$c89.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c90); }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              s3 = [s3, s4, s5, s6];\n              s2 = s3;\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = input.substring(s1, peg$currPos);\n      } else {\n        s1 = s2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c104(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseDOUBLE() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$currPos;\n      if (peg$c101.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c102); }\n      }\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$currPos;\n        s5 = [];\n        if (peg$c89.test(input.charAt(peg$currPos))) {\n          s6 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c90); }\n        }\n        if (s6 !== peg$FAILED) {\n          while (s6 !== peg$FAILED) {\n            s5.push(s6);\n            if (peg$c89.test(input.charAt(peg$currPos))) {\n              s6 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c90); }\n            }\n          }\n        } else {\n          s5 = peg$FAILED;\n        }\n        if (s5 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s6 = peg$c3;\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n          if (s6 !== peg$FAILED) {\n            s7 = [];\n            if (peg$c89.test(input.charAt(peg$currPos))) {\n              s8 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s8 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c90); }\n            }\n            while (s8 !== peg$FAILED) {\n              s7.push(s8);\n              if (peg$c89.test(input.charAt(peg$currPos))) {\n                s8 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s8 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c90); }\n              }\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parseEXPONENT();\n              if (s8 !== peg$FAILED) {\n                s5 = [s5, s6, s7, s8];\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s4;\n          s4 = peg$FAILED;\n        }\n        if (s4 === peg$FAILED) {\n          s4 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s5 = peg$c3;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = [];\n            if (peg$c89.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c90); }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (peg$c89.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c90); }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parseEXPONENT();\n              if (s7 !== peg$FAILED) {\n                s5 = [s5, s6, s7];\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = peg$currPos;\n            s5 = [];\n            if (peg$c89.test(input.charAt(peg$currPos))) {\n              s6 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c90); }\n            }\n            if (s6 !== peg$FAILED) {\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                if (peg$c89.test(input.charAt(peg$currPos))) {\n                  s6 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c90); }\n                }\n              }\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseEXPONENT();\n              if (s6 !== peg$FAILED) {\n                s5 = [s5, s6];\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          }\n        }\n        if (s4 !== peg$FAILED) {\n          s3 = [s3, s4];\n          s2 = s3;\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = input.substring(s1, peg$currPos);\n      } else {\n        s1 = s2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c105(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseEXPONENT() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (peg$c106.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c107); }\n      }\n      if (s2 !== peg$FAILED) {\n        if (peg$c101.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c102); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          if (peg$c89.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c90); }\n          }\n          if (s5 !== peg$FAILED) {\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              if (peg$c89.test(input.charAt(peg$currPos))) {\n                s5 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c90); }\n              }\n            }\n          } else {\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            s2 = [s2, s3, s4];\n            s1 = s2;\n          } else {\n            peg$currPos = s1;\n            s1 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parseSTRING_LITERAL_QUOTE() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 34) {\n        s1 = peg$c108;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c109); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c110.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c111); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$parseECHAR();\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseUCHAR();\n          }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c110.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c111); }\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseECHAR();\n            if (s3 === peg$FAILED) {\n              s3 = peg$parseUCHAR();\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s3 = peg$c108;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c109); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c12(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseSTRING_LITERAL_SINGLE_QUOTE() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 39) {\n        s1 = peg$c112;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c113); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c114.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c115); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$parseECHAR();\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseUCHAR();\n          }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c114.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c115); }\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseECHAR();\n            if (s3 === peg$FAILED) {\n              s3 = peg$parseUCHAR();\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 39) {\n            s3 = peg$c112;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c113); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c12(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseSTRING_LITERAL_LONG_SINGLE_QUOTE() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 3) === peg$c116) {\n        s1 = peg$c116;\n        peg$currPos += 3;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c117); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c118.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c119); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$parseECHAR();\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseUCHAR();\n          }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c118.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c119); }\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseECHAR();\n            if (s3 === peg$FAILED) {\n              s3 = peg$parseUCHAR();\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$currPos;\n          if (input.substr(peg$currPos, 2) === peg$c120) {\n            s5 = peg$c120;\n            peg$currPos += 2;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c121); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = [];\n            if (peg$c118.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c119); }\n            }\n            if (s7 === peg$FAILED) {\n              s7 = peg$parseECHAR();\n              if (s7 === peg$FAILED) {\n                s7 = peg$parseUCHAR();\n              }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (peg$c118.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c119); }\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseECHAR();\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseUCHAR();\n                  }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              peg$savedPos = s4;\n              s5 = peg$c122(s2, s6);\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 39) {\n              s5 = peg$c112;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c113); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              if (peg$c118.test(input.charAt(peg$currPos))) {\n                s7 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c119); }\n              }\n              if (s7 === peg$FAILED) {\n                s7 = peg$parseECHAR();\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseUCHAR();\n                }\n              }\n              if (s7 !== peg$FAILED) {\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  if (peg$c118.test(input.charAt(peg$currPos))) {\n                    s7 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c119); }\n                  }\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseECHAR();\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parseUCHAR();\n                    }\n                  }\n                }\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c123(s2, s6);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          }\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$currPos;\n            if (input.substr(peg$currPos, 2) === peg$c120) {\n              s5 = peg$c120;\n              peg$currPos += 2;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c121); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              if (peg$c118.test(input.charAt(peg$currPos))) {\n                s7 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c119); }\n              }\n              if (s7 === peg$FAILED) {\n                s7 = peg$parseECHAR();\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseUCHAR();\n                }\n              }\n              if (s7 !== peg$FAILED) {\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  if (peg$c118.test(input.charAt(peg$currPos))) {\n                    s7 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c119); }\n                  }\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseECHAR();\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parseUCHAR();\n                    }\n                  }\n                }\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c122(s2, s6);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n            if (s4 === peg$FAILED) {\n              s4 = peg$currPos;\n              if (input.charCodeAt(peg$currPos) === 39) {\n                s5 = peg$c112;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c113); }\n              }\n              if (s5 !== peg$FAILED) {\n                s6 = [];\n                if (peg$c118.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c119); }\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseECHAR();\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseUCHAR();\n                  }\n                }\n                if (s7 !== peg$FAILED) {\n                  while (s7 !== peg$FAILED) {\n                    s6.push(s7);\n                    if (peg$c118.test(input.charAt(peg$currPos))) {\n                      s7 = input.charAt(peg$currPos);\n                      peg$currPos++;\n                    } else {\n                      s7 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c119); }\n                    }\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parseECHAR();\n                      if (s7 === peg$FAILED) {\n                        s7 = peg$parseUCHAR();\n                      }\n                    }\n                  }\n                } else {\n                  s6 = peg$FAILED;\n                }\n                if (s6 !== peg$FAILED) {\n                  peg$savedPos = s4;\n                  s5 = peg$c123(s2, s6);\n                  s4 = s5;\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            }\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 3) === peg$c116) {\n              s4 = peg$c116;\n              peg$currPos += 3;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c117); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c124(s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseSTRING_LITERAL_LONG_QUOTE() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 3) === peg$c125) {\n        s1 = peg$c125;\n        peg$currPos += 3;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c126); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c127.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c128); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$parseECHAR();\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseUCHAR();\n          }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c127.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c128); }\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseECHAR();\n            if (s3 === peg$FAILED) {\n              s3 = peg$parseUCHAR();\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$currPos;\n          if (input.substr(peg$currPos, 2) === peg$c129) {\n            s5 = peg$c129;\n            peg$currPos += 2;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c130); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = [];\n            if (peg$c127.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c128); }\n            }\n            if (s7 === peg$FAILED) {\n              s7 = peg$parseECHAR();\n              if (s7 === peg$FAILED) {\n                s7 = peg$parseUCHAR();\n              }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (peg$c127.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseECHAR();\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseUCHAR();\n                  }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              peg$savedPos = s4;\n              s5 = peg$c131(s2, s6);\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 34) {\n              s5 = peg$c108;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c109); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              if (peg$c127.test(input.charAt(peg$currPos))) {\n                s7 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c128); }\n              }\n              if (s7 === peg$FAILED) {\n                s7 = peg$parseECHAR();\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseUCHAR();\n                }\n              }\n              if (s7 !== peg$FAILED) {\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  if (peg$c127.test(input.charAt(peg$currPos))) {\n                    s7 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                  }\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseECHAR();\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parseUCHAR();\n                    }\n                  }\n                }\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c132(s2, s6);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          }\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$currPos;\n            if (input.substr(peg$currPos, 2) === peg$c129) {\n              s5 = peg$c129;\n              peg$currPos += 2;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c130); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              if (peg$c127.test(input.charAt(peg$currPos))) {\n                s7 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c128); }\n              }\n              if (s7 === peg$FAILED) {\n                s7 = peg$parseECHAR();\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseUCHAR();\n                }\n              }\n              if (s7 !== peg$FAILED) {\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  if (peg$c127.test(input.charAt(peg$currPos))) {\n                    s7 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                  }\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseECHAR();\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parseUCHAR();\n                    }\n                  }\n                }\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c131(s2, s6);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n            if (s4 === peg$FAILED) {\n              s4 = peg$currPos;\n              if (input.charCodeAt(peg$currPos) === 34) {\n                s5 = peg$c108;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c109); }\n              }\n              if (s5 !== peg$FAILED) {\n                s6 = [];\n                if (peg$c127.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parseECHAR();\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parseUCHAR();\n                  }\n                }\n                if (s7 !== peg$FAILED) {\n                  while (s7 !== peg$FAILED) {\n                    s6.push(s7);\n                    if (peg$c127.test(input.charAt(peg$currPos))) {\n                      s7 = input.charAt(peg$currPos);\n                      peg$currPos++;\n                    } else {\n                      s7 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                    }\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parseECHAR();\n                      if (s7 === peg$FAILED) {\n                        s7 = peg$parseUCHAR();\n                      }\n                    }\n                  }\n                } else {\n                  s6 = peg$FAILED;\n                }\n                if (s6 !== peg$FAILED) {\n                  peg$savedPos = s4;\n                  s5 = peg$c132(s2, s6);\n                  s4 = s5;\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            }\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 3) === peg$c125) {\n              s4 = peg$c125;\n              peg$currPos += 3;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c126); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c124(s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseUCHAR() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c133) {\n        s1 = peg$c133;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c134); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parseHEX();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseHEX();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseHEX();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseHEX();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parseHEX();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parseHEX();\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseHEX();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parseHEX();\n                      if (s10 !== peg$FAILED) {\n                        s3 = [s3, s4, s5, s6, s7, s8, s9, s10];\n                        s2 = s3;\n                      } else {\n                        peg$currPos = s2;\n                        s2 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s2;\n                      s2 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s2;\n                    s2 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s2;\n                  s2 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s2;\n                s2 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c135(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c136) {\n          s1 = peg$c136;\n          peg$currPos += 2;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c137); }\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$currPos;\n          s3 = peg$parseHEX();\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseHEX();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseHEX();\n              if (s5 !== peg$FAILED) {\n                s6 = peg$parseHEX();\n                if (s6 !== peg$FAILED) {\n                  s3 = [s3, s4, s5, s6];\n                  s2 = s3;\n                } else {\n                  peg$currPos = s2;\n                  s2 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s2;\n                s2 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c138(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseECHAR() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c139) {\n        s1 = peg$c139;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c140); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c141();\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c142) {\n          s1 = peg$c142;\n          peg$currPos += 2;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c143); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c144();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          if (input.substr(peg$currPos, 2) === peg$c145) {\n            s1 = peg$c145;\n            peg$currPos += 2;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c146); }\n          }\n          if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c147();\n          }\n          s0 = s1;\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 2) === peg$c148) {\n              s1 = peg$c148;\n              peg$currPos += 2;\n            } else {\n              s1 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c149); }\n            }\n            if (s1 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c150();\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n              s0 = peg$currPos;\n              if (input.substr(peg$currPos, 2) === peg$c151) {\n                s1 = peg$c151;\n                peg$currPos += 2;\n              } else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c152); }\n              }\n              if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c153();\n              }\n              s0 = s1;\n              if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.substr(peg$currPos, 2) === peg$c154) {\n                  s1 = peg$c154;\n                  peg$currPos += 2;\n                } else {\n                  s1 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c155); }\n                }\n                if (s1 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c156();\n                }\n                s0 = s1;\n                if (s0 === peg$FAILED) {\n                  s0 = peg$currPos;\n                  if (input.substr(peg$currPos, 2) === peg$c157) {\n                    s1 = peg$c157;\n                    peg$currPos += 2;\n                  } else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c158); }\n                  }\n                  if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c159();\n                  }\n                  s0 = s1;\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$currPos;\n                    if (input.substr(peg$currPos, 2) === peg$c160) {\n                      s1 = peg$c160;\n                      peg$currPos += 2;\n                    } else {\n                      s1 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c161); }\n                    }\n                    if (s1 !== peg$FAILED) {\n                      peg$savedPos = s0;\n                      s1 = peg$c162();\n                    }\n                    s0 = s1;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseWS() {\n      var s0;\n\n      if (peg$c163.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c164); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseANON() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s1 = peg$c55;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c56); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseIGNORE();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseIGNORE();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 93) {\n            s3 = peg$c57;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c58); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c165();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsePN_CHARS_BASE() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      if (peg$c166.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c167); }\n      }\n      if (s1 !== peg$FAILED) {\n        if (peg$c168.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c169); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c170(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        if (peg$c171.test(input.charAt(peg$currPos))) {\n          s0 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s0 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c172); }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsePN_CHARS_U() {\n      var s0;\n\n      s0 = peg$parsePN_CHARS_BASE();\n      if (s0 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 95) {\n          s0 = peg$c173;\n          peg$currPos++;\n        } else {\n          s0 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c174); }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsePN_CHARS() {\n      var s0;\n\n      s0 = peg$parsePN_CHARS_U();\n      if (s0 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 45) {\n          s0 = peg$c95;\n          peg$currPos++;\n        } else {\n          s0 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c96); }\n        }\n        if (s0 === peg$FAILED) {\n          if (peg$c89.test(input.charAt(peg$currPos))) {\n            s0 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s0 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c90); }\n          }\n          if (s0 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 183) {\n              s0 = peg$c175;\n              peg$currPos++;\n            } else {\n              s0 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c176); }\n            }\n            if (s0 === peg$FAILED) {\n              if (peg$c177.test(input.charAt(peg$currPos))) {\n                s0 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s0 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c178); }\n              }\n              if (s0 === peg$FAILED) {\n                if (peg$c179.test(input.charAt(peg$currPos))) {\n                  s0 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s0 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c180); }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsePN_PREFIX() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsePN_CHARS_BASE();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsePN_CHARS();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsePN_CHARS();\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$currPos;\n          s6 = [];\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s7 = peg$c3;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n          if (s7 !== peg$FAILED) {\n            while (s7 !== peg$FAILED) {\n              s6.push(s7);\n              if (input.charCodeAt(peg$currPos) === 46) {\n                s7 = peg$c3;\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n            }\n          } else {\n            s6 = peg$FAILED;\n          }\n          if (s6 !== peg$FAILED) {\n            s7 = [];\n            s8 = peg$parsePN_CHARS();\n            if (s8 !== peg$FAILED) {\n              while (s8 !== peg$FAILED) {\n                s7.push(s8);\n                s8 = peg$parsePN_CHARS();\n              }\n            } else {\n              s7 = peg$FAILED;\n            }\n            if (s7 !== peg$FAILED) {\n              s6 = [s6, s7];\n              s5 = s6;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$currPos;\n            s6 = [];\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s7 = peg$c3;\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (input.charCodeAt(peg$currPos) === 46) {\n                  s7 = peg$c3;\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              s7 = [];\n              s8 = peg$parsePN_CHARS();\n              if (s8 !== peg$FAILED) {\n                while (s8 !== peg$FAILED) {\n                  s7.push(s8);\n                  s8 = peg$parsePN_CHARS();\n                }\n              } else {\n                s7 = peg$FAILED;\n              }\n              if (s7 !== peg$FAILED) {\n                s6 = [s6, s7];\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          }\n          if (s4 !== peg$FAILED) {\n            s2 = [s2, s3, s4];\n            s1 = s2;\n          } else {\n            peg$currPos = s1;\n            s1 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parsePN_LOCAL() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = peg$parsePN_CHARS_U();\n      if (s1 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s1 = peg$c82;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c83); }\n        }\n        if (s1 === peg$FAILED) {\n          if (peg$c89.test(input.charAt(peg$currPos))) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c90); }\n          }\n          if (s1 === peg$FAILED) {\n            s1 = peg$parsePLX();\n          }\n        }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsePN_CHARS();\n        if (s3 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 58) {\n            s3 = peg$c82;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c83); }\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$parsePLX();\n          }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsePN_CHARS();\n          if (s3 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 58) {\n              s3 = peg$c82;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c83); }\n            }\n            if (s3 === peg$FAILED) {\n              s3 = peg$parsePLX();\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$currPos;\n          s5 = [];\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s6 = peg$c3;\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n          if (s6 !== peg$FAILED) {\n            while (s6 !== peg$FAILED) {\n              s5.push(s6);\n              if (input.charCodeAt(peg$currPos) === 46) {\n                s6 = peg$c3;\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n            }\n          } else {\n            s5 = peg$FAILED;\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = [];\n            s7 = peg$parsePN_CHARS();\n            if (s7 === peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 58) {\n                s7 = peg$c82;\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c83); }\n              }\n              if (s7 === peg$FAILED) {\n                s7 = peg$parsePLX();\n              }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                s7 = peg$parsePN_CHARS();\n                if (s7 === peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 58) {\n                    s7 = peg$c82;\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c83); }\n                  }\n                  if (s7 === peg$FAILED) {\n                    s7 = peg$parsePLX();\n                  }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              peg$savedPos = s4;\n              s5 = peg$c181(s1, s2, s5, s6);\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$currPos;\n            s5 = [];\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s6 = peg$c3;\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s6 !== peg$FAILED) {\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                if (input.charCodeAt(peg$currPos) === 46) {\n                  s6 = peg$c3;\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                }\n              }\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              s7 = peg$parsePN_CHARS();\n              if (s7 === peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 58) {\n                  s7 = peg$c82;\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c83); }\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = peg$parsePLX();\n                }\n              }\n              if (s7 !== peg$FAILED) {\n                while (s7 !== peg$FAILED) {\n                  s6.push(s7);\n                  s7 = peg$parsePN_CHARS();\n                  if (s7 === peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 58) {\n                      s7 = peg$c82;\n                      peg$currPos++;\n                    } else {\n                      s7 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c83); }\n                    }\n                    if (s7 === peg$FAILED) {\n                      s7 = peg$parsePLX();\n                    }\n                  }\n                }\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c181(s1, s2, s5, s6);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c182(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsePLX() {\n      var s0;\n\n      s0 = peg$parsePERCENT();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsePN_LOCAL_ESC();\n      }\n\n      return s0;\n    }\n\n    function peg$parsePERCENT() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 37) {\n        s2 = peg$c183;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c184); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseHEX();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseHEX();\n          if (s4 !== peg$FAILED) {\n            s2 = [s2, s3, s4];\n            s1 = s2;\n          } else {\n            peg$currPos = s1;\n            s1 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parseHEX() {\n      var s0;\n\n      if (peg$c185.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c186); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsePN_LOCAL_ESC() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 92) {\n        s1 = peg$c187;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c188); }\n      }\n      if (s1 !== peg$FAILED) {\n        if (peg$c189.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c190); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n\n      var isIRI = function(a){return a.match(/^[a-z](.*?):(.+?)/g);};\n      function createObject(property,value){var a={};a[property]=value;return a;}\n      var context = {\n        base : [],\n        data : {},\n        addBase : function(uri){\n          if(context.base.length===0){\n            context.base.push(uri);\n            return;\n          }\n          const last = context.base[context.base.length-1];\n          if(last!==uri) context.base.push(new URL(uri,last).toString());\n        },\n        addPrefix : function(prefix,uri){\n          const list = context.data[prefix];\n          if(list===undefined){\n            context.data[prefix] = [{uri:uri,count:0}];\n          }else if(list[list.length-1].uri!==uri){\n            list.push({uri:uri,count:0});\n          }\n        },\n        hasPrefix : function(prefix){\n          return this.data[prefix]!==undefined;\n        },\n        resolve : function(pname,force){\n          const prefix = Object.keys(context.data).find(key=>pname.indexOf(key+\":\")===0);\n          if(prefix!==undefined) {\n            const list = context.data[prefix];\n            if(list.length===1 && force!==true && isIRI(list[0].uri)) return pname;\n            const uri = list[list.length-1].uri;\n            return pname.replace(prefix+\":\",uri);\n          }else{\n            var base = context.base.length === 0 ? options.baseIRI : context.base[context.base.length-1];\n            if(!base || pname.match(/^(http:|https:|urn:|file:)/)) return pname;\n            if(pname.indexOf(\"//\")===0 && base) return base.split(\"//\")[0]+pname;\n            return new URL(pname,base).toString();\n          }\n        },\n        increment : function(prefix){\n          const list = context.data[prefix];\n          if(list!==undefined)list[list.length-1].count++;\n        },\n        decrement : function(prefix){\n          const list = context.data[prefix];\n          if(list!==undefined)list[list.length-1].count--;\n        },\n        toJSON : function(){\n          const root = {};\n          if(context.base.length>0){\n            if(root[\"@context\"]===undefined)root[\"@context\"] = {};\n            root[\"@context\"][\"@base\"] = context.base[0];\n          }\n          Object.keys(context.data).forEach(key=>{\n            const head = context.data[key][0];\n            if(head.uri===\"http://www.w3.org/2001/XMLSchema#\" && head.count < 1) return;\n            if(!isIRI(head.uri)) return;\n            if(root[\"@context\"]===undefined) root[\"@context\"] = {};\n            root[\"@context\"][key] = head.uri;\n          });\n          return root;\n        }\n      };\n\n      function expandList(container,force){\n        if(container[\"@list\"]===undefined) return container;\n        if(!force && !container[\"@list\"].find(x=>x[\"@list\"]!==undefined)) return container;\n\n        if(container[\"@list\"].length===0)\n          return {\"@id\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\"};\n\n        var root = {};\n        var focus = null;\n        container[\"@list\"].forEach(b=>{\n          if(focus===null) focus = root;\n          else {\n            focus[\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"] = {};\n            focus = focus[\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"];\n          }\n          focus[\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"] = expandList(b,true);\n          focus[\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"] = {\n            \"@id\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\"\n          };\n        });\n        return root;\n      }\n\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail(peg$endExpectation());\n      }\n\n      throw peg$buildStructuredError(\n        peg$maxFailExpected,\n        peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n        peg$maxFailPos < input.length\n          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n      );\n    }\n  }\n\n  return {\n    SyntaxError: peg$SyntaxError,\n    parse:       peg$parse\n  };\n});\n","if(typeof __WEBPACK_EXTERNAL_MODULE__392__ === 'undefined') { var e = new Error(\"Cannot find module 'window'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__392__;","/**\n * Provides a way to access commonly used namespaces\n *\n * Usage:\n *\n *   ```\n *   const $rdf = require('rdflib'); //or any other RDF/JS-compatible library\n *   const ns = require('solid-namespace')($rdf);\n *   const store = $rdf.graph();\n *\n *   let me = ...;\n *   let name = store.any(me, ns.vcard(fn)) || store.any(me, ns.foaf(name));\n *   ```\n * @module vocab\n */\nconst aliases = {\n  acl: 'http://www.w3.org/ns/auth/acl#',\n  arg: 'http://www.w3.org/ns/pim/arg#',\n  as: 'https://www.w3.org/ns/activitystreams#',\n  bookmark: 'http://www.w3.org/2002/01/bookmark#',\n  cal: 'http://www.w3.org/2002/12/cal/ical#',\n  cco: 'http://www.ontologyrepository.com/CommonCoreOntologies/',\n  cert: 'http://www.w3.org/ns/auth/cert#',\n  contact: 'http://www.w3.org/2000/10/swap/pim/contact#',\n  dc: 'http://purl.org/dc/elements/1.1/',\n  dct: 'http://purl.org/dc/terms/',\n  doap: 'http://usefulinc.com/ns/doap#',\n  foaf: 'http://xmlns.com/foaf/0.1/',\n  geo: 'http://www.w3.org/2003/01/geo/wgs84_pos#',\n  gpx: 'http://www.w3.org/ns/pim/gpx#',\n  gr: 'http://purl.org/goodrelations/v1#',\n  http: 'http://www.w3.org/2007/ont/http#',\n  httph: 'http://www.w3.org/2007/ont/httph#',\n  icalTZ: 'http://www.w3.org/2002/12/cal/icaltzd#', // Beware: not cal:\n  ldp: 'http://www.w3.org/ns/ldp#',\n  link: 'http://www.w3.org/2007/ont/link#',\n  log: 'http://www.w3.org/2000/10/swap/log#',\n  meeting: 'http://www.w3.org/ns/pim/meeting#',\n  mo: 'http://purl.org/ontology/mo/',\n  org: 'http://www.w3.org/ns/org#',\n  owl: 'http://www.w3.org/2002/07/owl#',\n  pad: 'http://www.w3.org/ns/pim/pad#',\n  patch: 'http://www.w3.org/ns/pim/patch#',\n  prov: 'http://www.w3.org/ns/prov#',\n  pto: 'http://www.productontology.org/id/',\n  qu: 'http://www.w3.org/2000/10/swap/pim/qif#',\n  trip: 'http://www.w3.org/ns/pim/trip#',\n  rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n  rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n  rss: 'http://purl.org/rss/1.0/',\n  sched: 'http://www.w3.org/ns/pim/schedule#',\n  schema: 'http://schema.org/', // @@ beware confusion with documents no 303\n  sioc: 'http://rdfs.org/sioc/ns#',\n  skos: 'http://www.w3.org/2004/02/skos/core#',\n  solid: 'http://www.w3.org/ns/solid/terms#',\n  space: 'http://www.w3.org/ns/pim/space#',\n  stat: 'http://www.w3.org/ns/posix/stat#',\n  tab: 'http://www.w3.org/2007/ont/link#',\n  tabont: 'http://www.w3.org/2007/ont/link#',\n  ui: 'http://www.w3.org/ns/ui#',\n  vann: 'http://purl.org/vocab/vann/',\n  vcard: 'http://www.w3.org/2006/vcard/ns#',\n  wf: 'http://www.w3.org/2005/01/wf/flow#',\n  xsd: 'http://www.w3.org/2001/XMLSchema#',\n}\n\n/**\n * @param [rdflib] {RDF} Optional RDF Library (such as rdflib.js or rdf-ext) to inject\n */\nfunction vocab (rdf = { namedNode: u => u }) {\n  const namespaces = {}\n  for (const alias in aliases) {\n    const expansion = aliases[alias]\n    namespaces[alias] = function (localName = '') {\n      return rdf.namedNode(expansion + localName)\n    }\n  };\n\n  return namespaces\n};\n\nmodule.exports = vocab\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".rdflib.min.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk$rdf\"] = self[\"webpackChunk$rdf\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","/**\n* Class orders\n*/\nconst ClassOrder: {\n  [id: string]: number;\n} = {\n  'Literal': 1,\n  'Collection': 3,\n  'Graph': 4,\n  'NamedNode': 5,\n  'BlankNode': 6,\n  'Variable': 7\n}\n\nexport default ClassOrder\n","import { ValueType, Bindings, FromValueReturns, TermType } from './types'\nimport { Term } from './tf-types'\n\n/**\n * The superclass of all RDF Statement objects, that is\n * NamedNode, Literal, BlankNode, etc.\n * Should not be instantiated directly.\n * Also called Term.\n * @link https://rdf.js.org/data-model-spec/#term-interface\n * @class Node\n */\nexport default abstract class Node {\n  // Specified in './node.ts' to prevent circular dependency\n  static fromValue: <T extends FromValueReturns>(value: ValueType) => T\n  // Specified in './node.ts' to prevent circular dependency\n  static toJS: (term: any) => Date | Number | string | boolean | object | Array<Date | Number | string | boolean | object>;\n\n  /** The type of node */\n  termType!: TermType;\n\n  /** The class order for this node */\n  classOrder!: number;\n\n  /** The node's value */\n  value: string;\n\n  protected constructor(value: string) {\n    this.value = value\n  }\n\n  /**\n   * Creates the substituted node for this one, according to the specified bindings\n   * @param bindings - Bindings of identifiers to nodes\n   */\n  substitute <T extends Node = Node>(bindings: Bindings): T {\n    return this as unknown as T\n  }\n\n  /**\n   * Compares this node with another\n   * @see {equals} to check if two nodes are equal\n   * @param other - The other node\n   */\n  compareTerm (other: Node): number {\n    if (this.classOrder < other.classOrder) {\n      return -1\n    }\n    if (this.classOrder > other.classOrder) {\n      return +1\n    }\n    if (this.value < other.value) {\n      return -1\n    }\n    if (this.value > other.value) {\n      return +1\n    }\n    return 0\n  }\n\n  /**\n   * Compares whether the two nodes are equal\n   * @param other The other node\n   */\n  equals (other: Term | null | undefined): boolean {\n    if (!other) {\n      return false\n    }\n    return (this.termType === other.termType) &&\n      (this.value === other.value)\n  }\n\n  /**\n   * Creates a hash for this node\n   * @deprecated use {rdfFactory.id} instead if possible\n   */\n  hashString (): string {\n    return this.toCanonical()\n  }\n\n  /**\n   * Compares whether this node is the same as the other one\n   * @param other - Another node\n   */\n  sameTerm(other: Node): boolean {\n    return this.equals(other)\n\n  }\n\n  /**\n   * Creates a canonical string representation of this node\n   */\n  toCanonical (): string {\n    return this.toNT()\n  }\n\n  /**\n   * Creates a n-triples string representation of this node\n   */\n  toNT (): string {\n    return this.toString()\n  }\n\n  /**\n   * Creates a n-quads string representation of this node\n   */\n  toNQ (): string {\n    return this.toNT();\n  }\n\n  /**\n   * Creates a string representation of this node\n   */\n  toString (): string {\n    throw new Error('Node.toString() is abstract - see the subclasses instead')\n  }\n}\n","import Node from './node-internal'\nimport RDFlibVariable from './variable'\nimport RDFlibBlankNode from './blank-node'\nimport Collection from './collection'\nimport RDFlibLiteral from './literal'\nimport RDFlibNamedNode from './named-node'\nimport RDFlibDefaultGraph from './default-graph'\nimport { DataFactory } from './factories/factory-types'\nimport IndexedFormula from './store'\nimport Fetcher from './fetcher'\nimport Statement from './statement'\nimport Empty from './empty'\nimport { NamedNode, Term, Quad_Subject, Quad_Predicate, Quad_Object, Quad_Graph } from './tf-types'\n\nexport const NamedNodeTermType = \"NamedNode\" as const\nexport const BlankNodeTermType = \"BlankNode\" as const\nexport const LiteralTermType = \"Literal\" as const\nexport const VariableTermType = \"Variable\" as const\nexport const DefaultGraphTermType = \"DefaultGraph\" as const\n// Non-RDF/JS types:\nexport const CollectionTermType = \"Collection\" as const\nexport const EmptyTermType = \"Empty\" as const\nexport const GraphTermType = \"Graph\" as const\n\nexport type TermType = typeof NamedNodeTermType\n  | typeof BlankNodeTermType\n  | typeof LiteralTermType\n  | typeof VariableTermType\n  | typeof DefaultGraphTermType\n  | typeof CollectionTermType\n  | typeof EmptyTermType\n  | typeof GraphTermType\n\nexport const HTMLContentType = \"text/html\" as const\nexport const JSONLDContentType = \"application/ld+json\" as const\nexport const N3ContentType = \"text/n3\" as const\nexport const N3LegacyContentType = \"application/n3\" as const\nexport const NQuadsAltContentType = \"application/nquads\" as const\nexport const NQuadsContentType = \"application/n-quads\" as const\nexport const NTriplesContentType = \"application/n-triples\" as const\nexport const RDFXMLContentType = \"application/rdf+xml\" as const\nexport const SPARQLUpdateContentType = \"application/sparql-update\" as const\nexport const SPARQLUpdateSingleMatchContentType = \"application/sparql-update-single-match\" as const\nexport const TurtleContentType = \"text/turtle\" as const\nexport const TurtleLegacyContentType = \"application/x-turtle\" as const\nexport const XHTMLContentType = \"application/xhtml+xml\" as const\n\n/**\n * A valid mime type header\n */\nexport type ContentType = typeof RDFXMLContentType\n  | typeof HTMLContentType\n  | typeof JSONLDContentType\n  | typeof N3ContentType\n  | typeof N3LegacyContentType\n  | typeof NQuadsAltContentType\n  | typeof NQuadsContentType\n  | typeof SPARQLUpdateContentType\n  | typeof SPARQLUpdateSingleMatchContentType\n  | typeof TurtleContentType\n  | typeof TurtleLegacyContentType\n  | typeof XHTMLContentType\n\n/** A type for values that serves as inputs */\nexport type ValueType = Term | Node | Date | string | number | boolean | undefined | null | Collection\n\n/**\n * In this project, there exist two types for the same kind of RDF concept.\n * We have RDF/JS spec types (standardized, generic), and RDFlib types (internal, specific).\n * When deciding which type to use in a function, it is preferable to accept generic inputs,\n * whenever possible, and provide strict outputs.\n * In some ways, the TF types in here are a bit more strict.\n * Variables are missing, and the statement requires specific types of terms (e.g. NamedNode instead of Term).\n */\n\n/** An RDF/JS Subject */\nexport type SubjectType = RDFlibBlankNode | RDFlibNamedNode | RDFlibVariable\n/** An RDF/JS Predicate */\nexport type PredicateType = RDFlibNamedNode | RDFlibVariable\n/** An RDF/JS Object */\nexport type ObjectType = RDFlibNamedNode | RDFlibLiteral | Collection | RDFlibBlankNode | RDFlibVariable | Empty\n/** An RDF/JS Graph */\nexport type GraphType = RDFlibDefaultGraph | RDFlibNamedNode | RDFlibVariable // | Formula\n\nexport interface Bindings {\n  [id: string]: Term;\n}\n\n/** All the types that a .fromValue() method might return */\nexport type FromValueReturns<C extends Node = any> = Term | undefined | null | Collection<C>\n\nexport interface IRDFlibDataFactory extends DataFactory<\n  RDFlibNamedNode | RDFlibBlankNode | RDFlibLiteral | Collection | Statement\n> {\n  fetcher: (store: IndexedFormula, options: any) => Fetcher\n  lit: (val: string, lang?: string, dt?: NamedNode) => RDFlibLiteral\n  graph: (features?, opts?) => IndexedFormula\n  st: (\n    subject: Quad_Subject,\n    predicate: Quad_Predicate,\n    object: Quad_Object,\n    graph?: Quad_Graph\n  ) => Statement\n}\n","import ClassOrder from './class-order'\nimport Node from './node-internal'\nimport IndexedFormula from './store'\nimport { BlankNodeTermType } from './types'\nimport { BlankNode as TFBlankNode } from './tf-types'\n\n/**\n * An RDF blank node is a Node without a URI\n * @link https://rdf.js.org/data-model-spec/#blanknode-interface\n */\nexport default class BlankNode extends Node implements TFBlankNode {\n  termType: typeof BlankNodeTermType = BlankNodeTermType;\n  /**\n   * The next unique identifier for blank nodes\n   */\n  static nextId: number = 0;\n  static NTAnonymousNodePrefix: '_:' = '_:'\n\n  private static getId (id: string | unknown): string {\n    if (id) {\n      if (typeof id !== 'string') {\n        throw new Error('Bad id argument to new blank node: ' + id)\n      }\n\n      if (id.includes('#')) {\n        // Is a URI with hash fragment\n        let fragments = id.split('#')\n        return fragments[fragments.length - 1]\n      }\n\n      return id\n    }\n\n    return 'n' + BlankNode.nextId++\n  }\n\n  classOrder = ClassOrder.BlankNode\n  /** Whether this is a blank node */\n  isBlank: number = 1\n  /**\n   * This type of node is a variable.\n   *\n   * Note that the existence of this property already indicates that it is a variable.\n   */\n  isVar = 1\n\n  /**\n   * Initializes this node\n   * @param [id] The identifier for the blank node\n   */\n  constructor (id?: string | unknown) {\n    super(BlankNode.getId(id))\n  }\n\n  /**\n   * The identifier for the blank node\n   */\n  public get id (): string {\n    return this.value\n  }\n\n  public set id (value: string) {\n    this.value = value\n  }\n\n  compareTerm (other: BlankNode): number {\n    if (this.classOrder < other.classOrder) {\n      return -1\n    }\n    if (this.classOrder > other.classOrder) {\n      return +1\n    }\n    if (this.id < other.id) {\n      return -1\n    }\n    if (this.id > other.id) {\n      return +1\n    }\n    return 0\n  }\n\n  /**\n   * Gets a copy of this blank node in the specified formula\n   * @param formula The formula\n   */\n  copy (formula: IndexedFormula): BlankNode { // depends on the formula\n    var bnodeNew = new BlankNode()\n    formula.copyTo(this, bnodeNew)\n    return bnodeNew\n  }\n\n  toCanonical () {\n    return BlankNode.NTAnonymousNodePrefix + this.value\n  }\n\n  toString () {\n    return BlankNode.NTAnonymousNodePrefix + this.id\n  }\n}\n","import { Term } from '../tf-types'\n\n/** Retrieve the value of a term, or self if already a string. */\nexport function termValue (node: Term | string): string {\n  if (typeof node === 'string') {\n    return node\n  }\n\n  return node.value\n}\n","import {\n  ObjectType, CollectionTermType, NamedNodeTermType, VariableTermType, BlankNodeTermType, LiteralTermType, GraphTermType, DefaultGraphTermType,\n} from '../types'\nimport Collection from '../collection'\nimport IndexedFormula from '../store'\nimport Statement from '../statement'\nimport {\n  BlankNode,\n  Quad_Graph,\n  Literal,\n  NamedNode,\n  Quad_Object,\n  Quad_Predicate,\n  Quad,\n  Quad_Subject,\n  Term,\n  Variable,\n} from '../tf-types'\n\n/** TypeGuard for RDFLib Statements */\nexport function isStatement(obj): obj is Statement {\n  return typeof obj === 'object' && obj !== null && 'subject' in obj\n}\n\n/** TypeGuard for RDFlib Stores */\nexport function isStore(obj): obj is IndexedFormula {\n  return typeof obj === 'object' && obj !== null && 'statements' in obj\n}\n\n/** TypeGuard for RDFLib Collections */\nexport function isCollection(obj: any): obj is Collection<any> {\n  return isTerm(obj)\n    && (obj as Term).termType === CollectionTermType\n}\n\n/** TypeGuard for valid RDFlib Object types, also allows Collections, Graphs */\nexport function isRDFlibObject(obj: any): obj is ObjectType {\n  return obj && Object.prototype.hasOwnProperty.call(obj, 'termType') && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === VariableTermType ||\n    obj.termType === BlankNodeTermType ||\n    obj.termType === CollectionTermType ||\n    obj.termType === LiteralTermType ||\n    obj.termType === GraphTermType\n  )\n}\n\n/** TypeGuard for valid RDFlib Subject types, same as Object as RDFLib symmetrical.\n*/\nexport function isRDFlibSubject(obj: any): obj is ObjectType {\n  return obj && Object.prototype.hasOwnProperty.call(obj, 'termType') && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === VariableTermType ||\n    obj.termType === BlankNodeTermType ||\n    obj.termType === CollectionTermType ||\n    obj.termType === LiteralTermType ||\n    obj.termType === GraphTermType\n  )\n}\n\n/** TypeGuard for valid RDF/JS spec Predicate types */\nexport function isRDFlibPredicate(obj: any): obj is Quad_Predicate {\n  return isTerm(obj) && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === BlankNodeTermType ||\n    obj.termType === VariableTermType\n  )\n}\n\n/** TypeGuard for RDFLib Variables */\nexport function isVariable(obj: any): obj is Variable {\n  return isTerm(obj)\n    && (obj as Term).termType === VariableTermType\n}\n\n/** TypeGuard for RDF/JS spec Terms */\nexport function isTerm(obj: any): obj is Term {\n  return typeof obj === 'object'\n    && obj !== null\n    && 'termType' in obj\n}\n\n/** TypeGuard for RDF/JS spec Literals */\nexport function isLiteral(value: any): value is Literal {\n  return (value as Term).termType === LiteralTermType\n}\n\n/** TypeGuard for RDF/JS spec Quads */\nexport function isQuad(obj: any): obj is Quad<any, any, any, any> {\n  return typeof obj === \"object\" && obj !== null && (\n    'subject' in obj\n    && 'predicate' in obj\n    && 'object' in obj\n  )\n}\n\n/** TypeGuard for RDF/JS spec NamedNodes */\nexport function isNamedNode(obj: any): obj is NamedNode {\n  return isTerm(obj) && obj.termType === 'NamedNode'\n}\n\n/** TypeGuard for RDF/JS spec BlankNodes */\nexport function isBlankNode(obj: any): obj is BlankNode {\n  return isTerm(obj) && 'termType' in obj && obj.termType === 'BlankNode'\n}\n\n/** TypeGuard for valid RDF/JS spec Subject types */\nexport function isSubject(obj: any): obj is Quad_Subject {\n  return isTerm(obj) && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === VariableTermType ||\n    obj.termType === BlankNodeTermType\n  )\n}\n\n/** TypeGuard for valid RDF/JS spec Predicate types */\nexport function isPredicate(obj: any): obj is Quad_Predicate {\n  return isTerm(obj) && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === VariableTermType\n  )\n}\n\n/** TypeGuard for valid RDF/JS spec Object types */\nexport function isRDFObject(obj: any): obj is Quad_Object {\n  return isTerm(obj) && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === VariableTermType ||\n    obj.termType === BlankNodeTermType ||\n    obj.termType === LiteralTermType\n  )\n}\n\n/** TypeGuard for valid RDF/JS Graph types */\nexport function isGraph(obj: any): obj is Quad_Graph {\n  return isTerm(obj) && (\n    obj.termType === NamedNodeTermType ||\n    obj.termType === VariableTermType ||\n    obj.termType === BlankNodeTermType ||\n    obj.termType === DefaultGraphTermType\n  )\n}\n","import ClassOrder from './class-order'\nimport Node from './node-internal'\nimport { NamedNodeTermType } from './types'\nimport { termValue } from './utils/termValue'\nimport { NamedNode as TFNamedNode } from './tf-types'\nimport { isTerm } from './utils/terms'\n\n/**\n * A named (IRI) RDF node\n */\nexport default class NamedNode extends Node implements TFNamedNode {\n  termType: typeof NamedNodeTermType = NamedNodeTermType\n  classOrder = ClassOrder.NamedNode\n\n  /**\n   * Create a named (IRI) RDF Node\n   * @constructor\n   * @param iri - The IRI for this node\n   */\n  constructor (iri: string) {\n    super(termValue(iri))\n\n    if (!this.value) {\n      throw new Error('Missing IRI for NamedNode')\n    }\n\n    if (!this.value.includes(':')) {\n      throw new Error('NamedNode IRI \"' + iri + '\" must be absolute.')\n    }\n\n    if (this.value.includes(' ')) {\n      var message = 'Error: NamedNode IRI \"' + iri + '\" must not contain unencoded spaces.'\n      throw new Error(message)\n    }\n  }\n\n  /**\n   * Returns an $rdf node for the containing directory, ending in slash.\n   */\n  dir (): NamedNode | null {\n     var str = this.value.split('#')[0]\n     var p = str.slice(0, -1).lastIndexOf('/')\n     var q = str.indexOf('//')\n     if ((q >= 0 && p < q + 2) || p < 0) return null\n     return new NamedNode(str.slice(0, p + 1))\n   }\n\n  /**\n   * Returns an NN for the whole web site, ending in slash.\n   * Contrast with the \"origin\" which does NOT have a trailing slash\n   */\n  site (): NamedNode {\n     var str = this.value.split('#')[0]\n     var p = str.indexOf('//')\n     if (p < 0) throw new Error('This URI does not have a web site part (origin)')\n     var q = str.indexOf('/', p+2)\n     if (q < 0) {\n       return new NamedNode(str.slice(0) + '/')   // Add slash to a bare origin\n     } else {\n       return new NamedNode(str.slice(0, q + 1))\n     }\n   }\n\n  /**\n   * Creates the fetchable named node for the document.\n   * Removes everything from the # anchor tag.\n   */\n  doc (): NamedNode {\n    if (this.value.indexOf('#') < 0) {\n      return this\n    } else {\n      return new NamedNode(this.value.split('#')[0])\n    }\n  }\n\n  /**\n   * Returns the URI including <brackets>\n   */\n  toString (): string {\n    return '<' + this.value + '>'\n  }\n\n  /** The local identifier with the document */\n  id (): string {\n    return this.value.split('#')[1]\n  }\n\n  /** Alias for value, favored by Tim */\n  get uri (): string {\n    return this.value\n  }\n\n  set uri (uri: string) {\n    this.value = uri\n  }\n\n  /**\n   * Creates a named node from the specified input value\n   * @param value - An input value\n   */\n  static fromValue (value) {\n    if (typeof value === 'undefined' || value === null) {\n      return value\n    }\n    if (isTerm(value)) {\n      return value\n    }\n    return new NamedNode(value)\n  }\n}\n","import NamedNode from './named-node'\n\nexport default {\n  boolean: new NamedNode('http://www.w3.org/2001/XMLSchema#boolean'),\n  dateTime: new NamedNode('http://www.w3.org/2001/XMLSchema#dateTime'),\n  decimal: new NamedNode('http://www.w3.org/2001/XMLSchema#decimal'),\n  double: new NamedNode('http://www.w3.org/2001/XMLSchema#double'),\n  integer: new NamedNode('http://www.w3.org/2001/XMLSchema#integer'),\n  langString: new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString'),\n  string: new NamedNode('http://www.w3.org/2001/XMLSchema#string'),\n}\n","import ClassOrder from './class-order'\nimport RDFlibNamedNode from './named-node'\nimport Node from './node-internal'\nimport {\n  FromValueReturns,\n  LiteralTermType,\n  ValueType\n} from './types'\nimport { isLiteral } from './utils/terms'\nimport XSD from './xsd-internal'\nimport { Literal as TFLiteral, Term } from './tf-types'\n\n/**\n * An RDF literal, containing some value which isn't expressed as an IRI.\n * @link https://rdf.js.org/data-model-spec/#literal-interface\n */\nexport default class Literal extends Node implements TFLiteral {\n  termType: typeof LiteralTermType = LiteralTermType\n\n  classOrder = ClassOrder.Literal\n\n  /**\n   * The literal's datatype as a named node\n   */\n  datatype: RDFlibNamedNode = XSD.string\n\n  isVar = 0\n\n  /**\n   * The language for the literal\n   */\n  language: string = ''\n\n  /**\n   * Initializes a literal\n   * @param value - The literal's lexical value\n   * @param language - The language for the literal. Defaults to ''.\n   * @param datatype - The literal's datatype as a named node. Defaults to xsd:string.\n   */\n  constructor (value: string, language?: string | null, datatype?) {\n    super(value)\n\n    if (language) {\n      this.language = language\n      this.datatype = XSD.langString\n    } else if (datatype) {\n      this.datatype = RDFlibNamedNode.fromValue(datatype)\n    } else {\n      this.datatype = XSD.string\n    }\n  }\n\n  /**\n   * Gets a copy of this literal\n   */\n  copy (): Literal {\n    return new Literal(this.value, this.lang, this.datatype)\n  }\n\n  /**\n   * Gets whether two literals are the same\n   * @param other The other statement\n   */\n  equals (other: Term | null | undefined): boolean {\n    if (!other) {\n      return false\n    }\n\n    return (this.termType === other.termType) &&\n      (this.value === other.value) &&\n      (this.language === (other as Literal).language) &&\n      ((!this.datatype && !(other as Literal).datatype) ||\n        (this.datatype && this.datatype.equals((other as Literal).datatype)))\n  }\n\n  /**\n   * The language for the literal\n   * @deprecated use {language} instead\n   */\n  get lang (): string {\n    return this.language\n  }\n\n  set lang (language: string) {\n    this.language = language || ''\n  }\n\n  toNT(): string {\n    return Literal.toNT(this)\n  }\n\n  /** Serializes a literal to an N-Triples string */\n  static toNT (literal: Literal): string {\n    if (typeof literal.value === 'number') {\n      return '' + literal.value\n    } else if (typeof literal.value !== 'string') {\n      throw new Error('Value of RDF literal is not string or number: ' +\n        literal.value)\n    }\n    var str = literal.value\n    // #x22 (\"), #x5C (\\), #x0A (\\n) and #xD (\\r) are disallowed and need to be replaced\n    // see https://www.w3.org/TR/n-triples/#grammar-production-STRING_LITERAL_QUOTE\n    str = str.replace(/\\\\/g, '\\\\\\\\')\n    str = str.replace(/\\\"/g, '\\\\\"')\n    str = str.replace(/\\n/g, '\\\\n')\n    str = str.replace(/\\r/g, '\\\\r')\n    str = '\"' + str + '\"'\n\n    if (literal.language) {\n      str += '@' + literal.language\n    } else if (!literal.datatype.equals(XSD.string)) {\n      // Only add datatype if it's not a string\n      str += '^^' + literal.datatype.toCanonical()\n    }\n    return str\n  }\n\n  toString () {\n    return '' + this.value\n  }\n\n  /**\n   * Builds a literal node from a boolean value\n   * @param value - The value\n   */\n  static fromBoolean (value: boolean): Literal {\n    let strValue = value ? '1' : '0'\n    return new Literal(strValue, null, XSD.boolean)\n  }\n\n  /**\n   * Builds a literal node from a date value\n   * @param value The value\n   */\n  static fromDate(value: Date): Literal {\n    if (!(value instanceof Date)) {\n      throw new TypeError('Invalid argument to Literal.fromDate()')\n    }\n    let d2 = function (x) {\n      return ('' + (100 + x)).slice(1, 3)\n    }\n    let date = '' + value.getUTCFullYear() + '-' + d2(value.getUTCMonth() + 1) +\n      '-' + d2(value.getUTCDate()) + 'T' + d2(value.getUTCHours()) + ':' +\n      d2(value.getUTCMinutes()) + ':' + d2(value.getUTCSeconds()) + 'Z'\n    return new Literal(date, null, XSD.dateTime)\n  }\n\n  /**\n   * Builds a literal node from a number value\n   * @param value - The value\n   */\n  static fromNumber(value: number): Literal {\n    if (typeof value !== 'number') {\n      throw new TypeError('Invalid argument to Literal.fromNumber()')\n    }\n    let datatype: RDFlibNamedNode\n    const strValue = value.toString()\n    if (strValue.indexOf('e') < 0 && Math.abs(value) <= Number.MAX_SAFE_INTEGER) {\n      datatype = Number.isInteger(value) ? XSD.integer : XSD.decimal\n    } else {\n      datatype = XSD.double\n    }\n    return new Literal(strValue, null, datatype)\n  }\n\n  /**\n   * Builds a literal node from an input value\n   * @param value - The input value\n   */\n  static fromValue<T extends FromValueReturns>(value: ValueType): T {\n    if (isLiteral(value)) {\n      return value as unknown as T\n    }\n    switch (typeof value) {\n      case 'object':\n        if (value instanceof Date) {\n          return Literal.fromDate(value) as unknown as T\n        }\n      case 'boolean':\n        return Literal.fromBoolean(value as boolean) as unknown as T\n      case 'number':\n        return Literal.fromNumber(value as number) as unknown as T\n      case 'string':\n        return new Literal(value) as unknown as T\n    }\n\n    throw new Error(\"Can't make literal from \" + value + ' of type ' +\n      typeof value)\n  }\n}\n","import RdflibBlankNode from './blank-node'\nimport ClassOrder from './class-order'\nimport Literal from './literal'\nimport Node from './node-internal'\nimport {\n  Bindings,\n  CollectionTermType,\n  FromValueReturns,\n  ValueType\n} from './types'\nimport Variable from './variable'\nimport { isTerm } from './utils/terms'\nimport { Term } from './tf-types'\n\n/**\n * Creates an RDF Node from a native javascript value.\n * RDF Nodes are returned unchanged, undefined returned as itself.\n * Arrays return Collections.\n * Strings, numbers and booleans return Literals.\n * @param value {Node|Date|String|Number|Boolean|Undefined}\n * @return {Node|Collection}\n */\nexport function fromValue <T extends FromValueReturns<C> = any, C extends Node = any>(value: ValueType): T {\n  if (typeof value === 'undefined' || value === null) {\n    return value as T\n  }\n\n  if (isTerm(value)) {  // a Node subclass or a Collection\n    return value as T\n  }\n\n  if (Array.isArray(value)) {\n    return new Collection<C>(value) as T\n  }\n\n  return Literal.fromValue<any>(value)\n}\n\n/**\n * A collection of other RDF nodes\n *\n * Use generic T to control the contents of the array.\n */\nexport default class Collection<\n  T extends Node = Node | RdflibBlankNode | Collection<any> | Literal | Variable\n> extends Node implements Term {\n  static termType: typeof CollectionTermType = CollectionTermType\n  termType: typeof CollectionTermType = CollectionTermType\n\n  classOrder = ClassOrder.Collection\n  closed: boolean = false\n  compareTerm = RdflibBlankNode.prototype.compareTerm\n  /**\n   * The nodes in this collection\n   */\n  elements: T[] = []\n  isVar = 0\n\n  constructor (initial?: ReadonlyArray<ValueType>) {\n    super((RdflibBlankNode.nextId++).toString())\n\n    if (initial && initial.length > 0) {\n      initial.forEach(element => {\n        this.elements.push(fromValue<T>(element))\n      })\n    }\n  }\n\n  public get id (): string {\n    return this.value\n  }\n\n  public set id (value) {\n    this.value = value\n  }\n\n  /**\n   * Appends an element to this collection\n   * @param element - The new element\n   */\n  append (element: T): number {\n    return this.elements.push(element)\n  }\n\n  /**\n   * Closes this collection\n   */\n  close (): boolean {\n    this.closed = true\n    return this.closed\n  }\n\n  /**\n   * Removes the first element from the collection (and return it)\n   */\n  shift (): T | undefined {\n    return this.elements.shift()\n  }\n\n  /**\n   * Creates a new Collection with the substituting bindings applied\n   * @param bindings - The bindings to substitute\n   */\n  substitute (bindings: Bindings) {\n    const elementsCopy = this.elements.map((ea) => ea.substitute(bindings))\n\n    return new Collection(elementsCopy) as Collection<Node | Collection<any> | Literal | Variable>\n  }\n\n  toNT () {\n    return Collection.toNT(this)\n  }\n\n  static toNT (collection) {\n    // return '(' + collection.elements.map(x => x.toNT()).join(' ') + ')'\n    // As lists are not in NT and toNT() must be a reversible function, we kludge it for a list\n    return RdflibBlankNode.NTAnonymousNodePrefix + collection.id\n  }\n\n  /**\n   * Serializes the collection to a string.\n   * Surrounded by (parentheses) and separated by spaces.\n   */\n  toString () {\n    return '(' + this.elements.join(' ') + ')'\n  }\n\n  /**\n   * Prepends the specified element to the collection's front\n   * @param element - The element to prepend\n   */\n  unshift (element: T): number {\n    return this.elements.unshift(element)\n  }\n}\n","import Node from './node-internal'\nimport { EmptyTermType } from './types'\nimport { Term } from './tf-types'\n\n/**\n* An empty node\n*/\nexport default class Empty extends Node implements Term {\n  termType: typeof EmptyTermType = EmptyTermType\n\n  constructor () {\n    super('')\n  }\n\n  toString () {\n    return '()'\n  }\n}\n","// Prevents circular dependencies between data-factory-internal and statement\n\nimport NamedNode from '../named-node'\n\nexport const defaultGraphURI = 'chrome:theSession'\nexport const defaultGraphNode = new NamedNode(defaultGraphURI)\n","import Node from './node-internal'\nimport { DefaultGraphTermType } from './types'\nimport { DefaultGraph as TFDefaultGraph } from './tf-types'\nimport { defaultGraphURI } from './utils/default-graph-uri'\n\n/** The RDF default graph */\nexport default class DefaultGraph extends Node implements TFDefaultGraph {\n  value: '' = '';\n  termType: typeof DefaultGraphTermType = DefaultGraphTermType;\n  uri = defaultGraphURI\n\n  constructor () {\n    super('')\n  }\n\n  toCanonical () {\n    return this.value\n  }\n\n  toString () {\n    return 'DefaultGraph';\n  }\n}\n\nexport function isDefaultGraph(object: any): object is DefaultGraph {\n  return !!object && object.termType === DefaultGraphTermType;\n}\n","import Node from './node-internal'\nimport {\n  Bindings,\n  GraphType,\n  ObjectType,\n  PredicateType,\n  SubjectType,\n  DefaultGraphTermType,\n} from './types'\nimport DefaultGraphNode, { isDefaultGraph } from './default-graph'\nimport { Quad, DefaultGraph } from './tf-types'\n\nconst defaultGraph = new DefaultGraphNode()\n\n/** A Statement represents an RDF Triple or Quad. */\nexport default class Statement<\n    S extends SubjectType = SubjectType,\n    P extends PredicateType = PredicateType,\n    O extends ObjectType = ObjectType,\n    G extends GraphType = GraphType\n  >\n  implements Quad<S, P, O, G | DefaultGraph> {\n\n  /** The subject of the triple.  What the Statement is about. */\n  subject: S\n\n  /** The relationship which is asserted between the subject and object */\n  predicate: P\n\n  /** The thing or data value which is asserted to be related to the subject */\n  object: O\n\n  /**\n   * The graph param is a named node of the document in which the triple when\n   *  it is stored on the web.\n   */\n  graph: G | DefaultGraph\n\n  /**\n   * Construct a new statement\n   *\n   * @param subject - The subject of the triple.  What the fact is about\n   * @param predicate - The relationship which is asserted between the subject and object\n   * @param object - The thing or data value which is asserted to be related to the subject\n   * @param {NamedNode} graph - The document where the triple is or was or will be stored on the web.\n   *\n   * The graph param is a named node of the document in which the triple when it is stored\n   *  on the web. It exists because when you have read data from various places in the web,\n   *  the graph tells you _why_ you have the triple. (At the moment, it is just the\n   *  document, in future it could be an inference step)\n   *\n   * When you do UpdateManager.update() then the graphs of all the statements must be the same,\n   *  and give the document you are patching. In future, we may have a more\n   *  powerful update() which can update more than one document.\n   */\n  constructor (\n    subject: S,\n    predicate: P,\n    object: O,\n    graph?: G | DefaultGraph,\n  ) {\n    this.subject = Node.fromValue(subject)\n    this.predicate = Node.fromValue(predicate)\n    this.object = Node.fromValue(object)\n    this.graph = graph == undefined ? defaultGraph : Node.fromValue(graph) // property currently used by rdflib\n  }\n\n  /** Alias for graph, favored by Tim */\n  get why () {\n    return this.graph\n  }\n\n  set why (g) {\n    this.graph = g\n  }\n\n  /**\n   * Checks whether two statements are the same\n   * @param other - The other statement\n   */\n  equals (other: Quad): boolean {\n    return (\n      other.subject.equals(this.subject) &&\n      other.predicate.equals(this.predicate) &&\n      other.object.equals(this.object) &&\n      other.graph.equals(this.graph)\n    )\n  }\n\n  /**\n   * Creates a statement with the bindings substituted\n   * @param bindings The bindings\n   */\n  substitute (bindings: Bindings): Statement {\n    const y = new Statement(\n      this.subject.substitute(bindings),\n      this.predicate.substitute(bindings),\n      this.object.substitute(bindings),\n      isDefaultGraph(this.graph) ? this.graph :\n        (this.graph as G).substitute(bindings)\n    ) // 2016\n    // console.log('@@@ statement substitute:' + y)\n    return y\n  }\n\n  /** Creates a canonical string representation of this statement. */\n  toCanonical (): string {\n    let terms = [\n      this.subject.toCanonical(),\n      this.predicate.toCanonical(),\n      this.object.toCanonical()\n    ]\n    if (this.graph && this.graph.termType !== DefaultGraphTermType) {\n        terms.push(this.graph.toCanonical())\n    }\n    return terms.join(' ') + ' .'\n  }\n\n  /** Creates a n-triples string representation of this statement */\n  toNT (): string {\n    return [\n      this.subject.toNT(),\n      this.predicate.toNT(),\n      this.object.toNT(),\n    ].join(' ') + ' .'\n  }\n\n  /** Creates a n-quads string representation of this statement */\n  toNQ (): string {\n    return [\n      this.subject.toNT(),\n      this.predicate.toNT(),\n      this.object.toNT(),\n      isDefaultGraph(this.graph) ? '' : (this.graph as G).toNT()\n    ].join(' ') + ' .'\n  }\n\n  /** Creates a string representation of this statement */\n  toString (): string {\n    /*\n    return [\n      this.subject.toString(),\n      this.predicate.toString(),\n      this.object.toString(),\n    ].join(' ') + ' .'\n    */\n    return this.toNT()\n  }\n}\n","/*\n * Implements URI-specific functions\n *\n * See RFC 2386\n *\n * See also:\n *   http://www.w3.org/2005/10/ajaw/uri.js\n *   http://www.w3.org/2000/10/swap/uripath.py\n *\n */\nvar alert = alert || console.log\n\nimport RDFlibNamedNode from './named-node'\n\n/**\n * Gets the document part of an URI\n * @param uri The URI\n */\nexport function docpart(uri: string): string {\n  var i: number\n  i = uri.indexOf('#')\n  if (i < 0) {\n    return uri\n  } else {\n    return uri.slice(0, i)\n  }\n}\n\n/**\n * Gets the document part of an URI as a named node\n * @param x - The URI\n */\nexport function document(x: string): RDFlibNamedNode {\n  return new RDFlibNamedNode(docpart(x))\n}\n\n/**\n * Gets the hostname in an URI\n * @param u The URI\n */\nexport function hostpart(u: string): string {\n  var m = /[^\\/]*\\/\\/([^\\/]*)\\//.exec(u)\n  if (m) {\n    return m[1]\n  } else {\n    return ''\n  }\n}\n\n/**\n * Joins an URI with a base\n * @param given - The relative part\n * @param base - The base URI\n */\nexport function join(given: string, base: string): string {\n  var baseColon, baseScheme, baseSingle\n  var colon, lastSlash, path\n  var baseHash = base.indexOf('#')\n  if (baseHash > 0) {\n    base = base.slice(0, baseHash)\n  }\n  if (given.length === 0) {\n    return base\n  }\n  if (given.indexOf('#') === 0) {\n    return base + given\n  }\n  colon = given.indexOf(':')\n  if (colon >= 0) {\n    return given\n  }\n  baseColon = base.indexOf(':')\n  if (base.length === 0) {\n    return given\n  }\n  if (baseColon < 0) {\n    alert('Invalid base: ' + base + ' in join with given: ' + given)\n    return given\n  }\n  baseScheme = base.slice(0, +baseColon + 1 || 9e9)\n  if (given.indexOf('//') === 0) {\n    return baseScheme + given\n  }\n  if (base.indexOf('//', baseColon) === baseColon + 1) {\n    baseSingle = base.indexOf('/', baseColon + 3)\n    if (baseSingle < 0) {\n      if (base.length - baseColon - 3 > 0) {\n        return base + '/' + given\n      } else {\n        return baseScheme + given\n      }\n    }\n  } else {\n    baseSingle = base.indexOf('/', baseColon + 1)\n    if (baseSingle < 0) {\n      if (base.length - baseColon - 1 > 0) {\n        return base + '/' + given\n      } else {\n        return baseScheme + given\n      }\n    }\n  }\n  if (given.indexOf('/') === 0) {\n    return base.slice(0, baseSingle) + given\n  }\n  path = base.slice(baseSingle)\n  lastSlash = path.lastIndexOf('/')\n  if (lastSlash < 0) {\n    return baseScheme + given\n  }\n  if (lastSlash >= 0 && lastSlash < path.length - 1) {\n    path = path.slice(0, +lastSlash + 1 || 9e9)\n  }\n  path += given\n  while (path.match(/[^\\/]*\\/\\.\\.\\//)) {\n    path = path.replace(/[^\\/]*\\/\\.\\.\\//, '')\n  }\n  path = path.replace(/\\.\\//g, '')\n  path = path.replace(/\\/\\.$/, '/')\n  return base.slice(0, baseSingle) + path\n}\n\n/**\n * Gets the protocol part of an URI\n * @param uri The URI\n */\nexport function protocol(uri: string): string | null {\n  const i = uri.indexOf(':')\n  if (i < 0) {\n    return null\n  } else {\n    return uri.slice(0, i)\n  }\n}\n\n/**\n * Gets a relative uri\n * @param base The base URI\n * @param uri The absolute URI\n */\nexport function refTo(base: string, uri: string): string {\n  var c: string,\n      i: number,\n      k: number,\n      l: number,\n      len: number,\n      len1: number,\n      n: number,\n      o: number,\n      p: number,\n      q: number,\n      ref: string,\n      ref1: number,\n      s: string\n  var commonHost = new RegExp('^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$')\n  if (!base) {\n    return uri\n  }\n  if (base === uri) {\n    return ''\n  }\n  for (i = o = 0, len = uri.length; o < len; i = ++o) {\n    const c = uri[i]\n    if (c !== base[i]) {\n      break\n    }\n  }\n  if (base.slice(0, i).match(commonHost)) {\n    k = uri.indexOf('//')\n    if (k < 0) {\n      k = -2\n    }\n    l = uri.indexOf('/', k + 2)\n    if (uri[l + 1] !== '/' && base[l + 1] !== '/' && uri.slice(0, l) === base.slice(0, l)) {\n      return uri.slice(l)\n    }\n  }\n  if (uri[i] === '#' && base.length === i) {\n    return uri.slice(i)\n  }\n  while (i > 0 && uri[i - 1] !== '/') {\n    i--\n  }\n  if (i < 3) {\n    return uri\n  }\n  if (base.indexOf('//', i - 2) > 0 || uri.indexOf('//', i - 2) > 0) {\n    return uri\n  }\n  if (base.indexOf(':', i) > 0) {\n    return uri\n  }\n  n = 0\n  ref = base.slice(i)\n  for (p = 0, len1 = ref.length; p < len1; p++) {\n    c = ref[p]\n    if (c === '/') {\n      n++\n    }\n  }\n  if (n === 0 && i < uri.length && uri[i] === '#') {\n    return './' + uri.slice(i)\n  }\n  if (n === 0 && i === uri.length) {\n    return './'\n  }\n  s = ''\n  if (n > 0) {\n    for (q = 1, ref1 = n; ref1 >= 1 ? q <= ref1 : q >= ref1; ref1 >= 1 ? ++q : --q) {\n      s += '../'\n    }\n  }\n  return s + uri.slice(i)\n}\n","import ClassOrder from './class-order'\nimport Node from './node-internal'\nimport { VariableTermType } from './types'\nimport * as Uri from './uri'\nimport { Variable as TFVariable } from './tf-types'\n\n/**\n* Variables are placeholders used in patterns to be matched.\n* In cwm they are symbols which are the formula's list of quantified variables.\n* In sparql they are not visibly URIs.  Here we compromise, by having\n* a common special base URI for variables. Their names are uris,\n* but the ? notation has an implicit base uri of 'varid:'\n*/\nexport default class Variable extends Node implements TFVariable {\n  termType: typeof VariableTermType = VariableTermType\n\n  /** The base string for a variable's name */\n  base = 'varid:'\n  classOrder = ClassOrder.Variable\n  isVar = 1\n  /** The unique identifier of this variable */\n  uri: string\n\n  /**\n   * Initializes this variable\n   * @param name The variable's name\n   */\n  constructor (name = '') {\n    super(name)\n    this.base = 'varid:'\n    this.uri = Uri.join(name, this.base)\n  }\n\n  equals (other) {\n    if (!other) {\n      return false\n    }\n\n    return (this.termType === other.termType) && (this.value === other.value)\n  }\n\n  hashString () {\n    return this.toString()\n  }\n\n  substitute (bindings) {\n    var ref\n    return (ref = bindings[this.toNT()]) != null ? ref : this\n  }\n\n  toString () {\n    return Variable.toString(this)\n  }\n\n  static toString (variable) {\n    if (variable.uri.slice(0, variable.base.length) === variable.base) {\n      return `?${variable.uri.slice(variable.base.length)}`\n    }\n\n    return `?${variable.uri}`\n  }\n}\n","import Literal from '../literal'\nimport Statement from '../statement'\nimport NamedNode from '../named-node'\nimport BlankNode from '../blank-node'\nimport Variable from '../variable'\nimport DefaultGraph from '../default-graph'\nimport {\n  BlankNode as TFBlankNode,\n  RdfJsDataFactory,\n  Literal as TFLiteral,\n  NamedNode as TFNamedNode,\n  Quad,\n  Term,\n  Variable as TFVariable,\n} from '../tf-types'\n\nexport type Comparable = Term | TFNamedNode | TFBlankNode | TFLiteral | Quad | undefined | null\n\nexport type DefaultFactoryTypes = NamedNode | BlankNode | Literal | Variable | Statement\n\nexport type Indexable = number | string\n\nexport type Namespace = (term:string) => TFNamedNode\n\n/** A set of features that may be supported by a Data Factory */\nexport type SupportTable = Record<Feature, boolean>\n\nexport type TFIDFactoryTypes = TFNamedNode | TFBlankNode | TFLiteral | Quad | TFVariable | Term\n\nexport enum Feature {\n  /** Whether the factory supports termType:Collection terms */\n  collections = \"COLLECTIONS\",\n  /** Whether the factory supports termType:DefaultGraph terms */\n  defaultGraphType = \"DEFAULT_GRAPH_TYPE\",\n  /** Whether the factory supports equals on produced instances */\n  equalsMethod = \"EQUALS_METHOD\",\n  /** Whether the factory can create a unique idempotent identifier for the given term. */\n  id = \"ID\",\n  /**\n   * Whether the factory will return the same instance for subsequent calls.\n   * This implies `===`, which means methods like `indexOf` can be used.\n   */\n  identity = \"IDENTITY\",\n  /** Whether the factory supports mapping ids back to instances (should adhere to the identity setting) */\n  reversibleId = \"REVERSIBLE_ID\",\n  /** Whether the factory supports termType:Variable terms */\n  variableType = \"VARIABLE_TYPE\",\n}\n\n/**\n * Defines a DataFactory as used in rdflib, based on the RDF/JS: Data model specification,\n * but with additional extensions\n *\n * bnIndex is optional but useful.\n */\nexport interface DataFactory<\n  FactoryTypes = DefaultFactoryTypes,\n  IndexType = Indexable\n> extends RdfJsDataFactory {\n  /**\n   * BlankNode index\n   * @private\n  */\n  bnIndex?: number\n\n  supports: SupportTable\n\n  namedNode(value: string): NamedNode\n\n  blankNode(value?: string): BlankNode\n\n  literal(value: string, languageOrDatatype?: string | TFNamedNode): Literal\n\n  variable(value: string): Variable,\n\n  defaultGraph(): DefaultGraph,\n\n  isQuad(obj: any): obj is Statement\n\n  equals(a: Comparable, b: Comparable): boolean\n\n  toNQ(term: Term | FactoryTypes): string\n\n  quad(\n    subject: Term,\n    predicate: Term,\n    object: Term,\n    graph?: Term,\n  ): Statement;\n\n  quadToNQ(term: Statement | Quad): string\n\n  termToNQ(term: Term): string\n\n  /**\n   * Generates a unique session-idempotent identifier for the given object.\n   *\n   * @example NQ serialization (reversible from value)\n   * @example MD5 hash of termType + value (irreversible from value, map needed)\n   *\n   * @return {Indexable} A unique value which must also be a valid JS object key type.\n   */\n  id(obj: Term | FactoryTypes): IndexType\n}\n","import BlankNode from '../blank-node'\nimport Literal from '../literal'\nimport NamedNode from '../named-node'\nimport Statement from '../statement'\nimport Variable from '../variable'\nimport {\n  SubjectType,\n  PredicateType,\n  ObjectType,\n  GraphType,\n  EmptyTermType,\n  DefaultGraphTermType,\n  VariableTermType,\n  BlankNodeTermType,\n  LiteralTermType,\n  NamedNodeTermType,\n  CollectionTermType,\n  GraphTermType,\n} from '../types'\nimport DefaultGraph from '../default-graph'\nimport {\n  Comparable,\n  DataFactory,\n  DefaultFactoryTypes,\n  Feature,\n} from './factory-types'\nimport { isQuad, isTerm } from '../utils/terms'\nimport { NamedNode as TFNamedNode, Quad, Term } from '../tf-types'\nimport Collection from \"../collection\";\n\nexport { defaultGraphURI } from '../utils/default-graph-uri'\n\n/**\n * Gets the default graph\n */\nconst defaultGraph = new DefaultGraph()\n\n/** A basic internal RDFlib datafactory, which does not support Collections  */\nconst CanonicalDataFactory: DataFactory = {\n\n  supports: {\n    [Feature.collections]: false,\n    [Feature.defaultGraphType]: false,\n    [Feature.equalsMethod]: true,\n    [Feature.identity]: false,\n    [Feature.id]: true,\n    [Feature.reversibleId]: false,\n    [Feature.variableType]: true,\n  },\n\n  /**\n   * Creates a new blank node\n   * @param value - The blank node's identifier\n   */\n  blankNode(value?: string): BlankNode {\n    return new BlankNode(value)\n  },\n\n  defaultGraph: () => defaultGraph,\n\n  /**\n   * Compares to (rdf) objects for equality.\n   */\n  equals(a: Comparable, b: Comparable): boolean {\n    if (a === b || !a || !b) {\n      return true\n    }\n\n    if (isQuad(a) || isQuad(b)) {\n      if (isQuad(a) && isQuad(b)) {\n        return (\n          this.equals(a.subject, b.subject) &&\n          this.equals(a.predicate, b.predicate) &&\n          this.equals(a.object, b.object) &&\n          this.equals(a.graph, b.graph)\n        )\n      }\n\n      return false\n    }\n\n    if (isTerm(a) && isTerm(b)) {\n      return this.id(a) === this.id(b)\n    }\n\n    return false\n  },\n\n  /**\n   * Generates a uniquely identifiably *idempotent* string for the given {term}.\n   *\n   * Equivalent to [[Term.hashString]]\n   *\n   * @example Use this to associate data with a term in an object\n   *   { obj[id(term)] = \"myData\" }\n   */\n  id (term: Term | Statement | undefined): string {\n    if (!term) {\n      return 'undefined'\n    }\n\n    if (isQuad(term)) {\n      return this.quadToNQ(term)\n    }\n\n    switch (term.termType) {\n      case DefaultGraphTermType:\n        return 'defaultGraph'\n      case VariableTermType:\n        return Variable.toString(term)\n      default:\n        const nq = this.termToNQ(term)\n        if (nq) {\n          return nq\n        }\n\n        throw new Error(`Can't id term with type '${term.termType}'`)\n    }\n  },\n\n  isQuad (obj: any): obj is Statement {\n    return obj instanceof Statement\n  },\n\n  /**\n   * Creates a new literal node. Does some JS literal parsing for ease of use.\n   * @param value - The lexical value\n   * @param languageOrDatatype - Either the language or the datatype\n   */\n  literal(\n    value: string | number | boolean | Date,\n    languageOrDatatype?: string | TFNamedNode\n  ): Literal {\n    if (typeof value !== \"string\" && !languageOrDatatype) {\n      return Literal.fromValue(value)\n    }\n\n    const strValue = typeof value === 'string' ? value : '' + value\n    if (typeof languageOrDatatype === 'string') {\n      if (languageOrDatatype.indexOf(':') === -1) {\n        return new Literal(strValue, languageOrDatatype)\n      } else {\n        return new Literal(strValue, null, this.namedNode(languageOrDatatype))\n      }\n    } else {\n      return new Literal(strValue, null, languageOrDatatype)\n    }\n  },\n\n  /**\n   * Creates a new named node\n   * @param value - The new named node\n   */\n  namedNode(value: string): NamedNode {\n    return new NamedNode(value)\n  },\n\n  /**\n   * Creates a new statement\n   * @param subject - The subject\n   * @param predicate - The predicate\n   * @param object - The object\n   * @param graph - The containing graph\n   */\n  quad<\n    S extends SubjectType = SubjectType,\n    P extends PredicateType = PredicateType,\n    O extends ObjectType = ObjectType,\n    G extends GraphType = GraphType\n  >(subject: S, predicate: P, object: O, graph?: G): Statement<S, P, O, G | DefaultGraph> {\n    return new Statement(subject, predicate, object, graph || defaultGraph)\n  },\n\n  /**\n   * Creates a new statement\n   * @param subject - The subject\n   * @param predicate - The predicate\n   * @param object - The object\n   * @param graph - The containing graph\n   */\n  triple(\n    subject: Term | SubjectType,\n    predicate: Term | PredicateType,\n    object: Term | ObjectType,\n    graph?: Term | GraphType\n  ): Statement {\n    return this.quad(subject, predicate, object, graph)\n  },\n\n  quadToNQ(q: Statement | Quad): string {\n    return `${this.termToNQ(q.subject)} ${this.termToNQ(q.predicate)} ${this.termToNQ(q.object)} ${this.termToNQ(q.graph)} .`;\n  },\n\n  /** Stringify a {term} to n-quads serialization. */\n  termToNQ(term: Term): string {\n    switch (term.termType) {\n      case BlankNodeTermType:\n        return '_:' + term.value\n      case DefaultGraphTermType:\n        return ''\n      case EmptyTermType:\n        return '<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>'\n      case LiteralTermType:\n        return Literal.toNT(term as Literal)\n      case GraphTermType:\n      case NamedNodeTermType:\n        return '<' + term.value + '>'\n      case CollectionTermType:\n        return '(' + (term as Collection).elements.map(t => this.termToNQ(t)).join(' ') + ')'\n      default:\n        throw new Error(`Can't serialize nonstandard term type (was '${term.termType}')`)\n    }\n  },\n\n  /** Convert an rdf object (term or quad) to n-quads serialization. */\n  toNQ (term: Term | (DefaultFactoryTypes & Variable)): string {\n    if (this.isQuad(term)) {\n      return this.quadToNQ(term);\n    }\n\n    return this.termToNQ(term);\n  },\n\n  /**\n   * Creates a new variable\n   * @param name - The name for the variable\n   */\n  variable(name?: string): Variable {\n    return new Variable(name)\n  },\n}\n\n/** Contains the factory methods as defined in the spec, plus id */\nexport default CanonicalDataFactory\n","/**\n * A Dummy log\n * @module log\n */\nconst log = {\n  debug (x) {},\n  warn (x) {},\n  info (x) {},\n  error (x) {},\n  success (x) {},\n  msg (x) {},\n}\nexport default log\n","import RDFlibNamedNode from './named-node'\nimport { RdfJsDataFactory, NamedNode } from './tf-types'\n\n/**\n * Gets a namespace for the specified namespace's URI\n * @param nsuri - The URI for the namespace\n * @param [factory] - The factory for creating named nodes with\n */\nexport default function Namespace (nsuri: string, factory?: RdfJsDataFactory): (ln: string) => NamedNode {\n  const dataFactory = factory || { namedNode: (value) => new RDFlibNamedNode(value) as NamedNode }\n\n  return function (ln: string): NamedNode {\n    return dataFactory.namedNode(nsuri + (ln || ''))\n  }\n}\n","/**\n * Utility functions for $rdf\n * @module util\n */\nimport { docpart } from './uri'\nimport log from './log'\nimport * as uri from './uri'\nimport NamedNode from './named-node'\n\nconst string = { template: stringTemplate }\n\nexport { log, uri, string }\n\nexport function mediaTypeClass(mediaType){\n  mediaType = mediaType.split(';')[0].trim()  // remove media type parameters\n  return new NamedNode('http://www.w3.org/ns/iana/media-types/' + mediaType + '#Resource')\n}\n\nexport function linkRelationProperty(relation){\n  return new NamedNode('http://www.w3.org/ns/iana/link-relations/relation#' + relation.trim())\n}\n\n/**\n * Adds callback functionality to an object.\n * Callback functions are indexed by a 'hook' string.\n * They return true if they want to be called again.\n * @method callbackify\n * @param obj {Object}\n * @param callbacks {Array<string>}\n */\nexport function callbackify (obj, callbacks) {\n  obj.callbacks = {}\n  for (var x = callbacks.length - 1; x >= 0; x--) {\n    obj.callbacks[callbacks[x]] = []\n  }\n\n  obj.addHook = function (hook) {\n    if (!obj.callbacks[hook]) {\n      obj.callbacks[hook] = []\n    }\n  }\n\n  obj.addCallback = function (hook, func) {\n    obj.callbacks[hook].push(func)\n  }\n\n  obj.removeCallback = function (hook, funcName) {\n    for (var i = 0;i < obj.callbacks[hook].length;i++) {\n      if (obj.callbacks[hook][i].name === funcName) {\n        obj.callbacks[hook].splice(i, 1)\n        return true\n      }\n    }\n    return false\n  }\n\n  obj.insertCallback = function (hook, func) {\n    obj.callbacks[hook].unshift(func)\n  }\n\n  obj.fireCallbacks = function fireCallbacks (hook, args) {\n    var newCallbacks = []\n    var replaceCallbacks = []\n    var len = obj.callbacks[hook].length\n    var x\n    let callback\n\n    // log.info('!@$ Firing '+hook+' call back with length'+len)\n    for (x = len - 1; x >= 0; x--) {\n      // log.info('@@ Firing '+hook+' callback '+ obj.callbacks[hook][x])\n      callback = obj.callbacks[hook][x]\n      if (callback && callback.apply(obj, args)) {\n        newCallbacks.push(callback)\n      }\n    }\n\n    for (x = newCallbacks.length - 1; x >= 0; x--) {\n      replaceCallbacks.push(newCallbacks[x])\n    }\n\n    for (x = len; x < obj.callbacks[hook].length; x++) {\n      replaceCallbacks.push(obj.callbacks[hook][x])\n    }\n\n    obj.callbacks[hook] = replaceCallbacks\n  }\n}\n\n/**\n * Returns a DOM parser based on current runtime environment.\n */\nexport function DOMParserFactory () {\n  if (window.DOMParser) {\n    return new DOMParser()\n  } else if (window.ActiveXObject) {\n    return new ActiveXObject('Microsoft.XMLDOM')\n  } else {\n    return false\n  }\n}\n\n// From https://github.com/linkeddata/dokieli\nexport function domToString (node, options) {\n  options = options || {}\n  var selfClosing = []\n  if (options && options.selfClosing) {\n    options.selfClosing.split(' ').forEach(function (n) {\n      selfClosing[n] = true\n    })\n  }\n  var skipAttributes = []\n  if (options && options.skipAttributes) {\n    options.skipAttributes.split(' ').forEach(function (n) {\n      skipAttributes[n] = true\n    })\n  }\n  return dumpNode(node, options, selfClosing, skipAttributes)\n}\n\nexport function dumpNode (node, options, selfClosing, skipAttributes) {\n  var i\n  var out = ''\n  var noEsc = [ false ]\n  if (typeof node.nodeType === 'undefined') return out\n  if (node.nodeType === 1) {\n    if (node.hasAttribute('class') && (options && options.classWithChildText) && node.matches(options.classWithChildText.class)) {\n      out += node.querySelector(options.classWithChildText.element).textContent\n    } else if (!((options && options.skipNodeWithClass) && node.matches('.' + options.skipNodeWithClass))) {\n      var ename = node.nodeName.toLowerCase()\n      out += '<' + ename\n\n      var attrList = []\n      for (i = node.attributes.length - 1; i >= 0; i--) {\n        var atn = node.attributes[i]\n        if (skipAttributes && skipAttributes.length > 0 && skipAttributes[atn.name]) continue\n        if (/^\\d+$/.test(atn.name)) continue\n        if (atn.name === 'class' && (options && options.replaceClassItemWith) && (atn.value.split(' ').indexOf(options.replaceClassItemWith.source) > -1)) {\n          var re = new RegExp(options.replaceClassItemWith.source, 'g')\n          atn.value = atn.value.replace(re, options.replaceClassItemWith.target).trim()\n        }\n        if (!(atn.name === 'class' && (options && options.skipClassWithValue) && options.skipClassWithValue === atn.value)) {\n          attrList.push(atn.name + '=\\'' + atn.value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/'/g, '&quot;') + '\\'')\n        }\n      }\n      if (attrList.length > 0) {\n        if (options && options.sortAttributes) {\n          attrList.sort(function (a, b) {\n            return a.toLowerCase().localeCompare(b.toLowerCase())\n          })\n        }\n        out += ' ' + attrList.join(' ')\n      }\n      if (selfClosing && selfClosing.ename) {\n        out += ' />'\n      } else {\n        out += '>'\n        out += (ename === 'html') ? '\\n  ' : ''\n        noEsc.push(ename === 'style' || ename === 'script')\n        for (i = 0; i < node.childNodes.length; i++) out += dumpNode(node.childNodes[i])\n        noEsc.pop()\n        out += (ename === 'body') ? '</' + ename + '>' + '\\n' : '</' + ename + '>'\n      }\n    }\n  } else if (node.nodeType === 8) {\n    // FIXME: If comments are not tabbed in source, a new line is not prepended\n    out += '<!--' + node.nodeValue + '-->'\n  } else if (node.nodeType === 3 || node.nodeType === 4) {\n    // XXX: Remove new lines which were added after DOM ready\n    var nl = node.nodeValue.replace(/\\n+$/, '')\n    out += noEsc[noEsc.length - 1] ? nl : nl.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n  } else {\n    console.log('Warning; Cannot handle serialising nodes of type: ' + node.nodeType)\n    console.log(node)\n  }\n  return out\n}\n\nexport function dtstamp () {\n  var now = new Date()\n  var year = now.getYear() + 1900\n  var month = now.getMonth() + 1\n  var day = now.getDate()\n  var hour = now.getUTCHours()\n  var minute = now.getUTCMinutes()\n  var second = now.getSeconds()\n  if (month < 10) month = '0' + month\n  if (day < 10) day = '0' + day\n  if (hour < 10) hour = '0' + hour\n  if (minute < 10) minute = '0' + minute\n  if (second < 10) second = '0' + second\n  return year + '-' + month + '-' + day + 'T' +\n    hour + ':' + minute + ':' + second + 'Z'\n}\n\n/**\n * Compares statements (heavy comparison for repeatable canonical ordering)\n */\nexport function heavyCompare (x, y, g, uriMap) {\n  var nonBlank = function (x) {\n    return (x.termType === 'BlankNode') ? null : x\n  }\n  var signature = function (x) {\n    var lis = g.statementsMatching(x).map(function (st) {\n      return ('' + nonBlank(st.subject) + ' ' + nonBlank(st.predicate) +\n        ' ' + nonBlank(st.object))\n    }).concat(g.statementsMatching(undefined, undefined, x).map(function (st) {\n      return ('' + nonBlank(st.subject) + ' ' + nonBlank(st.predicate) +\n        ' ' + nonBlank(st.object))\n    }))\n    lis.sort()\n    return lis.join('\\n')\n  }\n  const comparison = Object.prototype.hasOwnProperty.call(g, \"compareTerms\")\n    ? g.compareTerms(x, y)\n    : x.compareTerm(y)\n\n  if ((x.termType === 'BlankNode') && (y.termType === 'BlankNode')) {\n    if (comparison === 0) return 0 // Same\n    if (signature(x) > signature(y)) return +1\n    if (signature(x) < signature(y)) return -1\n    return comparison  // Too bad -- this order not canonical.\n    // throw \"different bnodes indistinquishable for sorting\"\n  } else {\n    if (uriMap && x.uri && y.uri){\n      return (uriMap[x.uri] || x.uri).localeCompare(uriMap[y.uri] || y.uri)\n    }\n    return comparison\n  }\n}\n\nexport function heavyCompareSPO (x, y, g, uriMap) {\n  return heavyCompare(x.subject, y.subject, g, uriMap) ||\n    heavyCompare(x.predicate, y.predicate, g, uriMap) ||\n    heavyCompare(x.object, y.object, g, uriMap)\n}\n\n/**\n * Defines a simple debugging function\n * @method output\n * @param o {String}\n */\nexport function output (o) {\n  var k = document.createElement('div')\n  k.textContent = o\n  document.body.appendChild(k)\n}\n\n// Use native DOMParser in browser, only load xmldom in Node.js\nlet _xmldomParser = null\n\nfunction getNodeDOMParser() {\n  if (_xmldomParser) return _xmldomParser\n  // Dynamic require for Node.js - won't be bundled for browser\n  try {\n    const xmldom = require('@xmldom/xmldom')\n    _xmldomParser = new xmldom.DOMParser()\n    return _xmldomParser\n  } catch (e) {\n    return null\n  }\n}\n\n/**\n * Returns a DOM from parsed XML.\n */\nexport function parseXML (str, options) {\n  options = options || {}\n  const contentType = options.contentType || 'application/xml'\n\n  // Browser environment - use native DOMParser\n  if (typeof window !== 'undefined' && window.DOMParser) {\n    return new window.DOMParser().parseFromString(str, contentType)\n  }\n\n  // Node.js environment - use xmldom\n  if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n    const parser = getNodeDOMParser()\n    if (parser) {\n      return parser.parseFromString(str, options.contentType || 'application/xhtml+xml')\n    }\n  }\n\n  // Fallback - try global DOMParser\n  if (typeof DOMParser !== 'undefined') {\n    return new DOMParser().parseFromString(str, contentType)\n  }\n\n  throw new Error('No DOMParser available')\n}\n\n/**\n * Removes all statements equal to x from a\n */\nexport function RDFArrayRemove (a, x) {\n  for (var i = 0; i < a.length; i++) {\n    // TODO: This used to be the following, which didnt always work..why\n    // if(a[i] === x)\n    if (a[i].subject.equals(x.subject) &&\n      a[i].predicate.equals(x.predicate) &&\n      a[i].object.equals(x.object) &&\n      a[i].why.equals(x.why)) {\n      a.splice(i, 1)\n      return\n    }\n  }\n  throw new Error('RDFArrayRemove: Array did not contain ' + x + ' ' + x.why)\n}\n\nexport function string_startswith (str, pref) { // missing library routines\n  return (str.slice(0, pref.length) === pref)\n}\n\n/**\n * C++, python style %s -> subs\n */\nfunction stringTemplate (base, subs) {\n  var baseA = base.split('%s')\n  var result = ''\n  for (var i = 0;i < subs.length;i++) {\n    subs[i] += ''\n    result += baseA[i] + subs[i]\n  }\n  return result + baseA.slice(subs.length).join()\n}\n\n\n// Stack dump on errors - to pass errors back\n\nexport function stackString (e) {\n  var str = '' + e + '\\n'\n  if (!e.stack) {\n    return str + 'No stack available.\\n'\n  }\n  var lines = e.stack.toString().split('\\n')\n  var toprint = []\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i]\n    if (line.indexOf('ecmaunit.js') > -1) {\n      // remove useless bit of traceback\n      break\n    }\n    if (line.charAt(0) == '(') {\n      line = 'function' + line\n    }\n    var chunks = line.split('@')\n    toprint.push(chunks)\n  }\n  // toprint.reverse();  No - I prefer the latest at the top by the error message -tbl\n\n  for (var i = 0; i < toprint.length; i++) {\n    str += '  ' + toprint[i][1] + '\\n    ' + toprint[i][0]\n  }\n  return str\n}\n","import CanonicalDataFactory from \"./factories/canonical-data-factory\"\n\nexport function createXSD(localFactory = CanonicalDataFactory) {\n  return {\n    boolean: localFactory.namedNode(\"http://www.w3.org/2001/XMLSchema#boolean\"),\n    dateTime: localFactory.namedNode(\n      \"http://www.w3.org/2001/XMLSchema#dateTime\"\n    ),\n    decimal: localFactory.namedNode(\"http://www.w3.org/2001/XMLSchema#decimal\"),\n    double: localFactory.namedNode(\"http://www.w3.org/2001/XMLSchema#double\"),\n    integer: localFactory.namedNode(\"http://www.w3.org/2001/XMLSchema#integer\"),\n    langString: localFactory.namedNode(\n      \"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString\"\n    ),\n    string: localFactory.namedNode(\"http://www.w3.org/2001/XMLSchema#string\"),\n  }\n}\n\nconst defaultXSD = createXSD(CanonicalDataFactory)\n\nexport default defaultXSD\n","/*      Serialization of RDF Graphs\n**\n** Tim Berners-Lee 2006\n** This is was http://dig.csail.mit.edu/2005/ajar/ajaw/js/rdf/serialize.js\n** This is or was https://github.com/linkeddata/rdflib.js/blob/main/src/serializer.js\n** Licence: MIT\n*/\n// ttl2jsonld is lazy-loaded only when JSON-LD serialization is needed\nlet _ttl2jsonld = null\nfunction getTtl2Jsonld() {\n  if (_ttl2jsonld) return _ttl2jsonld\n  // Use dynamic require to avoid bundling for browser builds\n  // This will only be loaded when statementsToJsonld is called\n  try {\n    _ttl2jsonld = require('@frogcat/ttl2jsonld')\n  } catch (e) {\n    throw new Error('JSON-LD serialization requires @frogcat/ttl2jsonld. Install it with: npm install @frogcat/ttl2jsonld')\n  }\n  return _ttl2jsonld\n}\n\nimport solidNs from 'solid-namespace'\nimport CanonicalDataFactory from './factories/canonical-data-factory'\nimport * as Uri from './uri'\nimport * as Util from './utils-js'\nimport { createXSD } from './xsd'\n\n\nexport default function createSerializer(store) {\n  return new Serializer(store)\n};\n\nexport class Serializer {\n  constructor(store) {\n    this.flags = ''\n    this.base = null\n\n    this.prefixes = [] // suggested prefixes\n    this.namespaces = [] // complementary\n    const nsKeys = Object.keys(solidNs())\n    for (const i in nsKeys) {\n      const uri = solidNs()[nsKeys[i]]('')\n      const prefix = nsKeys[i]\n      this.prefixes[uri] = prefix\n      this.namespaces[prefix] = uri\n    }\n\n    this.suggestPrefix('rdf', 'http://www.w3.org/1999/02/22-rdf-syntax-ns#') // XML code assumes this!\n    this.suggestPrefix('xml', 'reserved:reservedForFutureUse') // XML reserves xml: in the spec.\n\n    this.namespacesUsed = [] // Count actually used and so needed in @prefixes\n    this.keywords = ['a'] // The only one we generate at the moment\n    this.prefixchars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n    this.incoming = null // Array not calculated yet\n    this.formulas = [] // remembering original formulae from hashes\n    this.store = store\n    this.rdfFactory = store.rdfFactory || CanonicalDataFactory\n    this.xsd = createXSD(this.rdfFactory)\n  }\n\n  setBase(base) {\n    this.base = base\n    return this\n  }\n\n  /**\n   * Set serializer behavior flags. Letters can be combined with spaces.\n   * Examples: 'si', 'deinprstux', 'si dr', 'o'.\n   * Notable flags:\n   *  - 'o': do not abbreviate to a prefixed name when the local part contains a dot\n   */\n  setFlags(flags) {\n    this.flags = flags || ''\n    return this\n  }\n\n  toStr(x) {\n    var s = x.toNT()\n    if (x.termType === 'Graph') {\n      this.formulas[s] = x // remember as reverse does not work\n    }\n    return s\n  }\n\n  fromStr(s) {\n    if (s[0] === '{') {\n      var x = this.formulas[s]\n      if (!x) console.log('No formula object for ' + s)\n      return x\n    }\n    return this.store.fromNT(s)\n  }\n\n  /**\n   * Defines a set of [prefix, namespace] pairs to be used by this Serializer instance.\n   * Overrides previous prefixes if any\n   * @param namespaces\n   * @return {Serializer}\n   */\n  setNamespaces(namespaces) {\n    for (var px in namespaces) {\n      this.setPrefix(px, namespaces[px])\n    }\n    return this\n  }\n\n  /**\n   * Defines a namespace prefix, overriding any existing prefix for that URI\n   * @param prefix\n   * @param uri\n   */\n  setPrefix(prefix, uri) {\n    if (prefix.slice(0, 7) === 'default') return // Try to weed these out\n    if (prefix.slice(0, 2) === 'ns') return //  From others inferior algos\n    if (!prefix || !uri) return // empty strings not suitable\n\n    // remove any existing prefix targeting this uri\n    // for (let existingPrefix in this.namespaces) {\n    //   if (this.namespaces[existingPrefix] == uri)\n    //     delete this.namespaces[existingPrefix];\n    // }\n\n    // remove any existing mapping for this prefix\n    for (let existingNs in this.prefixes) {\n      if (this.prefixes[existingNs] == prefix)\n        delete this.prefixes[existingNs]\n    }\n\n    this.prefixes[uri] = prefix\n    this.namespaces[prefix] = uri\n  }\n\n\n  /* Accumulate Namespaces\n  **\n  ** These are only hints.  If two overlap, only one gets used\n  ** There is therefore no guarantee in general.\n  */\n  suggestPrefix(prefix, uri) {\n    if (prefix.slice(0, 7) === 'default') return // Try to weed these out\n    if (prefix.slice(0, 2) === 'ns') return //  From others inferior algos\n    if (!prefix || !uri) return // empty strings not suitable\n    if (prefix in this.namespaces || uri in this.prefixes) return // already used\n    this.prefixes[uri] = prefix\n    this.namespaces[prefix] = uri\n  }\n\n  // Takes a namespace -> prefix map\n  suggestNamespaces(namespaces) {\n    for (var px in namespaces) {\n      this.suggestPrefix(px, namespaces[px])\n    }\n    return this\n  }\n\n  checkIntegrity() {\n    var p, ns\n    for (p in this.namespaces) {\n      if (this.prefixes[this.namespaces[p]] !== p) {\n        throw new Error('Serializer integity error 1: ' + p + ', ' +\n          this.namespaces[p] + ', ' + this.prefixes[this.namespaces[p]] + '!')\n      }\n    }\n    for (ns in this.prefixes) {\n      if (this.namespaces[this.prefixes[ns]] !== ns) {\n        throw new Error('Serializer integity error 2: ' + ns + ', ' +\n          this.prefixs[ns] + ', ' + this.namespaces[this.prefixes[ns]] + '!')\n      }\n    }\n  }\n\n  // Make up an unused prefix for a random namespace\n  makeUpPrefix(uri) {\n    var p = uri\n    function canUseMethod (pp) {\n      if (!this.validPrefix.test(pp)) return false // bad format\n      if (pp === 'ns') return false // boring\n      if (pp in this.namespaces) return false // already used\n      this.prefixes[uri] = pp\n      this.namespaces[pp] = uri\n      return pp\n    }\n    var canUse = canUseMethod.bind(this)\n\n    if ('#/'.indexOf(p[p.length - 1]) >= 0) p = p.slice(0, -1)\n    var slash = p.lastIndexOf('/')\n    if (slash >= 0) p = p.slice(slash + 1)\n    var i = 0\n    while (i < p.length) {\n      if (this.prefixchars.indexOf(p[i]) >= 0) {\n        i++\n      } else {\n        break\n      }\n    }\n    p = p.slice(0, i)\n\n    if (p.length < 6 && (canUse(p))) return p // exact is best\n    if (canUse(p.slice(0, 3))) return p.slice(0, 3)\n    if (canUse(p.slice(0, 2))) return p.slice(0, 2)\n    if (canUse(p.slice(0, 4))) return p.slice(0, 4)\n    if (canUse(p.slice(0, 1))) return p.slice(0, 1)\n    if (canUse(p.slice(0, 5))) return p.slice(0, 5)\n    if (!this.validPrefix.test(p)) {\n      p = 'n' // Otherwise the loop below may never termimnate\n    }\n    for (var j = 0; ; j++) if (canUse(p.slice(0, 3) + j)) return p.slice(0, 3) + j\n  }\n\n  rootSubjects(sts) {\n    var incoming = {}\n    var subjects = {}\n    var allBnodes = {}\n\n    /* This scan is to find out which nodes will have to be the roots of trees\n    ** in the serialized form. This will be any symbols, and any bnodes\n    ** which hve more or less than one incoming arc, and any bnodes which have\n    ** one incoming arc but it is an uninterrupted loop of such nodes back to itself.\n    ** This should be kept linear time with repect to the number of statements.\n    ** Note it does not use any indexing of the store.\n    */\n    for (var i = 0; i < sts.length; i++) {\n      var st = sts[i]\n      var checkMentions = function (x) {\n        if (!incoming.hasOwnProperty(x)) incoming[x] = []\n        incoming[x].push(st.subject) // List of things which will cause this to be printed\n      }\n      var st2 = [st.subject, st.predicate, st.object]\n      st2.map(function (y) {\n        if (y.termType === 'BlankNode') {\n          allBnodes[y.toNT()] = true\n        } else if (y.termType === 'Collection') {\n          y.elements.forEach(function (z) {\n            checkMentions(z) // bnodes in collections important\n          })\n        }\n      })\n      checkMentions(sts[i].object)\n      var ss = subjects[this.toStr(st.subject)] // Statements with this as subject\n      if (!ss) ss = []\n      ss.push(st)\n      subjects[this.toStr(st.subject)] = ss // Make hash. @@ too slow for formula?\n    }\n\n    var roots = []\n    for (var xNT in subjects) {\n      if (!subjects.hasOwnProperty(xNT)) continue\n      var y = this.fromStr(xNT)\n      if ((y.termType !== 'BlankNode') || !incoming[y] || (incoming[y].length !== 1)) {\n        roots.push(y)\n        continue\n      }\n    }\n    this.incoming = incoming // Keep for serializing @@ Bug for nested formulas\n\n    // Now do the scan using existing roots\n    var rootsHash = {}\n    for (var k = 0; k < roots.length; k++) {\n      rootsHash[roots[k].toNT()] = true\n    }\n    return {'roots': roots, 'subjects': subjects,\n    'rootsHash': rootsHash, 'incoming': incoming}\n  }\n\n  // //////////////////////////////////////////////////////\n\n  toN3(f) {\n    return this.statementsToN3(f.statements)\n  }\n\n  _notQNameChars = '\\t\\r\\n !\"#$%&\\'()*,+/;<=>?@[\\\\]^`{|}~' // issue#228\n  _notNameChars =\n    (this._notQNameChars + ':')\n\n  // Validate if a string is a valid PN_LOCAL per Turtle 1.1 spec\n  // Allows dots inside the local name but not as trailing character\n  // Also allows empty local names (for URIs ending in / or #)\n  isValidPNLocal(local) {\n    // Empty local name is valid (e.g., ex: for http://example.com/)\n    if (local.length === 0) return true\n    \n    // Cannot end with a dot\n    if (local[local.length - 1] === '.') return false\n    \n    // Check each character (allow dots mid-string)\n    for (var i = 0; i < local.length; i++) {\n      var ch = local[i]\n      // Dot is allowed unless it's the last character (checked above)\n      if (ch === '.') continue\n      // Other characters must not be in the blacklist\n      if (this._notNameChars.indexOf(ch) >= 0) {\n        return false\n      }\n    }\n    return true\n  }\n\n  explicitURI(uri) {\n    if (this.flags.indexOf('r') < 0 && this.base) {\n      uri = Uri.refTo(this.base, uri)\n    } else if (this.flags.indexOf('u') >= 0) { // Unicode encoding NTriples style\n      uri = backslashUify(uri)\n    } else {\n      uri = hexify(decodeURI(uri))\n    }\n    return '<' + uri + '>'\n  }\n\n  statementsToNTriples(sts) {\n    var sorted = sts.slice()\n    sorted.sort()\n    var str = ''\n    var rdfns = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#'\n    var self = this\n    var kb = this.store\n    var factory = this.rdfFactory\n    var termToNT = function (x) {\n      if (x.termType !== 'Collection') {\n        return self.atomicTermToN3(x)\n      }\n      var list = x.elements\n      var rest = kb.sym(rdfns + 'nill')\n      for (var i = list.length - 1; i >= 0; i--) {\n        var bnode = factory.blankNode()\n        str += termToNT(bnode) + ' ' + termToNT(kb.sym(rdfns + 'first')) + ' ' + termToNT(list[i]) + '.\\n'\n        str += termToNT(bnode) + ' ' + termToNT(kb.sym(rdfns + 'rest')) + ' ' + termToNT(rest) + '.\\n'\n        rest = bnode\n      }\n      return self.atomicTermToN3(rest)\n    }\n    for (var i = 0; i < sorted.length; i++) {\n      var st = sorted[i]\n      var s = ''\n      s += termToNT(st.subject) + ' '\n      s += termToNT(st.predicate) + ' '\n      s += termToNT(st.object) + ' '\n      if (this.flags.indexOf('q') >= 0) { // Do quads not nrtiples\n        s += termToNT(st.why) + ' '\n      }\n      s += '.\\n'\n      str += s\n    }\n    return str\n  }\n\n  statementsToN3(sts) {\n    var indent = 4\n    var width = 80\n    var kb = this.store\n    // A URI Map alows us to put the type statemnts at the top.\n    var uriMap = {'http://www.w3.org/1999/02/22-rdf-syntax-ns#type': 'aaa:00'}\n    var SPO = function (x, y) { // Do limited canonicalization of bnodes\n      return Util.heavyCompareSPO(x, y, kb, uriMap)\n    }\n    sts.sort(SPO)\n\n    if (this.base && !this.defaultNamespace){\n      this.defaultNamespace = this.base + '#'\n    }\n\n    var predMap = {}\n    if (this.flags.indexOf('s') < 0) {\n      predMap['http://www.w3.org/2002/07/owl#sameAs'] = '='\n    }\n    if (this.flags.indexOf('t') < 0) {\n      predMap['http://www.w3.org/1999/02/22-rdf-syntax-ns#type'] = 'a'\n    }\n    if (this.flags.indexOf('i') < 0) {\n      predMap['http://www.w3.org/2000/10/swap/log#implies'] = '=>'\n    }\n    // //////////////////////// Arrange the bits of text\n\n    var spaces = function (n) {\n      var s = ''\n      for (var i = 0; i < n; i++) s += ' '\n      return s\n    }\n\n    var treeToLine = function (tree) {\n      var str = ''\n      for (var i = 0; i < tree.length; i++) {\n        var branch = tree[i]\n        var s2 = (typeof branch === 'string') ? branch : treeToLine(branch)\n        // Note the space before the dot in case statement ends with 123 or colon. which is in fact allowed but be conservative.\n        if (i !== 0) {\n          var ch = str.slice(-1) || ' '\n          if (s2 === ',' || s2 === ';') {\n            // no gap\n          } else if (s2 === '.' && !('0123456789.:'.includes(ch))) { // no gap except after number and colon\n            // no gap\n          } else {\n            str += ' ' // separate from previous token\n          }\n        }\n        str += s2\n      }\n      return str\n    }\n\n    // Convert a nested tree of lists and strings to a string\n    var treeToString = function (tree, level) {\n      var str = ''\n      var lastLength = 100000\n      if (level === undefined) level = -1\n      for (var i = 0; i < tree.length; i++) {\n        var branch = tree[i]\n        if (typeof branch !== 'string') {\n          var substr = treeToString(branch, level + 1)\n          if (\n            substr.length < 10 * (width - indent * level) &&\n              substr.indexOf('\"\"\"') < 0) { // Don't mess up multiline strings\n            var line = treeToLine(branch)\n            if (line.length < (width - indent * level)) {\n              branch = line //   Note! treat as string below\n              substr = ''\n            }\n          }\n          if (substr) lastLength = 10000\n          str += substr\n        }\n        if (typeof branch === 'string') {\n          if (branch.length === 1 && str.slice(-1) === '\\n') {\n            if (',.;'.indexOf(branch) >= 0) {\n              str = str.slice(0, -1)\n              // be conservative and ensure a whitespace between some chars and a final dot, as in treeToLine above\n              if (branch == '.' && '0123456789.:'.includes(str.charAt(str.length-1))) {\n                str += ' '\n                lastLength += 1\n              }\n              str += branch + '\\n' //  slip punct'n on end\n              lastLength += 1\n              continue\n            }\n          }\n          if (lastLength < (indent * level + 4) ||  // if new line not necessary\n            lastLength + branch.length + 1 < width && ';.'.indexOf(str[str.length - 2]) < 0) { // or the string fits on last line\n            str = str.slice(0, -1) + ' ' + branch + '\\n' // then continue on this line\n            lastLength += branch.length + 1\n          } else {\n            let line = spaces(indent * level) + branch\n            str += line + '\\n'\n            lastLength = line.length\n            if (level < 0) {\n              str += '\\n' // extra blank line\n              lastLength = 100000 // don't touch\n            }\n          }\n        }\n      }\n      return str\n    }\n\n    // //////////////////////////////////////////// Structure for N3\n    // Convert a set of statements into a nested tree of lists and strings\n    function statementListToTreeMethod (statements) {\n      var stats = this.rootSubjects(statements)\n      var roots = stats.roots\n      var results = []\n      for (var i = 0; i < roots.length; i++) {\n        var root = roots[i]\n        results.push(subjectTree(root, stats))\n      }\n      return results\n    }\n    var statementListToTree = statementListToTreeMethod.bind(this)\n\n    // The tree for a subject\n    function subjectTree (subject, stats) {\n      if (subject.termType === 'BlankNode' && !stats.incoming[subject]) {\n        return objectTree(subject, stats, true).concat(['.']) // Anonymous bnode subject\n      }\n      return [ termToN3(subject, stats) ].concat([propertyTree(subject, stats)]).concat(['.'])\n    }\n    // The property tree for a single subject or anonymous node\n    function propertyTreeMethod (subject, stats) {\n      var results = []\n      var lastPred = null\n      var sts = stats.subjects[this.toStr(subject)] || [] // relevant statements\n      if (typeof sts === 'undefined') {\n        throw new Error('Cant find statements for ' + subject)\n      }\n\n      var objects = []\n      for (var i = 0; i < sts.length; i++) {\n        var st = sts[i]\n        if (st.predicate.uri === lastPred) {\n          objects.push(',')\n        } else {\n          if (lastPred) {\n            results = results.concat([objects]).concat([';'])\n            objects = []\n          }\n          results.push(predMap[st.predicate.uri]\n            ? predMap[st.predicate.uri] : termToN3(st.predicate, stats))\n        }\n        lastPred = st.predicate.uri\n        objects.push(objectTree(st.object, stats))\n      }\n      results = results.concat([objects])\n      return results\n    }\n\n    var propertyTree = propertyTreeMethod.bind(this)\n\n    function objectTreeMethod(obj, stats, force) {\n      if (obj.termType === 'BlankNode' &&\n        (force || stats.rootsHash[obj.toNT()] === undefined)) {// if not a root\n        if (stats.subjects[this.toStr(obj)]) {\n          return ['[', propertyTree(obj, stats), ']']\n        } else {\n          return '[]'\n        }\n      }\n      return termToN3(obj, stats)\n    }\n\n    var objectTree = objectTreeMethod.bind(this)\n\n    function termToN3Method(expr, stats) { //\n      var i, res\n      switch (expr.termType) {\n        case 'Graph':\n          res = ['{']\n          res = res.concat(statementListToTree(expr.statements))\n          return res.concat(['}'])\n\n        case 'Collection':\n          res = ['(']\n          for (i = 0; i < expr.elements.length; i++) {\n            res.push([ objectTree(expr.elements[i], stats) ])\n          }\n          res.push(')')\n          return res\n\n        default:\n          return this.atomicTermToN3(expr)\n      }\n    }\n    Serializer.prototype.termToN3 = termToN3\n    var termToN3 = termToN3Method.bind(this)\n\n    function prefixDirectivesMethod () {\n      var str = ''\n      if (this.flags.indexOf('d') < 0 && this.defaultNamespace) {\n        str += '@prefix : ' + this.explicitURI(this.defaultNamespace) + '.\\n'\n      }\n      for (var ns in this.prefixes) {\n        if (!this.prefixes.hasOwnProperty(ns)) continue\n        if (!this.namespacesUsed[ns]) continue\n        str += '@prefix ' + this.prefixes[ns] + ': ' + this.explicitURI(ns) +\n          '.\\n'\n      }\n      return str + '\\n'\n    }\n    var prefixDirectives = prefixDirectivesMethod.bind(this)\n    // Body of statementsToN3:\n    var tree = statementListToTree(sts)\n    return prefixDirectives() + treeToString(tree)\n  }\n  // //////////////////////////////////////////// Atomic Terms\n\n  //  Deal with term level things and nesting with no bnode structure\n  atomicTermToN3 (expr, stats) {\n    switch (expr.termType) {\n      case 'BlankNode':\n      case 'Variable':\n        return expr.toNT()\n      case 'Literal':\n        var val = expr.value\n        if (typeof val !== 'string') {\n          throw new TypeError('Value of RDF literal node must be a string')\n        }\n        // var val = expr.value.toString() // should be a string already\n        if (expr.datatype && this.flags.indexOf('x') < 0) { // Supress native numbers\n          switch (expr.datatype.uri) {\n\n            case 'http://www.w3.org/2001/XMLSchema#integer':\n              return val\n\n            case 'http://www.w3.org/2001/XMLSchema#decimal': // In Turtle, must have dot\n              if (val.indexOf('.') < 0) val += '.0'\n              return val\n\n            case 'http://www.w3.org/2001/XMLSchema#double': {\n              // Must force use of 'e'\n              const eNotation = val.toLowerCase().indexOf('e') > 0\n              if (val.indexOf('.') < 0 && !eNotation) val += '.0'\n              if (!eNotation) val += 'e0'\n              return val\n            }\n\n            case 'http://www.w3.org/2001/XMLSchema#boolean':\n              return expr.value === '1' ? 'true' : 'false'\n          }\n        }\n        var str = this.stringToN3(expr.value, this.flags)\n        if (expr.language) {\n          str += '@' + expr.language\n        } else if (!expr.datatype.equals(this.xsd.string)) {\n          str += '^^' + this.atomicTermToN3(expr.datatype, stats)\n        }\n        return str\n      case 'NamedNode':\n        return this.symbolToN3(expr)\n      case 'DefaultGraph':\n        return ''\n      default:\n        throw new Error('Internal: atomicTermToN3 cannot handle ' + expr + ' of termType: ' + expr.termType)\n    }\n  }\n\n  //  stringToN3:  String escaping for N3\n\n  validPrefix = new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)\n\n  forbidden1 = new RegExp(/[\\\\\"\\b\\f\\r\\v\\t\\n\\u0080-\\uffff]/gm)\n  forbidden3 = new RegExp(/[\\\\\"\\b\\f\\r\\v\\u0080-\\uffff]/gm)\n  stringToN3(str, flags) {\n    if (!flags) flags = 'e'\n    var res = ''\n    var i, j, k\n    var delim\n    var forbidden\n    if (str.length > 20 && // Long enough to make sense\n        str.slice(-1) !== '\"' && // corner case'\n        flags.indexOf('n') < 0 && // Force single line\n        (str.indexOf('\\n') > 0 || str.indexOf('\"') > 0)) {\n      delim = '\"\"\"'\n      forbidden = this.forbidden3\n    } else {\n      delim = '\"'\n      forbidden = this.forbidden1\n    }\n    for (i = 0; i < str.length;) {\n      forbidden.lastIndex = 0\n      var m = forbidden.exec(str.slice(i))\n      if (m == null) break\n      j = i + forbidden.lastIndex - 1\n      res += str.slice(i, j)\n      var ch = str[j]\n      if (ch === '\"' && delim === '\"\"\"' && str.slice(j, j + 3) !== '\"\"\"') {\n        res += ch\n      } else {\n        k = '\\b\\f\\r\\t\\v\\n\\\\\"'.indexOf(ch) // No escaping of bell (7)?\n        if (k >= 0) {\n          res += '\\\\' + 'bfrtvn\\\\\"'[k]\n        } else {\n          if (flags.indexOf('e') >= 0) { // Unicode escaping in strings not unix style\n            res += '\\\\u' + ('000' +\n              ch.charCodeAt(0).toString(16).toLowerCase()).slice(-4)\n          } else { // no 'e' flag\n            res += ch\n          }\n        }\n      }\n      i = j + 1\n    }\n    return delim + res + str.slice(i) + delim\n  }\n  //  A single symbol, either in  <> or namespace notation\n\n  symbolToN3 (x) { // c.f. symbolString() in notation3.py\n    var uri = x.uri\n    var j = uri.indexOf('#')\n    if (j < 0 && this.flags.indexOf('/') < 0) {\n      j = uri.lastIndexOf('/')\n    }\n    if (j >= 0 && this.flags.indexOf('p') < 0 &&\n      // Can split at namespace but only if http[s]: URI or file: or ws[s] (why not others?)\n      (uri.indexOf('http') === 0 || uri.indexOf('ws') === 0 || uri.indexOf('file') === 0)) {\n      var localid = uri.slice(j + 1)\n      var namesp = uri.slice(0, j + 1)\n      // Don't split if namespace is just the protocol (e.g., https://)\n      // A valid namespace should have content after the protocol\n  var minNamespaceLength = uri.indexOf('://') + 4 // e.g., \"http://x\" minimum\n  // Also don't split if namespace is the base directory (would serialize as relative URI)\n  var baseDir = this.base ? this.base.slice(0, Math.max(this.base.lastIndexOf('/'), this.base.lastIndexOf('#')) + 1) : null\n  var namespaceIsBaseDir = baseDir && namesp === baseDir\n  // If flag 'o' is present, forbid dots in local part when abbreviating\n  var forbidDotLocal = this.flags.indexOf('o') >= 0 && localid.indexOf('.') >= 0\n  var canSplit = !namespaceIsBaseDir && !forbidDotLocal && namesp.length > minNamespaceLength && this.isValidPNLocal(localid)\n/*\n      if (uri.slice(0, j + 1) === this.base + '#') { // base-relative\n        if (canSplit) {\n          return ':' + uri.slice(j + 1) // assume deafult ns is local\n        } else {\n          return '<#' + uri.slice(j + 1) + '>'\n        }\n      }\n*/\n      if (canSplit) {\n        if (this.defaultNamespace && this.defaultNamespace === namesp &&\n            this.flags.indexOf('d') < 0) { // d -> suppress default\n          if (this.flags.indexOf('k') >= 0 &&\n            this.keyords.indexOf(localid) < 0) {\n            return localid\n          }\n          return ':' + localid\n        }\n        // this.checkIntegrity() //  @@@ Remove when not testing\n        var prefix = this.prefixes[namesp]\n        if (!prefix) prefix = this.makeUpPrefix(namesp)\n        if (prefix) {\n          this.namespacesUsed[namesp] = true\n          return prefix + ':' + localid\n        }\n      // Fall though if can't do qname\n      }\n    }\n    return this.explicitURI(uri)\n  }\n\n  // /////////////////////////// Quad store serialization\n\n  // @para. write  - a function taking a single string to be output\n  //\n  writeStore(write) {\n    var kb = this.store\n    var fetcher = kb.fetcher\n    var session = fetcher && fetcher.appNode\n\n    // The core data\n\n    var sources = this.store.index[3]\n    for (var s in sources) { // -> assume we can use -> as short for log:semantics\n      var source = kb.fromNT(s)\n      if (session && source.equals(session)) continue\n      write('\\n' + this.atomicTermToN3(source) + ' ' +\n        this.atomicTermToN3(kb.sym('http://www.w3.org/2000/10/swap/log#semantics')) +\n          ' { ' + this.statementsToN3(kb.statementsMatching(\n          undefined, undefined, undefined, source)) + ' }.\\n')\n    }\n\n    // The metadata from HTTP interactions:\n\n    kb.statementsMatching(undefined,\n      kb.sym('http://www.w3.org/2007/ont/link#requestedURI')).map(\n      function (st) {\n        write('\\n<' + st.object.value + '> log:metadata {\\n')\n        var sts = kb.statementsMatching(undefined, undefined, undefined, st.subject)\n        write(this.statementsToN3(this.statementsToN3(sts)))\n        write('}.\\n')\n      })\n\n    // Inferences we have made ourselves not attributable to anyone else\n\n    var metaSources = []\n    if (session) metaSources.push(session)\n    var metadata = []\n    metaSources.map(function (source) {\n      metadata = metadata.concat(kb.statementsMatching(undefined, undefined, undefined, source))\n    })\n    write(this.statementsToN3(metadata))\n  }\n\n  // ////////////////////////////////////////////// XML serialization\n\n  statementsToXML(sts) {\n    var indent = 4\n    var width = 80\n\n    var namespaceCounts = [] // which have been used\n    namespaceCounts['http://www.w3.org/1999/02/22-rdf-syntax-ns#'] = true\n\n    var liPrefix = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#_' // prefix for ordered list items\n\n    // //////////////////////// Arrange the bits of XML text\n\n    var spaces = function (n) {\n      var s = ''\n      for (var i = 0; i < n; i++) s += ' '\n      return s\n    }\n\n    var XMLtreeToLine = function (tree) {\n      var str = ''\n      for (var i = 0; i < tree.length; i++) {\n        var branch = tree[i]\n        var s2 = (typeof branch === 'string') ? branch : XMLtreeToLine(branch)\n        str += s2\n      }\n      return str\n    }\n\n    // Convert a nested tree of lists and strings to a string\n    var XMLtreeToString = function (tree, level) {\n      var str = ''\n      var line\n      var lastLength = 100000\n      if (!level) level = 0\n      for (var i = 0; i < tree.length; i++) {\n        var branch = tree[i]\n        if (typeof branch !== 'string') {\n          var substr = XMLtreeToString(branch, level + 1)\n          if (\n            substr.length < 10 * (width - indent * level) &&\n            substr.indexOf('\"\"\"') < 0) { // Don't mess up multiline strings\n            line = XMLtreeToLine(branch)\n            if (line.length < (width - indent * level)) {\n              branch = '   ' + line //   @@ Hack: treat as string below\n              substr = ''\n            }\n          }\n          if (substr) lastLength = 10000\n          str += substr\n        }\n        if (typeof branch === 'string') {\n          if (lastLength < (indent * level + 4)) { // continue\n            str = str.slice(0, -1) + ' ' + branch + '\\n'\n            lastLength += branch.length + 1\n          } else {\n            line = spaces(indent * level) + branch\n            str += line + '\\n'\n            lastLength = line.length\n          }\n        } else { // not string\n        }\n      }\n      return str\n    }\n\n    function statementListToXMLTreeMethod (statements) {\n      this.suggestPrefix('rdf', 'http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n      var stats = this.rootSubjects(statements)\n      var roots = stats.roots\n      var results = []\n      for (var i = 0; i < roots.length; i++) {\n        var root = roots[i]\n        results.push(subjectXMLTree(root, stats))\n      }\n      return results\n    }\n    var statementListToXMLTree = statementListToXMLTreeMethod.bind(this)\n\n    function escapeForXML (str) {\n      if (typeof str === 'undefined') return '@@@undefined@@@@'\n      return str.replace(/[&<\"]/g, function (m) {\n        switch (m[0]) {\n          case '&':\n            return '&amp;'\n          case '<':\n            return '&lt;'\n          case '\"':\n            return '&quot;' // '\n        }\n      })\n    }\n\n    function relURIMethod (term) {\n      return escapeForXML((this.base) ? Util.uri.refTo(this.base, term.uri) : term.uri)\n    }\n    var relURI = relURIMethod.bind(this)\n\n    // The tree for a subject\n    function subjectXMLTreeMethod (subject, stats) {\n      var results = []\n      var type, t, st, pred\n      var sts = stats.subjects[this.toStr(subject)] // relevant statements\n      if (typeof sts === 'undefined') { // empty bnode\n        return propertyXMLTree(subject, stats)\n      }\n\n      // Sort only on the predicate, leave the order at object\n      // level undisturbed.  This leaves multilingual content in\n      // the order of entry (for partner literals), which helps\n      // readability.\n      //\n      // For the predicate sort, we attempt to split the uri\n      // as a hint to the sequence\n      sts.sort(function (a, b) {\n        var ap = a.predicate.uri\n        var bp = b.predicate.uri\n        if (ap.substring(0, liPrefix.length) === liPrefix || bp.substring(0, liPrefix.length) === liPrefix) { // we're only interested in sorting list items\n          return ap.localeCompare(bp)\n        }\n\n        var as = ap.substring(liPrefix.length)\n        var bs = bp.substring(liPrefix.length)\n        var an = parseInt(as, 10)\n        var bn = parseInt(bs, 10)\n        if (isNaN(an) || isNaN(bn) ||\n          an !== as || bn !== bs) { // we only care about integers\n          return ap.localeCompare(bp)\n        }\n\n        return an - bn\n      })\n\n      for (var i = 0; i < sts.length; i++) {\n        st = sts[i]\n        // look for a type\n        if (st.predicate.uri === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type' && !type && st.object.termType === 'NamedNode') {\n          type = st.object\n          continue // don't include it as a child element\n        }\n\n        // see whether predicate can be replaced with \"li\"\n        pred = st.predicate\n        if (pred.uri.substr(0, liPrefix.length) === liPrefix) {\n          var number = pred.uri.substr(liPrefix.length)\n          // make sure these are actually numeric list items\n          var intNumber = parseInt(number, 10)\n          if (number === intNumber.toString()) {\n            // was numeric; don't need to worry about ordering since we've already\n            // sorted the statements\n            pred = this.rdfFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#li')\n          }\n        }\n\n        t = qname(pred)\n        switch (st.object.termType) {\n          case 'BlankNode':\n            if (stats.incoming[st.object].length === 1) { // there should always be something in the incoming array for a bnode\n              results = results.concat(['<' + t + ' rdf:parseType=\"Resource\">',\n                subjectXMLTree(st.object, stats),\n                '</' + t + '>'])\n            } else {\n              results = results.concat(['<' + t + ' rdf:nodeID=\"' +\n                st.object.toNT().slice(2) + '\"/>'])\n            }\n            break\n          case 'NamedNode':\n            results = results.concat(['<' + t + ' rdf:resource=\"' +\n              relURI(st.object) + '\"/>'])\n            break\n          case 'Literal':\n            results = results.concat(['<' + t +\n            (st.object.language ? ' xml:lang=\"' + st.object.language + '\"' :\n              (st.object.datatype.equals(this.xsd.string)\n                ? ''\n                : ' rdf:datatype=\"' + escapeForXML(st.object.datatype.uri) + '\"')) +\n            '>' + escapeForXML(st.object.value) +\n            '</' + t + '>'])\n            break\n          case 'Collection':\n            results = results.concat(['<' + t + ' rdf:parseType=\"Collection\">',\n              collectionXMLTree(st.object, stats),\n              '</' + t + '>'])\n            break\n          default:\n            throw new Error(\"Can't serialize object of type \" + st.object.termType + ' into XML')\n        } // switch\n      }\n\n      var tag = type ? qname(type) : 'rdf:Description'\n\n      var attrs = ''\n      if (subject.termType === 'BlankNode') {\n        if (!stats.incoming[subject] || stats.incoming[subject].length !== 1) { // not an anonymous bnode\n          attrs = ' rdf:nodeID=\"' + subject.toNT().slice(2) + '\"'\n        }\n      } else {\n        attrs = ' rdf:about=\"' + relURI(subject) + '\"'\n      }\n\n      return [ '<' + tag + attrs + '>' ].concat([results]).concat(['</' + tag + '>'])\n    }\n\n    var subjectXMLTree = subjectXMLTreeMethod.bind(this)\n\n    function collectionXMLTree (subject, stats) {\n      var res = []\n      for (var i = 0; i < subject.elements.length; i++) {\n        res.push(subjectXMLTree(subject.elements[i], stats))\n      }\n      return res\n    }\n\n    // The property tree for a single subject or anonymos node\n    function propertyXMLTreeMethod (subject, stats) {\n      var results = []\n      var sts = stats.subjects[this.toStr(subject)] // relevant statements\n      if (!sts) return results // No relevant statements\n      sts.sort()\n      for (var i = 0; i < sts.length; i++) {\n        var st = sts[i]\n        switch (st.object.termType) {\n          case 'BlankNode':\n            if (stats.rootsHash[st.object.toNT()]) { // This bnode has been done as a root -- no content here @@ what bout first time\n              results = results.concat(['<' + qname(st.predicate) + ' rdf:nodeID=\"' + st.object.toNT().slice(2) + '\">',\n                '</' + qname(st.predicate) + '>'])\n            } else {\n              results = results.concat(['<' + qname(st.predicate) + ' rdf:parseType=\"Resource\">',\n                propertyXMLTree(st.object, stats),\n                '</' + qname(st.predicate) + '>'])\n            }\n            break\n          case 'NamedNode':\n            results = results.concat(['<' + qname(st.predicate) + ' rdf:resource=\"' +\n              relURI(st.object) + '\"/>'])\n            break\n          case 'Literal':\n            results = results.concat(['<' + qname(st.predicate) +\n              (st.object.language ? \n                ' xml:lang=\"' + st.object.language + '\"' :\n                (st.object.datatype.equals(this.xsd.string) ? '' : ' rdf:datatype=\"' + escapeForXML(st.object.datatype.value) + '\"')) \n              + '>' + escapeForXML(st.object.value) +\n              '</' + qname(st.predicate) + '>'])\n            break\n          case 'Collection':\n            results = results.concat(['<' + qname(st.predicate) + ' rdf:parseType=\"Collection\">',\n              collectionXMLTree(st.object, stats),\n              '</' + qname(st.predicate) + '>'])\n            break\n          default:\n            throw new Error(\"Can't serialize object of type \" + st.object.termType + ' into XML')\n        } // switch\n      }\n      return results\n    }\n    var propertyXMLTree = propertyXMLTreeMethod.bind(this)\n\n    function qnameMethod (term) {\n      var uri = term.uri\n\n      var j = uri.indexOf('#')\n      if (j < 0 && this.flags.indexOf('/') < 0) {\n        j = uri.lastIndexOf('/')\n      }\n      if (j < 0) throw new Error('Cannot make qname out of <' + uri + '>')\n\n      for (var k = j + 1; k < uri.length; k++) {\n        if (this._notNameChars.indexOf(uri[k]) >= 0) {\n          throw new Error('Invalid character \"' + uri[k] + '\" cannot be in XML qname for URI: ' + uri)\n        }\n      }\n      var localid = uri.slice(j + 1)\n      var namesp = uri.slice(0, j + 1)\n      if (this.defaultNamespace && this.defaultNamespace === namesp &&\n        this.flags.indexOf('d') < 0) { // d -> suppress default\n        return localid\n      }\n      var prefix = this.prefixes[namesp]\n      if (!prefix) prefix = this.makeUpPrefix(namesp)\n      namespaceCounts[namesp] = true\n      return prefix + ':' + localid\n    }\n    var qname = qnameMethod.bind(this)\n\n    // Body of toXML:\n\n    var tree = statementListToXMLTree(sts)\n    var str = '<rdf:RDF'\n    if (this.defaultNamespace) {\n      str += ' xmlns=\"' + escapeForXML(this.defaultNamespace) + '\"'\n    }\n    for (var ns in namespaceCounts) {\n      if (!namespaceCounts.hasOwnProperty(ns)) continue\n      // Rel uris in xml ns is not strictly allowed in the XMLNS spec but needed in practice often\n      var ns2 = (this.base && this.flags.includes('z')) ? Util.uri.refTo(this.base, ns) : ns\n      str += '\\n xmlns:' + this.prefixes[ns] + '=\"' + escapeForXML(ns2) + '\"'\n    }\n    str += '>'\n\n    var tree2 = [str, tree, '</rdf:RDF>'] // @@ namespace declrations\n    return XMLtreeToString(tree2, -1)\n  } // End @@ body\n\n  statementsToJsonld (sts) {\n    // ttl2jsonld creates context keys for all ttl prefix\n    // context keys must be absolute IRI ttl2jsonld@0.0.8\n    /* function findId (itemObj) {\n      if (itemObj['@id']) {\n        const item = itemObj['@id'].split(':')\n        if (keys[item[0]]) itemObj['@id'] = jsonldObj['@context'][item[0]] + item[1]\n      }\n      const itemValues = Object.values(itemObj)\n      for (const i in itemValues) {\n        if (typeof itemValues[i] !== 'string') { // @list contains array\n          findId(itemValues[i])\n        }\n      }\n    } */\n    const ttl2jsonld = getTtl2Jsonld()\n    const turtleDoc = this.statementsToN3(sts)\n    const jsonldObj = ttl2jsonld.parse(turtleDoc)\n    return JSON.stringify(jsonldObj, null, 2)\n  }\n\n}\n\n// String escaping utilities\n\nfunction hexify (str) { // also used in parser\n  return encodeURI(str)\n}\n\nfunction backslashUify (str) {\n  var res = ''\n  var k\n  for (var i = 0; i < str.length; i++) {\n    k = str.charCodeAt(i)\n    if (k > 65535) {\n      res += '\\\\U' + ('00000000' + k.toString(16)).slice(-8) // convert to upper?\n    } else if (k > 126) {\n      res += '\\\\u' + ('0000' + k.toString(16)).slice(-4)\n    } else {\n      res += str[i]\n    }\n  }\n  return res\n}\n","import Formula from './formula'\nimport Serializer from './serializer'\nimport {\n  ContentType,\n  JSONLDContentType,\n  N3ContentType,\n  N3LegacyContentType,\n  NQuadsAltContentType,\n  NQuadsContentType,\n  NTriplesContentType,\n  RDFXMLContentType,\n  TurtleContentType,\n  TurtleLegacyContentType,\n} from './types'\nimport IndexedFormula from './store'\nimport { BlankNode, NamedNode } from './tf-types'\n\n/**\n * Serialize to the appropriate format\n */\nexport default function serialize (\n  /** The graph or nodes that should be serialized */\n  target: Formula | NamedNode | BlankNode | null,\n  /** The store */\n  kb: Formula,\n  base?: unknown,\n  /**\n   * The mime type.\n   * Defaults to Turtle.\n   */\n  contentType?: string | ContentType,\n  callback?: (err: Error | undefined | null, result?: string) => any,\n  options?: {\n    /**\n     * A string of letters, each of which set an options\n     * e.g. `deinprstux`\n     */\n    flags?: string,\n    /**\n     * A set of [prefix, uri] pairs that define namespace prefixes\n     */\n    namespaces?: Record<string, string>\n  }\n): string | undefined {\n  base = base || target?.value\n  const opts = options || {}\n  contentType = contentType || TurtleContentType // text/n3 if complex?\n  var documentString: string | undefined = undefined\n  try {\n    var sz = Serializer(kb)\n    if ((opts as any).flags) sz.setFlags((opts as any).flags)\n    var newSts = kb!.statementsMatching(undefined, undefined, undefined, target as NamedNode)\n\n    // If an IndexedFormula, use the namespaces from the given graph as suggestions\n    if ('namespaces' in kb) {\n      sz.suggestNamespaces( (kb as IndexedFormula).namespaces);\n    }\n\n    // use the provided options.namespaces are mandatory prefixes\n    if (opts.namespaces) {\n      sz.setNamespaces( opts.namespaces);\n    }\n\n    sz.setBase(base)\n    switch (contentType) {\n      case RDFXMLContentType:\n        documentString = sz.statementsToXML(newSts)\n        return executeCallback(null, documentString)\n      case N3ContentType:\n      case N3LegacyContentType:\n        documentString = sz.statementsToN3(newSts)\n        return executeCallback(null, documentString)\n      case TurtleContentType:\n      case TurtleLegacyContentType:\n        // Suppress = for sameAs and => for implies; preserve any user-specified flags (e.g., 'o')\n        sz.setFlags('si' + (opts.flags ? (' ' + opts.flags) : ''))\n        documentString = sz.statementsToN3(newSts)\n        return executeCallback(null, documentString)\n      case NTriplesContentType:\n        sz.setFlags('deinprstux') // Suppress nice parts of N3 to make ntriples\n        documentString = sz.statementsToNTriples(newSts)\n        return executeCallback(null, documentString)\n      case JSONLDContentType:\n        // turtle + dr (means no default, no relative prefix); preserve user flags\n        sz.setFlags('si dr' + (opts.flags ? (' ' + opts.flags) : ''))\n        documentString = sz.statementsToJsonld(newSts) // convert via turtle\n        return executeCallback(null, documentString)\n      case NQuadsContentType:\n      case NQuadsAltContentType: // @@@ just outpout the quads? Does not work for collections\n        sz.setFlags('deinprstux q') // Suppress nice parts of N3 to make ntriples\n        documentString = sz.statementsToNTriples(newSts) // q in flag means actually quads\n        return executeCallback(null, documentString)\n      default:\n        throw new Error('Serialize: Content-type ' + contentType + ' not supported for data write.')\n    }\n  } catch (err) {\n    if (callback) {\n      // @ts-ignore\n      return callback(err, undefined)\n    }\n    throw err // Don't hide problems from caller in sync mode\n  }\n\n  function executeCallback (err: Error | null | undefined, result: string | undefined): string | undefined {\n    if (callback) {\n      callback(err, result)\n      return\n    } else {\n      return result as string\n    }\n  }\n}\n","import Fetcher from './fetcher'\nimport log from './log'\nimport { docpart } from './uri'\nimport { string_startswith } from './utils-js'\nimport { RdfJsDataFactory, Quad, Quad_Subject, Term } from './tf-types'\n\n/** RDF/JS spec Typeguards */\n\n/**\n * Loads ontologies of the data we load (this is the callback from the kb to\n * the fetcher).\n */\nexport function AJAR_handleNewTerm (kb: { fetcher: Fetcher }, p, requestedBy) {\n  var sf: Fetcher | null = null\n  if (typeof kb.fetcher !== 'undefined') {\n    sf = kb.fetcher\n  } else {\n    return\n  }\n  if (p.termType !== 'NamedNode') return\n  var docuri = docpart(p.uri)\n  var fixuri\n  if (p.uri.indexOf('#') < 0) { // No hash\n    // @@ major hack for dbpedia Categories, which spread indefinitely\n    if (string_startswith(p.uri, 'http://dbpedia.org/resource/Category:')) return\n\n    /*\n      if (string_startswith(p.uri, 'http://xmlns.com/foaf/0.1/')) {\n      fixuri = \"http://dig.csail.mit.edu/2005/ajar/ajaw/test/foaf\"\n      // should give HTTP 303 to ontology -- now is :-)\n      } else\n    */\n    if (string_startswith(p.uri,\n            'http://purl.org/dc/elements/1.1/') ||\n          string_startswith(p.uri, 'http://purl.org/dc/terms/')) {\n      fixuri = 'http://dublincore.org/2005/06/13/dcq'\n    // dc fetched multiple times\n    } else if (string_startswith(p.uri, 'http://xmlns.com/wot/0.1/')) {\n      fixuri = 'http://xmlns.com/wot/0.1/index.rdf'\n    } else if (string_startswith(p.uri, 'http://web.resource.org/cc/')) {\n      //            log.warn(\"creative commons links to html instead of rdf. doesn't seem to content-negotiate.\")\n      fixuri = 'http://web.resource.org/cc/schema.rdf'\n    }\n  }\n  if (fixuri) {\n    docuri = fixuri\n  }\n  if (sf && (sf as Fetcher).getState(docuri) !== 'unrequested') return\n\n  if (fixuri) { // only give warning once: else happens too often\n    log.warn('Assuming server still broken, faking redirect of <' + p.uri +\n      '> to <' + docuri + '>')\n  }\n\n  return (sf as any).fetch(docuri, { referringTerm: requestedBy })\n}\n\nexport const appliedFactoryMethods = [\n  'blankNode',\n  'defaultGraph',\n  'literal',\n  'namedNode',\n  'quad',\n  'variable',\n  'supports',\n]\n\nconst rdf = {\n  first: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#first',\n  rest: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#rest',\n  nil: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil'\n}\n\n/**\n * Expands an array of Terms to a set of statements representing the rdf:list.\n * @param rdfFactory - The factory to use\n * @param subject - The iri of the first list item.\n * @param data - The terms to expand into the list.\n * @return The {data} as a set of statements.\n */\nexport function arrayToStatements(\n  rdfFactory: RdfJsDataFactory,\n  subject: Quad_Subject,\n  data: Term[]\n): Quad[] {\n  const statements: Quad[] = []\n\n  data.reduce<Quad_Subject>((id, _listObj, i, listData) => {\n    statements.push(rdfFactory.quad(id, rdfFactory.namedNode(rdf.first), listData[i]))\n\n    let nextNode\n    if (i < listData.length - 1) {\n      nextNode = rdfFactory.blankNode()\n      statements.push(rdfFactory.quad(id, rdfFactory.namedNode(rdf.rest), nextNode))\n    } else {\n      statements.push(rdfFactory.quad(id, rdfFactory.namedNode(rdf.rest), rdfFactory.namedNode(rdf.nil)))\n    }\n\n    return nextNode\n  }, subject)\n\n  return statements\n}\n\nexport function ArrayIndexOf (arr, item, i: number = 0) {\n  var length = arr.length\n  if (i < 0) i = length + i\n  for (; i < length; i++) {\n    if (arr[i] === item) {\n      return i\n    }\n  }\n  return -1\n}\n","import ClassOrder from './class-order'\nimport Collection from './collection'\nimport CanonicalDataFactory from './factories/canonical-data-factory'\nimport log from './log'\nimport RDFlibNamedNode from './named-node'\nimport Namespace from './namespace'\nimport Node from './node-internal'\nimport serialize from './serialize'\nimport Statement from './statement'\nimport {\n  Bindings,\n  GraphTermType,\n} from './types'\nimport { isStatement } from './utils/terms'\nimport Variable from './variable'\nimport {\n  Indexable,\n  TFIDFactoryTypes,\n} from './factories/factory-types'\nimport { appliedFactoryMethods, arrayToStatements } from './utils'\nimport {\n  RdfJsDataFactory,\n  Quad_Graph,\n  Quad_Object,\n  Quad_Predicate,\n  Quad,\n  Quad_Subject,\n  Term,\n} from './tf-types'\nimport type Fetcher from './fetcher'\nimport BlankNode from './blank-node'\nimport NamedNode from './named-node'\n\nexport interface FormulaOpts {\n  dataCallback?: (q: Quad) => void\n  dataRemovalCallback?: (q: Quad) => void;\n  rdfArrayRemove?: (arr: Quad[], q: Quad) => void\n  rdfFactory?: RdfJsDataFactory\n}\n\ninterface BooleanMap {\n  [uri: string]: boolean;\n}\n\ninterface MembersMap {\n  [uri: string]: Quad;\n}\n\ninterface UriMap {\n  [uri: string]: string;\n}\n\n/**\n * A formula, or store of RDF statements\n */\nexport default class Formula extends Node {\n  termType: typeof GraphTermType = GraphTermType\n\n  classOrder = ClassOrder.Graph\n\n  /**\n   * The accompanying fetcher instance.\n   *\n   * Is set by the fetcher when initialized.\n   */\n  fetcher?: Fetcher\n\n  isVar = 0\n\n  /**\n   * A namespace for the specified namespace's URI\n   * @param nsuri The URI for the namespace\n   */\n  ns = Namespace\n\n  /** The factory used to generate statements and terms */\n  rdfFactory: any\n\n  /**\n   * Initializes this formula\n   * @constructor\n   * @param statements - Initial array of statements\n   * @param constraints - initial array of constraints\n   * @param initBindings - initial bindings used in Query\n   * @param optional - optional\n   * @param opts\n   * @param opts.rdfFactory - The rdf factory that should be used by the store\n*/\n  constructor (\n    public statements: Array<Statement> = [],\n    public constraints: ReadonlyArray<any> = [],\n    public initBindings: ReadonlyArray<any> = [],\n    public optional: ReadonlyArray<any> = [],\n    opts: FormulaOpts = {}\n    ) {\n    super('')\n\n    this.rdfFactory = (opts && opts.rdfFactory) || CanonicalDataFactory\n    // Enable default factory methods on this while preserving factory context.\n    for(const factoryMethod of appliedFactoryMethods) {\n      this[factoryMethod] = (...args) => this.rdfFactory[factoryMethod](...args)\n    }\n  }\n\n  /** Add a statement from its parts\n   * @param subject - the first part of the statement\n   * @param predicate - the second part of the statement\n   * @param object - the third part of the statement\n   * @param graph - the last part of the statement\n   */\n  add (\n    subject: Quad_Subject | Quad | Quad[],\n    predicate?: Quad_Predicate,\n    object?: Term | string,\n    graph?: Quad_Graph\n  ): Statement | null | this | number {\n    if (arguments.length === 1) {\n      (subject as Quad[]).forEach(st => this.add(st.subject, st.predicate, st.object, st.graph))\n    }\n    return this.statements.push(this.rdfFactory.quad(subject, predicate, object, graph))\n  }\n\n  /** Add a statment object\n   * @param {Statement} statement - An existing constructed statement to add\n   */\n  addStatement (statement: Quad): Statement | null | this | number {\n    return this.add(statement)\n  }\n\n  /**\n   * Shortcut for adding blankNodes\n   * @param [id]\n   */\n  bnode (id?: string): BlankNode {\n    return this.rdfFactory.blankNode(id)\n  }\n\n  /**\n   * Adds all the statements to this formula\n   * @param statements - A collection of statements\n   */\n  addAll (statements: Quad[]): void {\n    statements.forEach(quad => {\n      this.add(quad.subject, quad.predicate, quad.object, quad.graph)\n    })\n  }\n\n  /** Follow link from one node, using one wildcard, looking for one\n  *\n  * For example, any(me, knows, null, profile)  - a person I know accoring to my profile .\n  * any(me, knows, null, null)  - a person I know accoring to anything in store .\n  * any(null, knows, me, null)  - a person who know me accoring to anything in store .\n  *\n  * @param s - A node to search for as subject, or if null, a wildcard\n  * @param p - A node to search for as predicate, or if null, a wildcard\n  * @param o - A node to search for as object, or if null, a wildcard\n  * @param g - A node to search for as graph, or if null, a wildcard\n  * @returns A node which match the wildcard position, or null\n  */\n  any(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): Node | null {\n    const st = this.anyStatementMatching(s, p, o, g)\n    if (st == null) {\n      return null\n    } else if (s == null) {\n      return st.subject\n    } else if (p == null) {\n      return st.predicate\n    } else if (o == null) {\n      return st.object\n    }\n\n    return null\n  }\n\n  /**\n   * Gets the value of a node that matches the specified pattern\n   * @param s The subject\n   * @param p The predicate\n   * @param o The object\n   * @param g The graph that contains the statement\n   */\n  anyValue(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): string | void {\n    const y = this.any(s, p, o, g)\n    return y ? y.value : void 0\n  }\n\n  /**\n   * Gets the first JavaScript object equivalent to a node based on the specified pattern\n   * @param s The subject\n   * @param p The predicate\n   * @param o The object\n   * @param g The graph that contains the statement\n   */\n  anyJS(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): any {\n    const y = this.any(s, p, o, g)\n    return y ? Node.toJS(y) : void 0\n  }\n\n  /**\n   * Gets the first statement that matches the specified pattern\n   */\n  anyStatementMatching(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): Statement | undefined {\n    let x = this.statementsMatching(s, p, o, g, true)\n    if (!x || x.length === 0) {\n      return undefined\n    }\n\n    return x[0]\n  }\n\n  /**\n   * Returns a unique index-safe identifier for the given term.\n   *\n   * Falls back to the rdflib hashString implementation if the given factory doesn't support id.\n   */\n  id (term: TFIDFactoryTypes): Indexable {\n    return this.rdfFactory.id(term)\n  }\n\n  /**\n   * Search the Store\n   * This is really a teaching method as to do this properly you would use IndexedFormula\n   *\n   * @param s - A node to search for as subject, or if null, a wildcard\n   * @param p - A node to search for as predicate, or if null, a wildcard\n   * @param o - A node to search for as object, or if null, a wildcard\n   * @param g - A node to search for as graph, or if null, a wildcard\n   * @param justOne - flag - stop when found one rather than get all of them?\n   * @returns {Array<Node>} - An array of nodes which match the wildcard position\n   */\n  statementsMatching<JustOne extends boolean = false>(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null,\n    justOne?: boolean\n  ): Statement[] {\n    const sts = this.statements.filter(st =>\n      (!s || s.equals(st.subject)) &&\n      (!p || p.equals(st.predicate)) &&\n      (!o || o.equals(st.object)) &&\n      (!g || g.equals(st.graph))\n    )\n\n    if (justOne) {\n      return sts.length === 0 ? [] : [sts[0]]\n    }\n\n    return sts\n  }\n\n  /**\n   * Finds the types in the list which have no *stored* subtypes\n   * These are a set of classes which provide by themselves complete\n   * information -- the other classes are redundant for those who\n   * know the class DAG.\n   * @param types A map of the types\n   */\n  bottomTypeURIs (types) {\n    let bots\n    let bottom\n    let elt\n    let i\n    let len\n    let ref\n    let subs\n    let v\n    bots = []\n    for (let k in types) {\n      if (!types.hasOwnProperty(k)) continue\n      v = types[k]\n      subs = this.each(\n        void 0,\n        this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#subClassOf'),\n        this.rdfFactory.namedNode(k)\n      )\n      bottom = true\n      i = 0\n      for (len = subs.length; i < len; i++) {\n        elt = subs[i]\n        ref = elt.uri\n        if (ref in types) { // the subclass is one we know\n          bottom = false\n          break\n        }\n      }\n      if (bottom) {\n        bots[k] = v\n      }\n    }\n    return bots\n  }\n\n  /** Creates a new collection */\n  collection (): Collection {\n    return new Collection()\n  }\n\n  /** Follow links from one node, using one wildcard.\n  *\n  * For example, each(me, knows, null, profile)  - people I know accoring to my profile .\n  * each(me, knows, null, null)  - people I know accoring to anything in store .\n  * each(null, knows, me, null)  - people who know me accoring to anything in store .\n  *\n  * @param s - A node to search for as subject, or if null, a wildcard\n  * @param p - A node to search for as predicate, or if null, a wildcard\n  * @param o - A node to search for as object, or if null, a wildcard\n  * @param g - A node to search for as graph, or if null, a wildcard\n  * @returns {Array<Node>} - An array of nodes which match the wildcard position\n  */\n  each(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): Node[] {\n    const results: Node[] = []\n    let sts = this.statementsMatching(s, p, o, g, false)\n    if (s == null) {\n      for (let i = 0, len = sts.length; i < len; i++) {\n        results.push(sts[i].subject)\n      }\n    } else if (p == null) {\n      for (let l = 0, len1 = sts.length; l < len1; l++) {\n        results.push(sts[l].predicate)\n      }\n    } else if (o == null) {\n      for (let m = 0, len2 = sts.length; m < len2; m++) {\n        results.push(sts[m].object)\n      }\n    } else if (g == null) {\n      for (let q = 0, len3 = sts.length; q < len3; q++) {\n        results.push(new NamedNode(sts[q].graph.value))\n      }\n    }\n\n    return results\n  }\n\n  /**\n   * Test whether this formula is equals to {other}\n   * @param other - The other formula\n   */\n  equals(other: Formula): boolean {\n    if (!other) {\n      return false\n    }\n    return this.hashString() === other.hashString()\n  }\n\n  /**\n   * For thisClass or any subclass, anything which has it is its type\n   * or is the object of something which has the type as its range, or subject\n   * of something which has the type as its domain\n   * We don't bother doing subproperty (yet?)as it doesn't seeem to be used\n   * much.\n   * Get all the Classes of which we can RDFS-infer the subject is a member\n   * @return a hash of URIs\n   */\n  findMembersNT (thisClass) {\n    let len2: number\n    let len4: number\n    let m: number\n    let members: MembersMap\n    let pred: Quad_Predicate\n    let ref\n    let ref1: Quad[]\n    let ref2: Term[]\n    let ref3: Quad[]\n    let ref4: Term[]\n    let ref5: Quad[]\n    let seeds\n    let st\n    let u: number\n    seeds = {}\n    seeds[thisClass.toNT()] = true\n    members = {}\n    ref = this.transitiveClosure(seeds, this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#subClassOf'), true)\n    for (let t in ref) {\n      if (!ref.hasOwnProperty(t)) continue\n      ref1 = this.statementsMatching(void 0,\n        this.rdfFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'),\n        this.fromNT(t))\n      for (let i = 0, len = ref1.length; i < len; i++) {\n        st = ref1[i]\n        members[st.subject.toNT()] = st\n      }\n      ref2 = this.each(void 0,\n        this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#domain'),\n        this.fromNT(t))\n      for (let l = 0, len1 = ref2.length; l < len1; l++) {\n        pred = ref2[l] as Quad_Predicate\n        ref3 = this.statementsMatching(void 0, pred)\n        for (m = 0, len2 = ref3.length; m < len2; m++) {\n          st = ref3[m]\n          members[st.subject.toNT()] = st\n        }\n      }\n      ref4 = this.each(void 0,\n        this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#range'),\n        this.fromNT(t))\n      for (let q = 0, len3 = ref4.length; q < len3; q++) {\n        pred = ref4[q] as Quad_Predicate\n        ref5 = this.statementsMatching(void 0, pred)\n        for (u = 0, len4 = ref5.length; u < len4; u++) {\n          st = ref5[u]\n          members[st.object.toNT()] = st\n        }\n      }\n    }\n\n    return members\n  }\n\n  /**\n   * For thisClass or any subclass, anything which has it is its type\n   * or is the object of something which has the type as its range, or subject\n   * of something which has the type as its domain\n   * We don't bother doing subproperty (yet?)as it doesn't seeem to be used\n   * much.\n   * Get all the Classes of which we can RDFS-infer the subject is a member\n   * @param subject - A named node\n   */\n  findMemberURIs(subject: Node): UriMap {\n    return this.NTtoURI(this.findMembersNT(subject))\n  }\n\n  /**\n   * Get all the Classes of which we can RDFS-infer the subject is a superclass\n   * Returns a hash table where key is NT of type and value is statement why we\n   * think so.\n   * Does NOT return terms, returns URI strings.\n   * We use NT representations in this version because they handle blank nodes.\n   */\n  findSubClassesNT(subject: Node): { [uri: string]: boolean } {\n    let types = {}\n    types[subject.toNT()] = true\n    return this.transitiveClosure(\n      types,\n      this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#subClassOf'),\n      true\n    )\n  }\n\n  /**\n   * Get all the Classes of which we can RDFS-infer the subject is a subclass\n   * @param {RDFlibNamedNode} subject - The thing whose classes are to be found\n   * @returns a hash table where key is NT of type and value is statement why we\n   * think so.\n   * Does NOT return terms, returns URI strings.\n   * We use NT representations in this version because they handle blank nodes.\n   */\n  findSuperClassesNT(subject: Node): { [uri: string]: boolean } {\n    let types = {}\n    types[subject.toNT()] = true\n    return this.transitiveClosure(types,\n      this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#subClassOf'), false)\n  }\n\n  /**\n   * Get all the Classes of which we can RDFS-infer the subject is a member\n   * todo: This will loop is there is a class subclass loop (Sublass loops are\n   * not illegal)\n   * @param {RDFlibNamedNode} subject - The thing whose classes are to be found\n   * @returns a hash table where key is NT of type and value is statement why we think so.\n   * Does NOT return terms, returns URI strings.\n   * We use NT representations in this version because they handle blank nodes.\n   */\n  findTypesNT (subject) {\n    let domain\n    let range\n    let rdftype\n    let ref\n    let ref1\n    let ref2\n    let ref3\n    let st\n    let types\n    rdftype = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'\n    types = []\n    ref = this.statementsMatching(subject, void 0, void 0)\n    for (let i = 0, len = ref.length; i < len; i++) {\n      st = ref[i]\n      if (st.predicate.uri === rdftype) {\n        types[st.object.toNT()] = st\n      } else {\n        ref1 = this.each(\n          st.predicate,\n          this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#domain')\n        )\n        for (let l = 0, len1 = ref1.length; l < len1; l++) {\n          range = ref1[l]\n          types[range.toNT()] = st\n        }\n      }\n    }\n    ref2 = this.statementsMatching(void 0, void 0, subject)\n    for (let m = 0, len2 = ref2.length; m < len2; m++) {\n      st = ref2[m]\n      ref3 = this.each(\n        st.predicate,\n        this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#range')\n      )\n      for (let q = 0, len3 = ref3.length; q < len3; q++) {\n        domain = ref3[q]\n        types[domain.toNT()] = st\n      }\n    }\n    return this.transitiveClosure(\n      types,\n      this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#subClassOf'),\n      false\n    )\n  }\n\n  /**\n   * Get all the Classes of which we can RDFS-infer the subject is a member\n   * todo: This will loop is there is a class subclass loop (Sublass loops are\n   * not illegal)\n   * Returns a hash table where key is NT of type and value is statement why we\n   * think so.\n   * Does NOT return terms, returns URI strings.\n   * We use NT representations in this version because they handle blank nodes.\n   * @param subject - A subject node\n   */\n  findTypeURIs(subject: Quad_Subject): UriMap {\n    return this.NTtoURI(this.findTypesNT(subject))\n  }\n\n  /** Trace statements which connect directly, or through bnodes\n   *\n   * @param subject - The node to start looking for statments\n   * @param doc - The document to be searched, or null to search all documents\n   * @returns an array of statements, duplicate statements are suppresssed.\n   */\n  connectedStatements(\n    subject: Quad_Subject,\n    doc: Quad_Graph,\n    excludePredicateURIs?: ReadonlyArray<string>\n  ): Statement[] {\n    excludePredicateURIs = excludePredicateURIs || []\n    let todo = [subject]\n    let done: { [k: string]: boolean } = {}\n    let doneArcs: { [k: string]: boolean }  = {}\n    let result: Statement[] = []\n    let self = this\n    let follow = function (x) {\n      let queue = function (x) {\n        if (x.termType === 'BlankNode' && !done[x.value]) {\n          done[x.value] = true\n          todo.push(x)\n        }\n      }\n      let sts = self.statementsMatching(null, null, x, doc)\n        .concat(self.statementsMatching(x, null, null, doc))\n      sts = sts.filter(function (st): boolean {\n        if (excludePredicateURIs![st.predicate.value]) return false\n        let hash = (st as Statement).toNT()\n        if (doneArcs[hash]) return false\n        doneArcs[hash] = true\n        return true\n      }\n      )\n      sts.forEach(function (st) {\n        queue(st.subject)\n        queue(st.object)\n      })\n      result = result.concat(sts)\n    }\n    while (todo.length) {\n      follow(todo.shift())\n    }\n    return result\n  }\n\n  /**\n   * Creates a new empty formula\n   *\n   * @param _features - Not applicable, but necessary for typing to pass\n   */\n  formula(_features?: ReadonlyArray<string>): Formula {\n    return new Formula()\n  }\n\n  /**\n   * Transforms an NTriples string format into a Node.\n   * The blank node bit should not be used on program-external values; designed\n   * for internal work such as storing a blank node id in an HTML attribute.\n   * This will only parse the strings generated by the various toNT() methods.\n   */\n  fromNT (str) {\n    let dt, k, lang\n    switch (str[0]) {\n      case '<':\n        return this.sym(str.slice(1, -1))\n      case '\"':\n        lang = void 0\n        dt = void 0\n        k = str.lastIndexOf('\"')\n        if (k < str.length - 1) {\n          if (str[k + 1] === '@') {\n            lang = str.slice(k + 2)\n          } else if (str.slice(k + 1, k + 3) === '^^') {\n            dt = this.fromNT(str.slice(k + 3))\n          } else {\n            throw new Error(\"Can't convert string from NT: \" + str)\n          }\n        }\n        str = str.slice(1, k)\n        str = str.replace(/\\\\\"/g, '\"')\n        str = str.replace(/\\\\n/g, '\\n')\n        str = str.replace(/\\\\\\\\/g, '\\\\')\n        return this.rdfFactory.literal(str, lang || dt)\n      case '_':\n        return this.rdfFactory.blankNode(str.slice(2))\n      case '?':\n        return new Variable(str.slice(1))\n    }\n    throw new Error(\"Can't convert from NT: \" + str)\n  }\n\n  /** Returns true if this formula holds the specified statement(s) */\n  holds (s: any | any[], p?, o?, g?): boolean {\n    let i\n    if (arguments.length === 1) {\n      if (!s) {\n        return true\n      }\n      if (s instanceof Array) {\n        for (i = 0; i < s.length; i++) {\n          if (!this.holds(s[i])) {\n            return false\n          }\n        }\n        return true\n      } else if (isStatement(s)) {\n        return this.holds(s.subject, s.predicate, s.object, s.graph)\n      } else if (s.statements) {\n        return this.holds(s.statements)\n      }\n    }\n\n    let st = this.anyStatementMatching(s, p, o, g)\n    return st != null\n  }\n\n  /**\n   * Returns true if this formula holds the specified {statement}\n   */\n  holdsStatement (statement) {\n    return this.holds(\n      statement.subject,\n      statement.predicate,\n      statement.object,\n      statement.graph,\n    )\n  }\n\n  /**\n   * Used by the n3parser to generate list elements\n   * @param values - The values of the collection\n   * @param context - The store\n   * @return {BlankNode|Collection} - The term for the statement\n   */\n  list (values, context) {\n    if (context.rdfFactory.supports[\"COLLECTIONS\"]) {\n      const collection = context.rdfFactory.collection()\n      values.forEach(function (val) {\n        collection.append(val)\n      })\n      return collection\n    } else {\n      const node = context.rdfFactory.blankNode()\n      const statements = arrayToStatements(context.rdfFactory, node, values)\n      context.addAll(statements)\n      return node\n    }\n  }\n\n  /**\n   * Transform a collection of NTriple URIs into their URI strings\n   * @param t - Some iterable collection of NTriple URI strings\n   * @return A collection of the URIs as strings\n   * todo: explain why it is important to go through NT\n   */\n  NTtoURI (t) {\n    let k, v\n    let uris = {}\n    for (k in t) {\n      if (!t.hasOwnProperty(k)) continue\n      v = t[k]\n      if (k[0] === '<') {\n        uris[k.slice(1, -1)] = v\n      }\n    }\n    return uris\n  }\n\n  /**\n   * Serializes this formula\n   * @param base - The base string\n   * @param contentType - The content type of the syntax to use\n   * @param provenance - The provenance URI\n   * @param options  - options to pass to the serializer, as defined in serialize method\n   */\n  serialize (base, contentType, provenance, options?) {\n    // delegate the graph serialization to the implementation in ./serialize\n    return serialize(provenance, this, base, contentType, undefined, options);\n  }\n\n  /**\n   * Creates a new formula with the substituting bindings applied\n   * @param bindings - The bindings to substitute\n   */\n  substitute<T extends Node = Formula>(bindings: Bindings): T {\n    let statementsCopy = this.statements.map(function (ea) {\n      return (ea as Statement).substitute(bindings)\n    })\n    // console.log('Formula subs statmnts:' + statementsCopy)\n    const y = new Formula()\n    y.addAll(statementsCopy as Quad[])\n    // console.log('indexed-form subs formula:' + y)\n    return y as unknown as T\n  }\n\n  sym (uri: string, name?): NamedNode {\n    if (name) {\n      throw new Error('This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.')\n    }\n    return this.rdfFactory.namedNode(uri)\n  }\n\n  /**\n   * Gets the node matching the specified pattern. Throws when no match could be made.\n   * @param s - The subject\n   * @param p - The predicate\n   * @param o - The object\n   * @param g - The graph that contains the statement\n   */\n  the (\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): Node | null | undefined {\n    let x = this.any(s, p, o, g)\n    if (x == null) {\n      log.error('No value found for the() {' + s + ' ' + p + ' ' + o + '}.')\n    }\n\n    return x\n  }\n\n  /**\n   * RDFS Inference\n   * These are hand-written implementations of a backward-chaining reasoner\n   * over the RDFS axioms.\n   * @param seeds - A hash of NTs of classes to start with\n   * @param predicate - The property to trace though\n   * @param inverse - Trace inverse direction\n   */\n  transitiveClosure(\n    seeds: BooleanMap,\n    predicate: Quad_Predicate,\n    inverse?: boolean\n  ): {\n    [uri: string]: boolean;\n  } {\n    let elt, i, len, s, sups, t\n    let agenda = {}\n    Object.assign(agenda, seeds)  // make a copy\n    let done = {}  // classes we have looked up\n    while (true) {\n      t = (function () {\n        for (let p in agenda) {\n          if (!agenda.hasOwnProperty(p)) continue\n          return p\n        }\n      })()\n      if (t == null) {\n        return done\n      }\n      sups = inverse ?\n        this.each(void 0, predicate, this.fromNT(t))\n        : this.each(this.fromNT(t) as Quad_Predicate, predicate)\n      for (i = 0, len = sups.length; i < len; i++) {\n        elt = sups[i]\n        s = elt.toNT()\n        if (s in done) {\n          continue\n        }\n        if (s in agenda) {\n          continue\n        }\n        agenda[s] = agenda[t]\n      }\n      done[t] = agenda[t]\n      delete agenda[t]\n    }\n  }\n\n  /**\n   * Finds the types in the list which have no *stored* supertypes\n   * We exclude the universal class, owl:Things and rdf:Resource, as it is\n   * information-free.\n   * @param types - The types\n   */\n  topTypeURIs(types: {\n    [id: string]: string | RDFlibNamedNode;\n  }): {\n    [id: string]: string | RDFlibNamedNode;\n  } {\n    let i\n    let j\n    let k\n    let len\n    let n\n    let ref\n    let tops\n    let v\n    tops = []\n    for (k in types) {\n      if (!types.hasOwnProperty(k)) continue\n      v = types[k]\n      n = 0\n      ref = this.each(\n        this.rdfFactory.namedNode(k),\n        this.rdfFactory.namedNode('http://www.w3.org/2000/01/rdf-schema#subClassOf')\n      )\n      for (i = 0, len = ref.length; i < len; i++) {\n        j = ref[i]\n        if (j.uri !== 'http://www.w3.org/2000/01/rdf-schema#Resource') {\n          n++\n          break\n        }\n      }\n      if (!n) {\n        tops[k] = v\n      }\n    }\n    if (tops['http://www.w3.org/2000/01/rdf-schema#Resource']) {\n      delete tops['http://www.w3.org/2000/01/rdf-schema#Resource']\n    }\n    if (tops['http://www.w3.org/2002/07/owl#Thing']) {\n      delete tops['http://www.w3.org/2002/07/owl#Thing']\n    }\n    return tops\n  }\n\n  /**\n   * Serializes this formula to a string\n   */\n  toString(): string {\n    return '{' + this.statements.join('\\n') + '}'\n  }\n\n  /**\n   * Gets a new variable\n   * @param name - The variable's name\n   */\n  public variable(name: string): Variable {\n    return new Variable(name)\n  }\n\n  /**\n   * Gets the number of statements in this formula that matches the specified pattern\n   * @param s - The subject\n   * @param p - The predicate\n   * @param o - The object\n   * @param g - The graph that contains the statement\n   */\n  whether(\n    s?: Quad_Subject | null,\n    p?: Quad_Predicate | null,\n    o?: Quad_Object | null,\n    g?: Quad_Graph | null\n  ): number {\n    return this.statementsMatching(s, p, o, g, false).length\n  }\n}\n","// This file attaches all functionality to Node\n// that would otherwise require circular dependencies.\nimport { fromValue } from './collection'\nimport Node from './node-internal'\nimport Namespace from './namespace'\nimport { isCollection, isLiteral } from './utils/terms'\nimport { Term } from './tf-types'\n\n/**\n * Creates an RDF Node from a native javascript value.\n * RDF Nodes are returned unchanged, undefined returned as itself.\n * @method fromValue\n * @static\n * @param value {Node|Date|String|Number|Boolean|Undefined}\n * @return {Node|Collection}\n */\nNode.fromValue = fromValue;\n\nexport default Node\n\nconst ns = { xsd: Namespace('http://www.w3.org/2001/XMLSchema#') }\n\n/**\n * Gets the javascript object equivalent to a node\n * @param term The RDF node\n */\nNode.toJS = function (term: Term): Term | boolean | number | Date | string | any[] {\n  if (isCollection(term)) {\n    return term.elements.map(Node.toJS) // Array node (not standard RDFJS)\n  }\n  if (!isLiteral(term)) return term\n  if (term.datatype.equals(ns.xsd('boolean'))) {\n    return term.value === '1' || term.value === 'true'\n  }\n  if (term.datatype.equals(ns.xsd('dateTime')) ||\n    term.datatype.equals(ns.xsd('date'))) {\n    return new Date(term.value)\n  }\n  if (\n    term.datatype.equals(ns.xsd('integer')) ||\n    term.datatype.equals(ns.xsd('float')) ||\n    term.datatype.equals(ns.xsd('decimal'))\n  ) {\n    return Number(term.value)\n  }\n  return term.value\n}\n","// Matching a formula against another formula\n// Assync as well as Synchronously\n//\n// W3C open source licence 2005.\n//\n// This builds on term.js, match.js (and identity.js?)\n// to allow a query of a formula.\n//\n// Here we introduce for the first time a subclass of term: variable.\n//\n// SVN ID: $Id: query.js 25116 2008-11-15 16:13:48Z timbl $\n\n//  Variable\n//\n// Compare with BlankNode.  They are similar, but a variable\n// stands for something whose value is to be returned.\n// Also, users name variables and want the same name back when stuff is printed\n/* jsl:option explicit */ // Turn on JavaScriptLint variable declaration checking\n\nimport IndexedFormula  from './store'\nimport { defaultGraphURI as defaultDocumentURI } from './utils/default-graph-uri'\nimport log from './log'\nimport { docpart } from './uri'\n\n/**\n * Query class, for tracking queries the user has in the UI.\n */\nexport class Query {\n  constructor (name, id) {\n    this.pat = new IndexedFormula() // The pattern to search for\n    this.vars = [] // Used by UI code but not in query.js\n    //    this.orderBy = [] // Not used yet\n    this.name = name\n    this.id = id\n  }\n}\n\n/**\n * This function will match a pattern to the current Store\n *\n * The callback function is called whenever a match is found\n * When fetcher is supplied this will be called to load from the web\n * any new nodes as they are discovered.  This will cause the query to traverse the\n * graph of linked data, sometimes called \"Link Following Query\"\n *\n * @param myQuery - a knowledgebase containing a pattern to use as query\n * @param callback - whenever the pattern in myQuery is met this is called with\n *  the new bindings as parameter\n * @param fetcher? - If and only if,  you want link following, give a fetcher\n *                which has been created for the quadstore being queried.\n * @param onDone -  callback when query finished\n */\nexport function indexedFormulaQuery (myQuery, callback, fetcher, onDone) {\n  /** Debug strings\n  */\n  function bindingDebug (b) {\n    var str = ''\n    var v\n    for (v in b) {\n      if (b.hasOwnProperty(v)) {\n        str += '    ' + v + ' -> ' + b[v]\n      }\n    }\n    return str\n  }\n\n  function bindingsDebug (nbs) {\n    var str = 'Bindings: '\n    var i\n    var n = nbs.length\n    for (i = 0; i < n; i++) {\n      str += bindingDebug(nbs[i][0]) + ';\\n\\t'\n    }\n    return str\n  } // bindingsDebug\n\n  /** Unification\n   *\n   * Unification finds all bindings such that when the binding is applied\n   * to one term it is equal to the other.\n   * @returns {Arrray}-  a list of bindings, where a binding is an associative array\n   *  mapping variuable to value.\n   */\n  function unifyTerm (self, other, bindings, formula) {\n    var actual = bindings[self]\n    if (actual === undefined) { // Not mapped\n      if (self.isVar) {\n        var b = []\n        b[self] = other\n        return [[ b, null ]] // Match\n      }\n      actual = self\n    }\n    if (!actual.complexType) {\n      if (formula.redirections[actual]) {\n        actual = formula.redirections[actual]\n      }\n      if (formula.redirections[other]) {\n        other = formula.redirections[other]\n      }\n      if (actual.equals(other) || (actual.uri && actual.uri === defaultDocumentURI)) { // Used to mean 'any graph' in a query\n        return [[ [], null ]]\n      }\n      return []\n    }\n    if (self instanceof Array) {\n      if (!(other instanceof Array)) {\n        return []\n      }\n      return unifyContents(self, other, bindings)\n    }\n    throw new Error('query.js: oops - code not written yet')\n  // return undefined;  // for lint - no jslint objects to unreachables\n  //    return actual.unifyContents(other, bindings)\n  } // unifyTerm\n\n  function unifyContents (self, other, bindings, formula) {\n    var nbs2\n    if (self.length !== other.length) {\n      return [] // no way\n    }\n    if (!self.length) {\n      return [[ [], null ]] // Success\n    }\n    var nbs = unifyTerm(self[0], other[0], bindings, formula)\n    if (nbs.length === 0) {\n      return nbs\n    }\n    var res = []\n    var i\n    var n = nbs.length\n    var nb\n    var j\n    var m\n    var v\n    var nb2\n    var bindings2\n    for (i = 0; i < n; i++) { // for each possibility from the first term\n      nb = nbs[i][0] // new bindings\n      bindings2 = []\n      for (v in nb) {\n        if (nb.hasOwnProperty(v)) {\n          bindings2[v] = nb[v] // copy\n        }\n      }\n      for (v in bindings) {\n        if (bindings.hasOwnProperty(v)) {\n          bindings2[v] = bindings[v] // copy\n        }\n      }\n      nbs2 = unifyContents(self.slice(1), other.slice(1), bindings2, formula)\n      m = nbs2.length\n      for (j = 0; j < m; j++) {\n        nb2 = nbs2[j][0] // @@@@ no idea whether this is used or right\n        for (v in nb) {\n          if (nb.hasOwnProperty(v)) {\n            nb2[v] = nb[v]\n          }\n        }\n        res.push([nb2, null])\n      }\n    }\n    return res\n  } // unifyContents\n\n  //  Matching\n  //\n  // Matching finds all bindings such that when the binding is applied\n  // to one term it is equal to the other term.  We only match formulae.\n\n  /** if x is not in the bindings array, return the var; otherwise, return the bindings **/\n  function bind (x, binding) {\n    var y = binding[x]\n    if (y === undefined) {\n      return x\n    }\n    return y\n  }\n\n  // When there are OPTIONAL clauses, we must return bindings without them if none of them\n  // succeed. However, if any of them do succeed, we should not.  (This is what branchCount()\n  // tracked. The problem currently is (2011/7) that when several optionals exist, and they\n  // all match, multiple sets of bindings are returned, each with one optional filled in.)\n\n  function union (a, b) {\n    var c = {}\n    var x\n    for (x in a) {\n      if (a.hasOwnProperty(x)) {\n        c[x] = a[x]\n      }\n    }\n    for (x in b) {\n      if (b.hasOwnProperty(x)) {\n        c[x] = b[x]\n      }\n    }\n    return c\n  }\n\n  function OptionalBranchJunction (originalCallback, trunkBindings) {\n    this.trunkBindings = trunkBindings\n    this.originalCallback = originalCallback\n    this.branches = []\n    // this.results = []; // result[i] is an array of bindings for branch i\n    // this.done = {};  // done[i] means all/any results are in for branch i\n    // this.count = {}\n    return this\n  }\n\n  OptionalBranchJunction.prototype.checkAllDone = function () {\n    var i\n    for (i = 0; i < this.branches.length; i++) {\n      if (!this.branches[i].done) {\n        return\n      }\n    }\n    log.debug('OPTIONAL BIDNINGS ALL DONE:')\n    this.doCallBacks(this.branches.length - 1, this.trunkBindings)\n  }\n  // Recrursively generate the cross product of the bindings\n  OptionalBranchJunction.prototype.doCallBacks = function (b, bindings) {\n    var j\n    if (b < 0) {\n      return this.originalCallback(bindings)\n    }\n    for (j = 0; j < this.branches[b].results.length; j++) {\n      this.doCallBacks(b - 1, union(bindings, this.branches[b].results[j]))\n    }\n  }\n\n  // A mandatory branch is the normal one, where callbacks\n  // are made immediately and no junction is needed.\n  // Might be useful for onFinsihed callback for query API.\n  function MandatoryBranch (callback, onDone) {\n    this.count = 0\n    this.success = false\n    this.done = false\n    // this.results = []\n    this.callback = callback\n    this.onDone = onDone\n    // this.junction = junction\n    // junction.branches.push(this)\n    return this\n  }\n\n  MandatoryBranch.prototype.reportMatch = function (bindings) {\n    // log.error(\"@@@@ query.js 1\"); // @@\n    this.callback(bindings)\n    this.success = true\n  }\n\n  MandatoryBranch.prototype.reportDone = function () {\n    this.done = true\n    log.info('Mandatory query branch finished.***')\n    if (this.onDone !== undefined) {\n      this.onDone()\n    }\n  }\n\n  // An optional branch hoards its results.\n  var OptionalBranch = function (junction) {\n    this.count = 0\n    this.done = false\n    this.results = []\n    this.junction = junction\n    junction.branches.push(this)\n    return this\n  }\n\n  OptionalBranch.prototype.reportMatch = function (bindings) {\n    this.results.push(bindings)\n  }\n\n  OptionalBranch.prototype.reportDone = function () {\n    log.debug('Optional branch finished - results.length = ' + this.results.length)\n    if (this.results.length === 0) { // This is what optional means: if no hits,\n      this.results.push({}) // mimic success, but with no bindings\n      log.debug(\"Optional branch FAILED - that's OK.\")\n    }\n    this.done = true\n    this.junction.checkAllDone()\n  }\n\n  /** prepare -- sets the index of the item to the possible matches\n   * @param f - formula\n   * @param item - an Statement, possibly w/ vars in it\n   * @param bindings - Bindings so far\n   * @returns false if the query fails -- there are no items that match\n  */\n  function prepare (f, item, bindings) {\n    var terms, termIndex, i, ind\n    item.nvars = 0\n    item.index = null\n    // if (!f.statements) log.warn(\"@@@ prepare: f is \"+f)\n    //    log.debug(\"Prepare: f has \"+ f.statements.length)\n    // log.debug(\"Prepare: Kb size \"+f.statements.length+\" Preparing \"+item)\n\n    terms = [item.subject, item.predicate, item.object, item.why]\n    ind = [f.subjectIndex, f.predicateIndex, f.objectIndex, f.whyIndex]\n    for (i = 0; i < 4; i++) {\n      let t = terms[i]\n      // console.log(\"  Prepare (\" + t + \") \"+(t in bindings))\n      if (t.uri && t.uri === defaultDocumentURI) { // chrome:session\n        // console.log('     query: Ignoring slot ' + i)\n      } else if (t.isVar && !(bindings[t] !== undefined)) {\n        item.nvars++\n      } else {\n        t = bind(terms[i], bindings) // returns the RDF binding if bound, otherwise itself\n        // if (terms[i]!=bind(terms[i],bindings) alert(\"Term: \"+terms[i]+\"Binding: \"+bind(terms[i], bindings))\n        if (f.redirections[f.id(t)]) {\n          t = f.redirections[f.id(t)] // redirect\n        }\n        termIndex = ind[i][f.id(t)]\n\n        if (!termIndex) {\n          item.index = []\n          return false // Query line cannot match\n        }\n        if ((item.index === null) || (item.index.length > termIndex.length)) { // Find smallest index\n          item.index = termIndex\n        }\n      }\n    }\n\n    if (item.index === null) { // All 4 are variables?\n      item.index = f.statements\n    }\n    return true\n  } // prepare\n\n  /** sorting function -- negative if self is easier **/\n  // We always prefer to start with a URI to be able to browse a graph\n  // this is why we put off items with more variables till later.\n  function easiestQuery (self, other) {\n    if (self.nvars !== other.nvars) {\n      return self.nvars - other.nvars\n    }\n    return self.index.length - other.index.length\n  }\n\n  var matchIndex = 0 // index\n  /** matches a pattern formula against the knowledge base, e.g. to find matches for table-view\n  *\n  * @param f - knowledge base formula\n  * @param g - pattern formula (may have vars)\n  * @param bindingsSoFar  - bindings accumulated in matching to date\n  * @param level - spaces to indent stuff also lets you know what level of recursion you're at\n  * @param fetcher - function (term, requestedBy) If you want link following\n  * @param localCallback - function(bindings, pattern, branch) called on sucess\n  * @returns nothing\n  *\n  * Will fetch linked data from the web iff the knowledge base an associated source fetcher (f.fetcher)\n  ***/\n  var match = function (f, g, bindingsSoFar, level, fetcher, localCallback, branch) {\n    log.debug('Match begins, Branch count now: ' + branch.count + ' for ' + branch.pattern_debug)\n\n    // log.debug(\"match: f has \"+f.statements.length+\", g has \"+g.statements.length)\n    var pattern = g.statements\n    if (pattern.length === 0) { // when it's satisfied all the pattern triples\n      log.debug('FOUND MATCH WITH BINDINGS:' + bindingDebug(bindingsSoFar))\n      if (g.optional.length === 0) {\n        branch.reportMatch(bindingsSoFar)\n      } else {\n        log.debug('OPTIONAL: ' + g.optional)\n        var junction = new OptionalBranchJunction(callback, bindingsSoFar) // @@ won't work with nested optionals? nest callbacks\n        var br = []\n        var b\n        for (b = 0; b < g.optional.length; b++) {\n          br[b] = new OptionalBranch(junction) // Allocate branches to prevent premature ending\n          br[b].pattern_debug = g.optional[b] // for diagnotics only\n        }\n        for (b = 0; b < g.optional.length; b++) {\n          br[b].count = br[b].count + 1 // Count how many matches we have yet to complete\n          match(f, g.optional[b], bindingsSoFar, '', fetcher, callback, br[b])\n        }\n      }\n      branch.count--\n      log.debug('Match ends -- success , Branch count now: ' + branch.count + ' for ' + branch.pattern_debug)\n      return // Success\n    }\n\n    var item\n    var i\n    var n = pattern.length\n    // log.debug(level + \"Match \"+n+\" left, bs so far:\"+bindingDebug(bindingsSoFar))\n\n    // Follow links from variables in query\n    if (fetcher) { // Fetcher is used to fetch URIs, function first term is a URI term, second is the requester\n      var id = 'match' + matchIndex++\n      var fetchResource = function (requestedTerm, id) {\n        var docuri = requestedTerm.uri.split('#')[0]\n        fetcher.nowOrWhenFetched(docuri, undefined, function (ok, body, xhr) {\n          if (!ok) {\n            console.log('Error following link to <' + requestedTerm.uri + '> in query: ' + body)\n          }\n          match(f, g, bindingsSoFar, level, fetcher, // match not match2 to look up any others necessary.\n            localCallback, branch)\n        })\n      }\n      for (i = 0; i < n; i++) {\n        item = pattern[i] // for each of the triples in the query\n        if (bindingsSoFar[item.subject] !== undefined &&\n            bindingsSoFar[item.subject].uri && fetcher &&\n            fetcher.getState(docpart(bindingsSoFar[item.subject].uri)) === 'unrequested') {\n          // fetch the subject info and return to id\n          fetchResource(bindingsSoFar[item.subject], id)\n          return // only look up one per line this time, but we will come back again though match\n        }\n        if (bindingsSoFar[item.object] !== undefined &&\n            bindingsSoFar[item.object].uri && fetcher &&\n            fetcher.getState(docpart(bindingsSoFar[item.object].uri)) === 'unrequested') {\n          fetchResource(bindingsSoFar[item.object], id)\n          return\n        }\n      }\n    } // if fetcher\n    match2(f, g, bindingsSoFar, level, fetcher, localCallback, branch)\n  } // match\n\n  var constraintsSatisfied = function (bindings, constraints) {\n    var res = true\n    var x\n    var test\n    for (x in bindings) {\n      if (bindings.hasOwnProperty(x)) {\n        if (constraints[x]) {\n          test = constraints[x].test\n          if (test && !test(bindings[x])) {\n            res = false\n          }\n        }\n      }\n    }\n    return res\n  }\n\n  /** match2 -- stuff after the fetch **/\n  var match2 = function (f, g, bindingsSoFar, level, fetcher, callback, branch) { // post fetch\n    var pattern = g.statements\n    var n = pattern.length\n    var i\n    var k\n    var nk\n    var v\n    var bindings2\n    var newBindings1\n    var item\n    for (i = 0; i < n; i++) { // For each statement left in the query, run prepare\n      item = pattern[i]\n      // log.info('match2: item=' + item + ', bindingsSoFar=' + bindingDebug(bindingsSoFar))\n      prepare(f, item, bindingsSoFar)\n      // if (item.index) console.log('     item.index.length ' + item.index.length)\n    }\n    pattern.sort(easiestQuery)\n    item = pattern[0]\n    // log.debug(\"Sorted pattern:\\n\"+pattern)\n    var rest = f.formula()\n    rest.optional = g.optional\n    rest.constraints = g.constraints\n    rest.statements = pattern.slice(1) // No indexes: we will not query g.\n    log.debug(level + 'match2 searching ' + item.index.length + ' for ' + item +\n      '; bindings so far=' + bindingDebug(bindingsSoFar))\n    // var results = []\n    var c\n    var nc = item.index.length\n    var nbs1\n    var st\n    var onward = 0\n    // var x\n    for (c = 0; c < nc; c++) { // For each candidate statement\n      st = item.index[c] // for each statement in the item's index, spawn a new match with that binding\n      nbs1 = unifyContents(\n        [item.subject, item.predicate, item.object, item.why],\n        [st.subject, st.predicate, st.object, st.why], bindingsSoFar, f)\n      log.info(level + ' From first: ' + nbs1.length + ': ' + bindingsDebug(nbs1))\n      nk = nbs1.length\n      // branch.count += nk\n      // log.debug(\"Branch count bumped \"+nk+\" to: \"+branch.count)\n      for (k = 0; k < nk; k++) { // For each way that statement binds\n        bindings2 = []\n        newBindings1 = nbs1[k][0]\n        if (!constraintsSatisfied(newBindings1, g.constraints)) {\n          // branch.count--\n          log.debug('Branch count CS: ' + branch.count)\n        } else {\n          for (v in newBindings1) {\n            if (newBindings1.hasOwnProperty(v)) {\n              bindings2[v] = newBindings1[v] // copy\n            }\n          }\n          for (v in bindingsSoFar) {\n            if (bindingsSoFar.hasOwnProperty(v)) {\n              bindings2[v] = bindingsSoFar[v] // copy\n            }\n          }\n\n          branch.count++ // Count how many matches we have yet to complete\n          onward++\n          match(f, rest, bindings2, level + '  ', fetcher, callback, branch) // call match\n        }\n      }\n    }\n    branch.count--\n    if (onward === 0) {\n      log.debug('Match2 fails completely on ' + item)\n    }\n    log.debug('Match2 ends, Branch count: ' + branch.count + ' for ' + branch.pattern_debug)\n    if (branch.count === 0) {\n      log.debug('Branch finished.')\n      branch.reportDone()\n    }\n  } // match2\n  // ////////////////////////// Body of query()  ///////////////////////\n  var f = this\n  log.debug('Query on ' + this.statements.length)\n  var trunck = new MandatoryBranch(callback, onDone)\n  trunck.count++ // count one branch to complete at the moment\n  if (myQuery.sync) {\n    match(f, myQuery.pat, myQuery.pat.initBindings, '', fetcher, callback, trunck)\n  } else { // Give up thread: Allow other activities to run\n    setTimeout(function () {\n      match(f, myQuery.pat, myQuery.pat.initBindings, '', fetcher, callback, trunck)\n    }, 0)\n  }\n\n   // returns nothing; callback does the work\n} // query\n","/*  Identity management and indexing for RDF\n *\n * This file provides  IndexedFormula a formula (set of triples) which\n * indexed by predicate, subject and object.\n *\n * It \"smushes\"  (merges into a single node) things which are identical\n * according to owl:sameAs or an owl:InverseFunctionalProperty\n * or an owl:FunctionalProperty\n *\n *\n *  2005-10 Written Tim Berners-Lee\n *  2007    Changed so as not to munge statements from documents when smushing\n *  2019    Converted to typescript\n *\n *\n*/\n\n/** @module store */\n\nimport ClassOrder from './class-order'\nimport { defaultGraphURI } from './factories/canonical-data-factory'\nimport Formula, { FormulaOpts } from './formula'\nimport { ArrayIndexOf } from './utils'\nimport { RDFArrayRemove } from './utils-js'\nimport {\n  isRDFlibSubject,\n  isRDFlibPredicate,\n  isRDFlibObject,\n  isStore,\n  isGraph,\n  // isPredicate,\n  isQuad,\n  // isSubject\n} from './utils/terms'\nimport Node from './node'\nimport Variable from './variable'\nimport { Query, indexedFormulaQuery } from './query'\nimport type UpdateManager from './update-manager'\nimport {\n  Bindings, BlankNodeTermType, CollectionTermType, DefaultGraphTermType, EmptyTermType, GraphTermType, LiteralTermType, NamedNodeTermType, VariableTermType\n} from './types'\nimport Statement from './statement'\nimport { Indexable } from './factories/factory-types'\nimport NamedNode from './named-node'\nimport type Fetcher from './fetcher'\nimport {\n  Quad_Graph,\n  Literal as TFLiteral,\n  NamedNode as TFNamedNode,\n  Quad_Object,\n  Quad_Predicate,\n  Quad,\n  Quad_Subject,\n  Term,\n} from './tf-types'\nimport serialize from \"./serialize\";\nimport BlankNode from './blank-node'\nimport DefaultGraph from './default-graph'\nimport Empty from './empty'\nimport Literal from './literal'\nimport Collection from './collection'\n\nconst owlNamespaceURI = 'http://www.w3.org/2002/07/owl#'\n\ntype FeaturesType = Array<('sameAs' | 'InverseFunctionalProperty' | 'FunctionalProperty')> | undefined\n\nexport { defaultGraphURI }\n// var link_ns = 'http://www.w3.org/2007/ont/link#'\n\n// Handle Functional Property\nfunction handleFP (\n  formula: IndexedFormula,\n  subj: Quad_Subject,\n  pred: Quad_Predicate,\n  obj: Quad_Object\n): boolean {\n  var o1 = formula.any(subj, pred, undefined)\n  if (!o1) {\n    return false // First time with this value\n  }\n  // log.warn(\"Equating \"+o1.uri+\" and \"+obj.uri + \" because FP \"+pred.uri);  //@@\n  formula.equate(o1, obj)\n  return true\n} // handleFP\n\n// Handle Inverse Functional Property\nfunction handleIFP (\n  formula: IndexedFormula,\n  subj: Quad_Subject,\n  pred: Quad_Predicate,\n  obj: Quad_Object\n): boolean {\n  var s1 = formula.any(undefined, pred, obj)\n  if (!s1) {\n    return false // First time with this value\n  }\n  // log.warn(\"Equating \"+s1.uri+\" and \"+subj.uri + \" because IFP \"+pred.uri);  //@@\n  formula.equate(s1, subj)\n  return true\n} // handleIFP\n\nfunction handleRDFType (\n  formula: IndexedFormula,\n  subj: Quad_Subject,\n  pred: Quad_Predicate,\n  obj: Quad_Object,\n  why: Quad_Graph\n) {\n  //@ts-ignore this method does not seem to exist in this library\n  if (formula.typeCallback) {\n    (formula as any).typeCallback(formula, obj, why)\n  }\n\n  var x = formula.classActions[formula.id(obj)]\n  var done = false\n  if (x) {\n    for (var i = 0; i < x.length; i++) {\n      done = done || x[i](formula, subj, pred, obj, why)\n    }\n  }\n  return done // statement given is not needed if true\n}\n\n/**\n * Indexed Formula aka Store\n */\nexport default class IndexedFormula extends Formula { // IN future - allow pass array of statements to constructor\n  /**\n   * An UpdateManager initialised to this store\n   */\n  updater?: UpdateManager\n\n  /**\n   * Dictionary of namespace prefixes\n   */\n  namespaces: {[key: string]: string}\n\n  /** Map of iri predicates to functions to call when adding { s type X } */\n  classActions: { [k: string]: Function[] }\n  /** Map of iri predicates to functions to call when getting statement with {s X o} */\n  propertyActions: { [k: string]: Function[] }\n  /** Redirect to lexically smaller equivalent symbol */\n  redirections: any[]\n  /** Reverse mapping to redirection: aliases for this */\n  aliases: any[]\n  /** Redirections we got from HTTP */\n  HTTPRedirects: Statement[]\n  /** Array of statements with this X as subject */\n  subjectIndex: Statement[]\n  /** Array of statements with this X as predicate */\n  predicateIndex: Statement[]\n  /** Array of statements with this X as object */\n  objectIndex: Statement[]\n  /** Array of statements with X as provenance */\n  whyIndex: Statement[]\n  index: [\n    Statement[],\n    Statement[],\n    Statement[],\n    Statement[]\n  ]\n  features: FeaturesType\n  static handleRDFType: Function\n  _universalVariables?: NamedNode[]\n  _existentialVariables?: BlankNode[]\n\n  /** Function to remove quads from the store arrays with */\n  private rdfArrayRemove: (arr: Quad[], q: Quad) => void\n  /** Callbacks which are triggered after a statement has been added to the store */\n  private dataCallbacks: Array<(q: Quad) => void> = []\n  /** Callbacks which are triggered after a statement has been removed from the store */\n  private dataRemovalCallbacks: Array<(q: Quad) => void> = []\n\n  /**\n   * Creates a new formula\n   * @param features - What sort of automatic processing to do? Array of string\n   * @param features.sameAs - Smush together A and B nodes whenever { A sameAs B }\n   * @param opts\n   * @param [opts.rdfFactory] - The data factory that should be used by the store\n   * @param [opts.rdfArrayRemove] - Function which removes statements from the store\n   * @param [opts.dataCallback] - Callback when a statement is added to the store, will not trigger when adding duplicates\n   */\n  constructor (features?: FeaturesType, opts: FormulaOpts = {}) {\n    super(undefined, undefined, undefined, undefined, opts)\n\n    this.propertyActions = {}\n    this.classActions = {}\n    this.redirections = []\n    this.aliases = []\n    this.HTTPRedirects = []\n    this.subjectIndex = []\n    this.predicateIndex = []\n    this.objectIndex = []\n    this.whyIndex = []\n    this.index = [\n      this.subjectIndex,\n      this.predicateIndex,\n      this.objectIndex,\n      this.whyIndex\n    ]\n    this.namespaces = {} // Dictionary of namespace prefixes\n    this.features = features || [ // By default, devs do not expect these features.\n// See https://github.com/linkeddata/rdflib.js/issues/458\n//      'sameAs',\n//      'InverseFunctionalProperty',\n//      'FunctionalProperty',\n    ]\n    this.rdfArrayRemove = opts.rdfArrayRemove || RDFArrayRemove\n    if (opts.dataCallback) {\n      this.dataCallbacks = [opts.dataCallback]\n    }\n    if (opts.dataRemovalCallback) {\n      this.dataRemovalCallbacks = [opts.dataRemovalCallback]\n    }\n\n    this.initPropertyActions(this.features)\n  }\n\n  /**\n   * Gets the URI of the default graph\n   */\n  static get defaultGraphURI(): string {\n    return defaultGraphURI\n  }\n\n  /**\n   * Gets this graph with the bindings substituted\n   * @param bindings The bindings\n   */\n  substitute <T extends Node = IndexedFormula>(bindings: Bindings): T {\n    var statementsCopy = this.statements.map(function (ea: Quad) {\n      return (ea as Statement).substitute(bindings)\n    })\n    var y = new IndexedFormula()\n    y.add(statementsCopy)\n    return y as unknown as T\n  }\n\n  /**\n   * Add a callback which will be triggered after a statement has been added to the store.\n   * @param cb\n   */\n  addDataCallback(cb: (q: Quad) => void): void {\n    this.dataCallbacks.push(cb)\n  }\n\n  addDataRemovalCallback(cb: (q: Quad) => void): void {\n    this.dataRemovalCallbacks.push(cb)\n  }\n\n  /**\n   * Apply a set of statements to be deleted and to be inserted\n   *\n   * @param patch - The set of statements to be deleted and to be inserted\n   * @param target - The name of the document to patch\n   * @param patchCallback - Callback to be called when patching is complete\n   */\n  applyPatch(\n    patch: {\n        delete?: ReadonlyArray<Statement>,\n        patch?: ReadonlyArray<Statement>,\n        where?: any\n    },\n    target: TFNamedNode,\n    patchCallback: (errorString?: string) => void\n  ): void {\n    var targetKB = this\n    var ds\n    var binding: Bindings | null = null\n\n    function doPatch (onDonePatch: (errorString?: string) => void) {\n      if (patch['delete']) {\n        ds = patch['delete']\n        // console.log(bindingDebug(binding))\n        // console.log('ds before substitute: ' + ds)\n        if (binding) ds = ds.substitute(binding)\n        // console.log('applyPatch: delete: ' + ds)\n        ds = ds.statements as Statement[]\n        var bad: Quad[] = []\n        var ds2 = ds.map(function (st: Quad) { // Find the actual statements in the store\n          var sts = targetKB.statementsMatching(st.subject, st.predicate, st.object, target)\n          if (sts.length === 0) {\n            // log.info(\"NOT FOUND deletable \" + st)\n            bad.push(st)\n            return null\n          } else {\n            // log.info(\"Found deletable \" + st)\n            return sts[0]\n          }\n        })\n        if (bad.length) {\n          // console.log('Could not find to delete ' + bad.length + 'statements')\n          // console.log('despite ' + targetKB.statementsMatching(bad[0].subject, bad[0].predicate)[0])\n          return patchCallback('Could not find to delete: ' + bad.join('\\n or '))\n        }\n        ds2.map(function (st: Quad) {\n          targetKB.remove(st)\n        })\n      }\n      if (patch['insert']) {\n        // log.info(\"doPatch insert \"+patch['insert'])\n        ds = patch['insert']\n        if (binding) ds = ds.substitute(binding)\n        ds = ds.statements\n        ds.map(function (st: Quad) {\n          st.graph = target\n          targetKB.add(st.subject, st.predicate, st.object, st.graph)\n        })\n      }\n      onDonePatch()\n    }\n    if (patch.where) {\n      // log.info(\"Processing WHERE: \" + patch.where + '\\n')\n      var query = new Query('patch')\n      query.pat = patch.where\n      query.pat.statements.map(function (st) {\n        st.graph = new NamedNode(target.value)\n      })\n      //@ts-ignore TODO: add sync property to Query when converting Query to typescript\n      query.sync = true\n\n      var bindingsFound: Bindings[] = []\n\n      targetKB.query(\n        query,\n        function onBinding (binding) {\n        bindingsFound.push(binding)\n        // console.log('   got a binding: ' + bindingDebug(binding))\n      },\n        targetKB.fetcher,\n        function onDone () {\n          if (bindingsFound.length === 0) {\n            return patchCallback('No match found to be patched:' + patch.where)\n          }\n          if (bindingsFound.length > 1) {\n            return patchCallback('Patch ambiguous. No patch done.')\n          }\n          binding = bindingsFound[0]\n          doPatch(patchCallback)\n        })\n    } else {\n      doPatch(patchCallback)\n    }\n  }\n\n  /**\n   * N3 allows for declaring blank nodes, this function enables that support\n   *\n   * @param x The blank node to be declared, supported in N3\n   */\n  declareExistential(x: BlankNode): BlankNode {\n    if (!this._existentialVariables) this._existentialVariables = []\n    this._existentialVariables.push(x)\n    return x\n  }\n\n  /**\n   * @param features\n   */\n  initPropertyActions(features: FeaturesType) {\n    // If the predicate is #type, use handleRDFType to create a typeCallback on the object\n    this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'))] =\n      [ handleRDFType ]\n\n    // Assumption: these terms are not redirected @@fixme\n    if (ArrayIndexOf(features, 'sameAs') >= 0) {\n      this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${owlNamespaceURI}sameAs`))] = [\n        function (formula, subj, pred, obj, why) {\n          // log.warn(\"Equating \"+subj.uri+\" sameAs \"+obj.uri);  //@@\n          formula.equate(subj, obj)\n          return true // true if statement given is NOT needed in the store\n        }\n      ] // sameAs -> equate & don't add to index\n    }\n    if (ArrayIndexOf(features, 'InverseFunctionalProperty') >= 0) {\n      this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${owlNamespaceURI}InverseFunctionalProperty`))] = [\n        function (formula, subj, pred, obj, addFn) {\n          // yes subj not pred!\n          return formula.newPropertyAction(subj, handleIFP)\n        }\n      ] // IFP -> handleIFP, do add to index\n    }\n    if (ArrayIndexOf(features, 'FunctionalProperty') >= 0) {\n      this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${owlNamespaceURI}FunctionalProperty`))] = [\n        function (formula, subj, proj, obj, addFn) {\n          return formula.newPropertyAction(subj, handleFP)\n        }\n      ] // FP => handleFP, do add to index\n    }\n  }\n\n  /** @deprecated Use {add} instead */\n  addStatement (st: Quad): number {\n    this.add(st.subject, st.predicate, st.object, st.graph)\n    return this.statements.length\n  }\n\n  /**\n   * Adds a triple (quad) to the store.\n   *\n   * @param subj - The thing about which the fact a relationship is asserted.\n   *        Also accepts a statement or an array of Statements.\n   * @param pred - The relationship which is asserted\n   * @param obj - The object of the relationship, e.g. another thing or a value. If passed a string, this will become a literal.\n   * @param why - The document in which the triple (S,P,O) was or will be stored on the web\n   * @returns The statement added to the store, or the store\n   */\n  add (\n    subj: Quad_Subject | Quad | Quad[] | Statement | Statement[],\n    pred?: Quad_Predicate,\n    obj?: Term | string,\n    why?: Quad_Graph\n  ): Statement | null | this | number {\n    var i: number\n    if (arguments.length === 1) {\n      if (subj instanceof Array) {\n        for (i = 0; i < subj.length; i++) {\n          this.add(subj[i])\n        }\n      } else if (isQuad(subj)) {\n        this.add(subj.subject, subj.predicate, subj.object, subj.graph)\n      } else if (isStore(subj)) {\n        this.add((subj as any).statements)\n      }\n      return this\n    }\n    var actions: Function[]\n    var st: Statement\n    if (!why) {\n      // system generated\n      why = this.fetcher ? this.fetcher.appNode : this.rdfFactory.defaultGraph()\n    }\n    if (typeof subj == 'string') {\n      subj = this.rdfFactory.namedNode(subj)\n    }\n    pred = Node.fromValue(pred)\n    const objNode = Node.fromValue(obj) as Term\n    why = Node.fromValue(why)\n    if (!isRDFlibSubject(subj)) {\n      throw new Error('Subject is not a subject type')\n    }\n    if (!isRDFlibPredicate(pred)) {\n      throw new Error(`Predicate ${pred} is not a predicate type`)\n    }\n    if (!isRDFlibObject(objNode)) {\n      throw new Error(`Object ${objNode} is not an object type`)\n    }\n    if (!isGraph(why)) {\n      throw new Error(\"Why is not a graph type\")\n    }\n    //@ts-ignore This is not used internally\n    if (this.predicateCallback) {\n      //@ts-ignore This is not used internally\n      this.predicateCallback(this, pred, why)\n    }\n    // Action return true if the statement does not need to be added\n    var predHash = this.id(this.canon(pred!))\n    actions = this.propertyActions[predHash] // Predicate hash\n    var done = false\n    if (actions) {\n      // alert('type: '+typeof actions +' @@ actions='+actions)\n      for (i = 0; i < actions.length; i++) {\n        done = done || actions[i](this, subj, pred, objNode, why)\n      }\n    }\n    if (this.holds(subj, pred, objNode, why)) { // Takes time but saves duplicates\n      // console.log('rdflib: Ignoring dup! {' + subj + ' ' + pred + ' ' + obj + ' ' + why + '}')\n      return null // @@better to return self in all cases?\n    }\n    // If we are tracking provenance, every thing should be loaded into the store\n    // if (done) return this.rdfFactory.quad(subj, pred, obj, why)\n    // Don't put it in the store\n    // still return this statement for owl:sameAs input\n    var hash = [\n      this.id(this.canon(subj)),\n      predHash,\n      this.id(this.canon(objNode)),\n      this.id(this.canon(why))\n    ]\n    // @ts-ignore this will fail if you pass a collection and the factory does not allow Collections\n    st = this.rdfFactory.quad(subj, pred, objNode, why)\n    for (i = 0; i < 4; i++) {\n      var ix = this.index[i]\n      var h = hash[i]\n      if (!ix[h]) {\n        ix[h] = []\n      }\n      ix[h].push(st) // Set of things with this as subject, etc\n    }\n\n    // log.debug(\"ADDING    {\"+subj+\" \"+pred+\" \"+objNode+\"} \"+why)\n    this.statements.push(st)\n\n    for (const callback of this.dataCallbacks) {\n      callback(st)\n    }\n\n    return st\n  }\n\n  /**\n   * Returns the symbol with canonical URI as smushed\n   * @param term - An RDF node\n   */\n  canon(term?: Term): Node {\n    if (!term) {\n      // @@ TODO Should improve this to return proper value - doing this to keep it backward compatible\n      return term as unknown as Node\n    }\n    const y = this.redirections[this.id(term)]\n    if (y) {\n      return y\n    }\n    switch (term.termType) {\n      case BlankNodeTermType:\n        return new BlankNode(term.value)\n      case CollectionTermType:\n        return term as Collection // non-RDF/JS type, should just need to cast\n      case DefaultGraphTermType:\n        return new DefaultGraph()\n      case EmptyTermType: // non-RDF/JS type, should just need to cast\n        return term as Empty\n      case GraphTermType: // non-RDF/JS type, should just need to cast\n        return term as IndexedFormula\n      case LiteralTermType:\n        return new Literal(term.value, (term as TFLiteral).language, (term as TFLiteral).datatype)\n      case NamedNodeTermType:\n        return new NamedNode(term.value)\n      case VariableTermType:\n        return new Variable(term.value)\n      default:\n        throw new Error(`Term Type not recognized for canonization: ${term.termType}`)\n    }\n  }\n\n\n  /**\n   * Checks this formula for consistency\n   */\n  check(): void {\n    this.checkStatementList(this.statements)\n    for (var p = 0; p < 4; p++) {\n      var ix = this.index[p]\n      for (var key in ix) {\n        if (ix.hasOwnProperty(key)) {\n          // @ts-ignore should this pass an array or a single statement? checkStateMentsList expects an array.\n          this.checkStatementList(ix[key], p)\n        }\n      }\n    }\n  }\n\n  /**\n   * Checks a list of statements for consistency\n   * @param sts - The list of statements to check\n   * @param from - An index with the array ['subject', 'predicate', 'object', 'why']\n   */\n  checkStatementList(\n    sts: ReadonlyArray<Quad>,\n    from?: number\n  ): boolean | void {\n    if (from === undefined) {\n      from = 0\n    }\n    var names = ['subject', 'predicate', 'object', 'why']\n    var origin = ' found in ' + names[from] + ' index.'\n    var st: Quad\n    for (var j = 0; j < sts.length; j++) {\n      st = sts[j]\n      var term = [ st.subject, st.predicate, st.object, st.graph ]\n      var arrayContains = function (a: Array<any>, x: Quad) {\n        for (var i = 0; i < a.length; i++) {\n          if (a[i].subject.equals(x.subject) &&\n            a[i].predicate.equals(x.predicate) &&\n            a[i].object.equals(x.object) &&\n            a[i].why.equals(x.graph)) {\n            return true\n          }\n        }\n      }\n      for (var p = 0; p < 4; p++) {\n        var c = this.canon(term[p])\n        var h = this.id(c)\n        if (!this.index[p][h]) {\n          // throw new Error('No ' + name[p] + ' index for statement ' + st + '@' + st.why + origin)\n        } else {\n          if (!arrayContains(this.index[p][h], st)) {\n            // throw new Error('Index for ' + name[p] + ' does not have statement ' + st + '@' + st.why + origin)\n          }\n        }\n      }\n      if (!arrayContains(this.statements, st)) {\n        throw new Error('Statement list does not statement ' + st + '@' + st.graph + origin)\n      }\n    }\n  }\n\n  /**\n   * Closes this formula (and return it)\n   */\n  close(): IndexedFormula {\n    return this\n  }\n\n  compareTerms(u1: Term, u2: Term): number {\n    // Keep compatibility with downstream classOrder changes\n    if (Object.prototype.hasOwnProperty.call(u1, \"compareTerm\")) {\n      return (u1 as Node).compareTerm(u2 as Node)\n    }\n    if (ClassOrder[u1.termType] < ClassOrder[u2.termType]) {\n      return -1\n    }\n    if (ClassOrder[u1.termType] > ClassOrder[u2.termType]) {\n      return +1\n    }\n    if (u1.value < u2.value) {\n      return -1\n    }\n    if (u1.value > u2.value) {\n      return +1\n    }\n    return 0\n  }\n\n\n  /**\n   * replaces @template with @target and add appropriate triples\n   * removes no triples by default and is a one-direction replication\n   * @param template node to copy\n   * @param target node to copy to\n   * @param flags Whether or not to do a two-directional copy and/or delete triples\n   */\n  copyTo(\n    template: Quad_Subject,\n    target: Quad_Subject,\n    flags?: Array<('two-direction' | 'delete')>\n  ): void {\n    if (!flags) flags = []\n    var statList = this.statementsMatching(template)\n    if (ArrayIndexOf(flags, 'two-direction') !== -1) {\n      statList.concat(this.statementsMatching(undefined, undefined, template))\n    }\n    for (var i = 0; i < statList.length; i++) {\n      var st = statList[i]\n      switch (st.object.termType) {\n        case 'NamedNode':\n          this.add(target, st.predicate, st.object)\n          break\n        case 'Literal':\n        case 'BlankNode':\n        // @ts-ignore Collections can appear here\n        case 'Collection':\n          // @ts-ignore Possible bug: copy is not available on Collections\n          this.add(target, st.predicate, st.object.copy(this))\n      }\n      if (ArrayIndexOf(flags, 'delete') !== -1) {\n        this.remove(st)\n      }\n    }\n  }\n\n  /**\n   * Simplify graph in store when we realize two identifiers are equivalent\n   * We replace the bigger with the smaller.\n   * @param u1in The first node\n   * @param u2in The second node\n   */\n  equate(u1in: Term, u2in : Term): boolean {\n    // log.warn(\"Equating \"+u1+\" and \"+u2); // @@\n    // @@JAMBO Must canonicalize the uris to prevent errors from a=b=c\n    // 03-21-2010\n    const u1 = this.canon(u1in) as Quad_Subject\n    const u2 = this.canon(u2in) as Quad_Subject\n    var d = this.compareTerms(u1, u2)\n    if (!d) {\n      return true // No information in {a = a}\n    }\n    // var big\n    // var small\n    if (d < 0) { // u1 less than u2\n      return this.replaceWith(u2, u1)\n    } else {\n      return this.replaceWith(u1, u2)\n    }\n  }\n\n  /**\n   * Creates a new empty indexed formula\n   * Only applicable for IndexedFormula, but TypeScript won't allow a subclass to override a property\n   * @param features The list of features\n   */\n  formula(features: FeaturesType): IndexedFormula {\n    return new IndexedFormula(features)\n  }\n\n  /**\n   * Returns the number of statements contained in this IndexedFormula.\n   * (Getter proxy to this.statements).\n   * Usage:\n   *    ```\n   *    var kb = rdf.graph()\n   *    kb.length  // -> 0\n   *    ```\n   * @returns {Number}\n   */\n  get length (): number {\n    return this.statements.length\n  }\n\n  /**\n   * Returns any quads matching the given arguments.\n   * Standard RDFJS spec method for Source objects, implemented as an\n   * alias to `statementsMatching()`\n   * @param subject The subject\n   * @param predicate The predicate\n   * @param object The object\n   * @param graph The graph that contains the statement\n   */\n  match(\n    subject?: Quad_Subject | null,\n    predicate?: Quad_Predicate | null,\n    object?: Quad_Object | null,\n    graph?: Quad_Graph | null\n  ): Quad[] {\n    return this.statementsMatching(\n      Node.fromValue(subject),\n      Node.fromValue(predicate),\n      Node.fromValue(object),\n      Node.fromValue(graph)\n    )\n  }\n\n  /**\n   * Find out whether a given URI is used as symbol in the formula\n   * @param uri The URI to look for\n   */\n  mentionsURI(uri: string): boolean {\n    var hash = '<' + uri + '>'\n    return (!!this.subjectIndex[hash] ||\n    !!this.objectIndex[hash] ||\n    !!this.predicateIndex[hash])\n  }\n\n  /**\n   * Existentials are BNodes - something exists without naming\n   * @param uri An URI\n   */\n  newExistential(uri: string): Term {\n    if (!uri) return this.bnode()\n    var x = this.sym(uri)\n    // @ts-ignore x should be blanknode, but is namedNode.\n    return this.declareExistential(x)\n  }\n\n  /**\n   * Adds a new property action\n   * @param pred the predicate that the function should be triggered on\n   * @param action the function that should trigger\n   */\n  newPropertyAction(\n    pred: Quad_Predicate,\n    action: (\n      store: IndexedFormula,\n      subject: Quad_Subject,\n      predicate: Quad_Predicate,\n      object: Quad_Object\n    ) => boolean\n  ): boolean {\n    // log.debug(\"newPropertyAction:  \"+pred)\n    var hash = this.id(pred)\n    if (!this.propertyActions[hash]) {\n      this.propertyActions[hash] = []\n    }\n    this.propertyActions[hash].push(action)\n    // Now apply the function to to statements already in the store\n    var toBeFixed = this.statementsMatching(undefined, pred, undefined)\n    var done = false\n    for (var i = 0; i < toBeFixed.length; i++) { // NOT optimized - sort toBeFixed etc\n      done = done || action(this, toBeFixed[i].subject, pred, toBeFixed[i].object)\n    }\n    return done\n  }\n\n  /**\n   * Creates a new universal node\n   * Universals are Variables\n   * @param uri An URI\n   */\n  newUniversal(uri: string): TFNamedNode {\n    var x = this.sym(uri)\n    if (!this._universalVariables) this._universalVariables = []\n    this._universalVariables.push(x)\n    return x\n  }\n\n  // convenience function used by N3 parser\n  variable (name: string) {\n    return new Variable(name)\n  }\n\n  /**\n   * Find an unused id for a file being edited: return a symbol\n   * (Note: Slow iff a lot of them -- could be O(log(k)) )\n   * @param doc A document named node\n   */\n  nextSymbol(doc: TFNamedNode): TFNamedNode {\n    for (var i = 0; ;i++) {\n      var uri = doc.value + '#n' + i\n      if (!this.mentionsURI(uri)) return this.sym(uri)\n    }\n  }\n\n  /**\n   * Query this store asynchronously, return bindings in callback\n   *\n   * @param myQuery The query to be run\n   * @param callback Function to call when bindings\n   * @param Fetcher | null  If you want the query to do link following\n   * @param onDone OBSOLETE - do not use this // @@ Why not ?? Called when query complete\n   */\n  query(\n    myQuery: Query,\n    callback: (bindings: Bindings) => void,\n    fetcher?: Fetcher | null,\n    onDone?: () => void\n  ): void {\n    return indexedFormulaQuery.call(this, myQuery, callback, fetcher, onDone)\n  }\n\n  /**\n   * Query this store synchronously and return bindings\n   *\n   * @param myQuery The query to be run\n   */\n  querySync(myQuery: Query): any[] {\n    var results: Bindings[] = []\n    function saveBinginds (bindings: Bindings) {\n      results.push(bindings)\n    }\n    function onDone () {\n      done = true\n    }\n    var done = false\n    // @ts-ignore TODO: Add .sync to Query\n    myQuery.sync = true\n\n    indexedFormulaQuery.call(this, myQuery, saveBinginds, null, onDone)\n    if (!done) {\n      throw new Error('Sync query should have called done function')\n    }\n    return results\n  }\n\n  /**\n   * Removes one or multiple statement(s) from this formula\n   * @param st - A Statement or array of Statements to remove\n   */\n  remove(st: Quad | Quad[]): IndexedFormula {\n    if (st instanceof Array) {\n      for (var i = 0; i < st.length; i++) {\n        this.remove(st[i])\n      }\n      return this\n    }\n    if (isStore(st)) {\n      return this.remove(st.statements)\n    }\n    var sts = this.statementsMatching(st.subject, st.predicate, st.object, st.graph)\n    if (!sts.length) {\n      throw new Error('Statement to be removed is not on store: ' + st)\n    }\n    this.removeStatement(sts[0])\n    return this\n  }\n\n  /**\n   * Removes all statements in a doc, along with the related metadata including request/response/status\n   * @param doc - The document / graph\n   */\n  removeDocument(doc: Quad_Graph): IndexedFormula {\n    this.removeMetadata(doc)\n    // remove document\n    var sts: Quad[] = this.statementsMatching(undefined, undefined, undefined, doc).slice() // Take a copy as this is the actual index\n    for (var i = 0; i < sts.length; i++) {\n      this.removeStatement(sts[i])\n    }\n    this.removeMatches(doc as Quad_Subject, null, null)\n    return this\n  }\n\n  removeMetadata(doc: Quad_Graph): IndexedFormula {\n    const meta = this.sym('chrome://TheCurrentSession') // or this.rdfFactory.namedNode('chrome://TheCurrentSession')\n    const linkNamespaceURI = 'http://www.w3.org/2007/ont/link#'\n    // remove status/response/request metadata\n    const requests = this.statementsMatching(undefined, this.sym(`${linkNamespaceURI}requestedURI`), this.rdfFactory.literal(doc.value), meta).map(st => st.subject)\n    for (var r = 0; r < requests.length; r++) {\n      const request = requests[r]\n      if (request != undefined) {\n        // removeMatches unresolved issue with collection https://github.com/linkeddata/rdflib.js/issues/631\n        let sts: Quad[]\n        // status collection\n        const status = this.any(request, this.sym(`${linkNamespaceURI}status`), null, meta) as Quad_Subject\n        if (status != undefined) {\n          sts = this.statementsMatching(status, this.sym(`${linkNamespaceURI}status`), null, meta).slice()\n          for (var i = 0; i < sts.length; i++) {\n            this.removeStatement(sts[i])\n          }\n        }\n        // response items list\n        const response = this.any(request, this.sym(`${linkNamespaceURI}response`), null, meta) as Quad_Subject\n        if (response != undefined) {\n          sts = this.statementsMatching(response, null, null, meta).slice()\n          for (var i = 0; i < sts.length; i++) {\n            this.removeStatement(sts[i])\n          }\n        }\n        // request triples\n        sts = this.statementsMatching(request, null, null, meta).slice()\n        for (var i = 0; i < sts.length; i++) {\n          this.removeStatement(sts[i])\n        }\n\n      }\n    }\n    this.removeMatches(this.sym(doc.value), null, null, meta) // content-type\n    return this\n  }\n\n  /**\n   * Remove all statements matching args (within limit) *\n   * @param subj The subject\n   * @param pred The predicate\n   * @param obj The object\n   * @param why The graph that contains the statement\n   * @param limit The number of statements to remove\n   */\n  removeMany(\n    subj?: Quad_Subject | null,\n    pred?: Quad_Predicate | null,\n    obj?: Quad_Object | null,\n    why?: Quad_Graph | null,\n    limit?: number\n  ): void {\n    // log.debug(\"entering removeMany w/ subj,pred,obj,why,limit = \" + subj +\", \"+ pred+\", \" + obj+\", \" + why+\", \" + limit)\n    var sts = this.statementsMatching(subj, pred, obj, why, false)\n    // This is a subtle bug that occurred in updateCenter.js too.\n    // The fact is, this.statementsMatching returns this.whyIndex instead of a copy of it\n    // but for perfromance consideration, it's better to just do that\n    // so make a copy here.\n    var statements: Quad[] = []\n    for (var i = 0; i < sts.length; i++) statements.push(sts[i])\n    if (limit) statements = statements.slice(0, limit)\n    for (i = 0; i < statements.length; i++) this.remove(statements[i])\n  }\n\n  /**\n   * Remove all matching statements\n   * @param subject The subject\n   * @param predicate The predicate\n   * @param object The object\n   * @param graph The graph that contains the statement\n   */\n  removeMatches(\n    subject?: Quad_Subject | null,\n    predicate?: Quad_Predicate | null,\n    object?: Quad_Object | null,\n    graph?: Quad_Graph | null\n  ): IndexedFormula {\n    this.removeMany(subject, predicate, object, graph)\n    return this\n  }\n\n  /**\n   * Remove a particular statement object from the store\n   *\n   * @param st - a statement which is already in the store and indexed.\n   *        Make sure you only use this for these.\n   *        Otherwise, you should use remove() above.\n   */\n  removeStatement(st: Quad): IndexedFormula {\n    // log.debug(\"entering remove w/ st=\" + st)\n    var term = [ st.subject, st.predicate, st.object, st.graph ]\n    for (var p = 0; p < 4; p++) {\n      var c = this.canon(term[p])\n      var h = this.id(c)\n      if (!this.index[p][h]) {\n        // log.warn (\"Statement removal: no index '+p+': \"+st)\n      } else {\n        this.rdfArrayRemove(this.index[p][h], st)\n      }\n    }\n    this.rdfArrayRemove(this.statements, st)\n    for (const callback of this.dataRemovalCallbacks) {\n      callback(st)\n    }\n    return this\n  }\n\n  /**\n   * Removes statements\n   * @param sts The statements to remove\n   */\n  removeStatements(sts: ReadonlyArray<Quad>): IndexedFormula {\n    for (var i = 0; i < sts.length; i++) {\n      this.remove(sts[i])\n    }\n    return this\n  }\n\n  /**\n   * Replace big with small, obsoleted with obsoleting.\n   */\n  replaceWith (big: Quad_Subject, small: Quad_Subject): boolean {\n    // log.debug(\"Replacing \"+big+\" with \"+small) // this.id(@@\n    var oldhash = this.id(big)\n    var newhash = this.id(small)\n    var moveIndex = function (ix) {\n      var oldlist = ix[oldhash]\n      if (!oldlist) {\n        return // none to move\n      }\n      var newlist = ix[newhash]\n      if (!newlist) {\n        ix[newhash] = oldlist\n      } else {\n        ix[newhash] = oldlist.concat(newlist)\n      }\n      delete ix[oldhash]\n    }\n    // the canonical one carries all the indexes\n    for (var i = 0; i < 4; i++) {\n      moveIndex(this.index[i])\n    }\n    this.redirections[oldhash] = small\n    if (big.value) {\n      // @@JAMBO: must update redirections,aliases from sub-items, too.\n      if (!this.aliases[newhash]) {\n        this.aliases[newhash] = []\n      }\n      this.aliases[newhash].push(big) // Back link\n      if (this.aliases[oldhash]) {\n        for (i = 0; i < this.aliases[oldhash].length; i++) {\n          this.redirections[this.id(this.aliases[oldhash][i])] = small\n          this.aliases[newhash].push(this.aliases[oldhash][i])\n        }\n      }\n      this.add(small, this.sym('http://www.w3.org/2007/ont/link#uri'), big)\n      // If two things are equal, and one is requested, we should request the other.\n      if (this.fetcher) {\n        this.fetcher.nowKnownAs(big, small)\n      }\n    }\n    moveIndex(this.classActions)\n    moveIndex(this.propertyActions)\n    // log.debug(\"Equate done. \"+big+\" to be known as \"+small)\n    return true // true means the statement does not need to be put in\n  }\n\n  /**\n   * Return all equivalent URIs by which this is known\n   * @param x A named node\n   */\n  allAliases(x: NamedNode): NamedNode[] {\n    var a = this.aliases[this.id(this.canon(x))] || []\n    a.push(this.canon(x))\n    return a\n  }\n\n  /**\n   * Compare by canonical URI as smushed\n   * @param x A named node\n   * @param y Another named node\n   */\n  sameThings(x: NamedNode, y: NamedNode): boolean {\n    if (x.equals(y)) {\n      return true\n    }\n    var x1 = this.canon(x)\n    //    alert('x1='+x1)\n    if (!x1) return false\n    var y1 = this.canon(y)\n    //    alert('y1='+y1); //@@\n    if (!y1) return false\n    return (x1.value === y1.value)\n  }\n\n  setPrefixForURI (prefix: string, nsuri: string): void {\n    // TODO: This is a hack for our own issues, which ought to be fixed\n    // post-release\n    // See http://dig.csail.mit.edu/cgi-bin/roundup.cgi/$rdf/issue227\n    if (prefix === 'tab' && this.namespaces['tab']) {\n      return\n    } // There are files around with long badly generated prefixes like this\n    if (prefix.slice(0, 2) === 'ns' || prefix.slice(0, 7) === 'default') {\n      return\n    }\n\n    // remove any prefix that currently targets nsuri\n    for (let existingPrefix in this.namespaces) {\n      if (this.namespaces[existingPrefix] == nsuri)\n        delete this.namespaces[existingPrefix];\n    }\n\n    this.namespaces[prefix] = nsuri\n  }\n\n  /** Search the Store\n   *\n   * ALL CONVENIENCE LOOKUP FUNCTIONS RELY ON THIS!\n   * @param subj - A node to search for as subject, or if null, a wildcard\n   * @param pred - A node to search for as predicate, or if null, a wildcard\n   * @param obj - A node to search for as object, or if null, a wildcard\n   * @param why - A node to search for as graph, or if null, a wildcard\n   * @param justOne - flag - stop when found one rather than get all of them?\n   * @returns An array of nodes which match the wildcard position\n   */\n  statementsMatching (\n    subj?: Quad_Subject | null,\n    pred?: Quad_Predicate | null,\n    obj?: Quad_Object | null,\n    why?: Quad_Graph | null,\n    justOne?: boolean\n  ): Statement[] {\n    // log.debug(\"Matching {\"+subj+\" \"+pred+\" \"+obj+\"}\")\n    var pat = [ subj, pred, obj, why ]\n    var pattern: Term[] = []\n    var hash: Indexable[] = []\n    var wild: number[] = [] // wildcards\n    var given: number[] = [] // Not wild\n    var p: number\n    var list\n    for (p = 0; p < 4; p++) {\n      pattern[p] = this.canon(Node.fromValue(pat[p]))\n      if (!pattern[p]) {\n        wild.push(p)\n      } else {\n        given.push(p)\n        hash[p] = this.id(pattern[p])\n      }\n    }\n    if (given.length === 0) {\n      return this.statements\n    }\n    if (given.length === 1) { // Easy too, we have an index for that\n      p = given[0]\n      list = this.index[p][hash[p]]\n      if (list && justOne) {\n        if (list.length > 1) {\n          list = list.slice(0, 1)\n        }\n      }\n      list = list || []\n      return list\n    }\n    // Now given.length is 2, 3 or 4.\n    // We hope that the scale-free nature of the data will mean we tend to get\n    // a short index in there somewhere!\n    var best = 1e10 // really bad\n    var iBest\n    var i\n    for (i = 0; i < given.length; i++) {\n      p = given[i] // Which part we are dealing with\n      list = this.index[p][hash[p]]\n      if (!list) {\n        return [] // No occurrences\n      }\n      if (list.length < best) {\n        best = list.length\n        iBest = i // (not p!)\n      }\n    }\n    // Ok, we have picked the shortest index but now we have to filter it\n    var pBest = given[iBest]\n    var possibles: Statement[] = this.index[pBest][hash[pBest]]\n    var check = given.slice(0, iBest).concat(given.slice(iBest + 1)) // remove iBest\n    var results: Statement[] = []\n    var parts = [ 'subject', 'predicate', 'object', 'why' ]\n    for (var j = 0; j < possibles.length; j++) {\n      var st: Statement | null = possibles[j]\n\n      for (i = 0; i < check.length; i++) { // for each position to be checked\n        p = check[i]\n        if (!this.canon(st[parts[p]]).equals(pattern[p])) {\n          st = null\n          break\n        }\n      }\n      if (st != null) {\n        results.push(st)\n        if (justOne) break\n      }\n    }\n    return results\n  }\n\n  /**\n   * A list of all the URIs by which this thing is known\n   * @param term\n   */\n  uris(term: Quad_Subject): string[] {\n    var cterm = this.canon(term)\n    var terms = this.aliases[this.id(cterm)]\n    if (!cterm.value) return []\n    var res = [ cterm.value ]\n    if (terms) {\n      for (var i = 0; i < terms.length; i++) {\n        res.push(terms[i].uri)\n      }\n    }\n    return res\n  }\n\n  serialize (base, contentType, provenance, options?) {\n\n    // override Formula.serialize to force the serializer namespace prefixes\n    // to those of this IndexedFormula\n\n    // if namespaces are explicitly passed in options, let them override the existing namespaces in this formula\n    const namespaces = options?.namespaces ? {...this.namespaces, ...options.namespaces} : {...this.namespaces};\n\n    options = {\n      ...(options || {}),\n      namespaces\n    }\n    return serialize(provenance, this, base, contentType, undefined, options);\n  }\n}\nIndexedFormula.handleRDFType = handleRDFType\n","/* Lists form conversion\n*/\n\n\n// import DataFactory from './factories/extended-term-factory'\n// import jsonldParser from './jsonldparser'\n// import N3Parser from './n3parser'\n// import { parseRDFaDOM } from './rdfaparser'\n// import RDFParser from './rdfxmlparser'\n// import sparqlUpdateParser from './patch-parser'\n// import * as Util from './utils-js'\nimport Node from './node-internal'\n// import BlankNode from './blank-node'\n// import NamedNode from './named-node'\nimport Collection from './collection'\nimport Statement from './statement'\n// import Formula from './formula'\nimport Store from './store'\n// import { ContentType, TurtleContentType, N3ContentType, RDFXMLContentType, XHTMLContentType, HTMLContentType, SPARQLUpdateContentType, SPARQLUpdateSingleMatchContentType, JSONLDContentType, NQuadsContentType, NQuadsAltContentType } from './types'\n\n// import { Quad } from './tf-types'\n\nimport {BlankNode, NamedNode, Quad, Term,} from './tf-types'\nimport Namespace from './namespace'\n\nconst RDF  = Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n\n/* Replace a given node with another node throughout a given document\n*\n* we do the predicate as well for complenesss though we don't expect Collections to use it\n*/\nexport function substituteInDoc (store:Store, x:Term, y:Term, doc?: NamedNode ) {\n  // console.log(`substituteInDoc put ${x} for ${y} in ${doc}}`)\n  for (const quad of store.statementsMatching(y as any, null, null, doc as any)) {\n    const newStatement = new Statement(x as any, quad.predicate, quad.object, doc as any)\n    store.remove(quad)\n    store.add(newStatement)\n  }\n  for (const quad of store.statementsMatching(null, y as any, null, doc) as any) {\n    store.remove(quad)\n    // console.log(`  substituteInDoc predicate ${x} in ${quad}}`)\n    store.add(new Statement(quad.subject, x as any, quad.object, doc as any))\n  }\n  for (const quad of store.statementsMatching(null, null, y as any, doc) as any) {\n    store.remove(quad)\n    store.add(new Statement(quad.subject, quad.predicate, x as any, doc as any))\n  }\n}\n\n/* Change all lone rdf:nil nodes into empty Collections\n*/\nexport function substituteNillsInDoc (store:Store, doc?: NamedNode) {\n  const x = RDF('nil')\n  for (const quad of store.statementsMatching(x as any, null, null, doc as any)) {\n    store.remove(quad)\n    const y = new Collection()\n    store.add(new Statement(y as any, quad.predicate, quad.object, doc as any))\n  }\n  for (const quad of store.statementsMatching(null, null, x as any, doc) as any) {\n    if (!quad.predicate.sameTerm(RDF('rest'))) { // If not a tail\n      store.remove(quad)\n      const y = new Collection()\n      store.add(new Statement(quad.subject, quad.predicate, y as any, doc as any))\n    }\n  }\n}\n/**\n * Convert lists reified as rdf:first, rest\n * Normal method is sync.\n * Unfortunately jsdonld is currently written to need to be called async.\n * Hence the mess below with executeCallback.\n * @param store - The quadstore\n * @param doc - The document in which the conversion is done\n */\n\n\nexport function convertFirstRestNil (\n  store: Store,\n  doc: NamedNode | undefined,  // Do whole store?\n) {\n\n  function preceding (ele:BlankNode, listSoFar: Node[], trash: Quad[]): undefined {\n\n    const rests = store.statementsMatching(ele, RDF('rest'), null, doc)\n    if (rests.length !== 1) throw new Error(`Bad list structure: no rest at ${ele}`)\n\n    const firsts = store.statementsMatching(ele, RDF('first'), null, doc)\n    if (firsts.length !== 1) throw new Error(`Bad list structure: rest but ${firsts.length} firsts at ${ele}`)\n    const value = firsts[0].object\n    const total = [value].concat(listSoFar as any)\n    // console.log('  List now is: ', total)\n    const totalTrash =  trash.concat(rests).concat(firsts)\n\n    const pres = store.statementsMatching(null, RDF('rest'), ele, doc)\n    if (pres.length === 0) { // Head of the list\n      const newList  = new Collection(total)\n      store.remove(totalTrash)\n      // Replace old list with new list:\n      substituteInDoc(store, newList, ele, doc)\n      return\n    }\n    if (pres.length !== 1) throw new Error(`Bad list structure: ${pres.length} pres at ${ele}`)\n    const pre = pres[0].subject\n    if (pre.termType !== 'BlankNode')  throw new Error(`Bad list element node ${pre} type: ${pre.termType} `)\n\n    preceding(pre, total, totalTrash)\n    return\n  }\n\n  substituteNillsInDoc(store, doc) // lone ones only\n\n  const tails = store.statementsMatching(null, RDF('rest'), RDF('nil'), doc)\n  tails.forEach(tail => {\n    if (tail.subject.termType !== 'BlankNode')\n      throw new Error(`Bad list element node ${tail.subject} type: ${tail.subject.termType} `)\n    preceding(tail.subject, [], [])\n  })\n\n}\n","/**\n*\n*  UTF-8 data encode / decode\n*  http://www.webtoolkit.info/\n*\n**/\nimport * as Uri from './uri'\nimport { ArrayIndexOf } from './utils'\nimport { convertFirstRestNil } from './lists'\n\nfunction hexify (str) { // also used in parser\n  return encodeURI(str)\n}\n\nvar Utf8 = {\n    // public method for url encoding\n    encode : function (string) {\n        string = string.replace(/\\r\\n/g,\"\\n\")\n        var utftext = \"\"\n\n        for (var n = 0; n < string.length; n++) {\n\n            var c = string.charCodeAt(n)\n\n            if (c < 128) {\n                    utftext += String.fromCharCode(c)\n            }\n            else if((c > 127) && (c < 2048)) {\n                    utftext += String.fromCharCode((c >> 6) | 192)\n                    utftext += String.fromCharCode((c & 63) | 128)\n            }\n            else {\n                    utftext += String.fromCharCode((c >> 12) | 224)\n                    utftext += String.fromCharCode(((c >> 6) & 63) | 128)\n                    utftext += String.fromCharCode((c & 63) | 128)\n            }\n\n        }\n\n        return utftext\n    },\n    // public method for url decoding\n    decode : function (utftext) {\n        var string = \"\"\n        var i = 0\n\n        while ( i < utftext.length ) {\n\n                var c = utftext.charCodeAt(i)\n                if (c < 128) {\n                        string += String.fromCharCode(c)\n                        i++\n                }\n                else if((c > 191) && (c < 224)) {\n                        string += String.fromCharCode(((c & 31) << 6)\n                            | (utftext.charCodeAt(i+1) & 63))\n                        i += 2\n                }\n                else {\n                        string += String.fromCharCode(((c & 15) << 12)\n                            | ((utftext.charCodeAt(i+1) & 63) << 6)\n                            | (utftext.charCodeAt(i+2) & 63))\n                        i += 3\n                }\n        }\n        return string\n    }\n}// Things we need to define to make converted pythn code work in js\n// environment of $rdf\n\nvar RDFSink_forSomeSym = \"http://www.w3.org/2000/10/swap/log#forSome\"\nvar RDFSink_forAllSym = \"http://www.w3.org/2000/10/swap/log#forAll\"\nvar Logic_NS = \"http://www.w3.org/2000/10/swap/log#\"\n\n//  pyjs seems to reference runtime library which I didn't find\n\nvar pyjslib_Tuple = function(theList) { return theList }\n\nvar pyjslib_List = function(theList) { return theList }\n\nvar pyjslib_Dict = function(listOfPairs) {\n    if (listOfPairs.length > 0)\n\tthrow \"missing.js: oops nnonempty dict not imp\"\n    return []\n}\n\nvar pyjslib_len = function(s) { return s.length }\n\nvar pyjslib_slice = function(str, i, j) {\n    if (typeof str.slice == 'undefined')\n        throw '@@ mising.js: No .slice function for '+str+' of type '+(typeof str)\n    if ((typeof j == 'undefined') || (j ==null)) return str.slice(i)\n    return str.slice(i, j) // @ exactly the same spec?\n}\nvar StopIteration = Error('dummy error stop iteration')\n\nvar pyjslib_Iterator = function(theList) {\n    this.last = 0\n    this.li = theList\n    this.next = function() {\n\tif (this.last == this.li.length) throw StopIteration\n\treturn this.li[this.last++]\n    }\n    return this\n}\n\nvar ord = function(str) {\n    return str.charCodeAt(0)\n}\n\nvar string_find = function(str, s) {\n    return str.indexOf(s)\n}\n\nvar assertFudge = function(condition, desc) {\n    if (condition) return\n    if (desc) throw \"python Assertion failed: \"+desc\n    throw \"(python) Assertion failed.\"\n}\n\n\nvar stringFromCharCode = function(uesc) {\n    return String.fromCharCode(uesc)\n}\n\n\nString.prototype.encode = function(encoding) {\n    if (encoding != 'utf-8') throw \"UTF8_converter: can only do utf-8\"\n    return Utf8.encode(this)\n}\nString.prototype.decode = function(encoding) {\n    if (encoding != 'utf-8') throw \"UTF8_converter: can only do utf-8\"\n    //return Utf8.decode(this);\n    return this\n}\n\n\n\nvar uripath_join = function(base, given) {\n    return Uri.join(given, base)  // sad but true\n}\n\nvar becauseSubexpression = null // No reason needed\nvar diag_tracking = 0\nvar diag_chatty_flag = 0\nvar diag_progress = function(str) { /*$rdf.log.debug(str);*/ }\n\n// why_BecauseOfData = function(doc, reason) { return doc };\n\n\nvar RDF_type_URI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\"\nvar RDF_nil_URI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\"\nvar DAML_sameAs_URI = \"http://www.w3.org/2002/07/owl#sameAs\"\n\n/*\nfunction SyntaxError(details) {\n    return new __SyntaxError(details);\n}\n*/\n\nfunction __SyntaxError(details) {\n    this.details = details\n}\n\n/*\n\n$Id: n3parser.js 14561 2008-02-23 06:37:26Z kennyluck $\n\nHAND EDITED FOR CONVERSION TO JAVASCRIPT\n\nThis module implements a Nptation3 parser, and the final\npart of a notation3 serializer.\n\nSee also:\n\nNotation 3\nhttp://www.w3.org/DesignIssues/Notation3\n\nClosed World Machine - and RDF Processor\nhttp://www.w3.org/2000/10/swap/cwm\n\nTo DO: See also \"@@\" in comments\n\n- Clean up interfaces\n______________________________________________\n\nModule originally by Dan Connolly, includeing notation3\nparser and RDF generator. TimBL added RDF stream model\nand N3 generation, replaced stream model with use\nof common store/formula API.  Yosi Scharf developped\nthe module, including tests and test harness.\n\n*/\n\nvar ADDED_HASH = \"#\"\nvar LOG_implies_URI = \"http://www.w3.org/2000/10/swap/log#implies\"\nvar INTEGER_DATATYPE = \"http://www.w3.org/2001/XMLSchema#integer\"\nvar FLOAT_DATATYPE = \"http://www.w3.org/2001/XMLSchema#double\"\nvar DECIMAL_DATATYPE = \"http://www.w3.org/2001/XMLSchema#decimal\"\nvar DATE_DATATYPE = \"http://www.w3.org/2001/XMLSchema#date\"\nvar DATETIME_DATATYPE = \"http://www.w3.org/2001/XMLSchema#dateTime\"\nvar BOOLEAN_DATATYPE = \"http://www.w3.org/2001/XMLSchema#boolean\"\nvar option_noregen = 0\nvar _notQNameChars = \"\\t\\r\\n !\\\"#$%&'()*.,+/;<=>?@[\\\\]^`{|}~\"\nvar _notNameChars =  ( _notQNameChars + \":\" ) \nvar _rdfns = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\nvar N3CommentCharacter = \"#\"\nvar eol = new RegExp(\"^[ \\\\t]*(#[^\\\\n]*)?\\\\r?\\\\n\", 'g')\nvar eof = new RegExp(\"^[ \\\\t]*(#[^\\\\n]*)?$\", 'g')\nvar ws = new RegExp(\"^[ \\\\t]*\", 'g')\nvar signed_integer = new RegExp(\"^[-+]?[0-9]+\", 'g')\nvar number_syntax = new RegExp(\"^([-+]?[0-9]+)(\\\\.[0-9]+)?([eE][-+]?[0-9]+)?\", 'g')\nvar datetime_syntax = new RegExp('^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\\\.[0-9]*)?)?)?Z?')\n\n// Reused in tight loops to detect whitespace or comment after a dot\nvar wsOrHash = new RegExp(\"[\\\\s#]\")\n\nvar digitstring = new RegExp(\"^[0-9]+\", 'g')\nvar interesting = new RegExp(\"[\\\\\\\\\\\\r\\\\n\\\\\\\"]\", 'g')\nvar langcode = new RegExp(\"^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\", 'g')\n\n// Returns true when a dot at position i should terminate a name,\n// i.e., when the next character is whitespace, a comment start, or EOF\nfunction dotTerminatesName(str, i) {\n    var next = str.charAt(i + 1)\n    return next === '' || wsOrHash.test(next)\n}\n\nfunction createSinkParser(store, openFormula, thisDoc, baseURI, genPrefix, metaURI, flags, why) {\n    return new SinkParser(store, openFormula, thisDoc, baseURI, genPrefix, metaURI, flags, why)\n}\n\nexport default createSinkParser\n\nexport class SinkParser {\n    constructor(store, openFormula, thisDoc, baseURI, genPrefix, metaURI, flags, why) {\n        if (typeof openFormula == 'undefined') openFormula=null\n        if (typeof thisDoc == 'undefined') thisDoc=\"\"\n        if (typeof baseURI == 'undefined') baseURI=null\n        if (typeof genPrefix == 'undefined') genPrefix=\"\"\n        if (typeof metaURI == 'undefined') metaURI=null\n        if (typeof flags == 'undefined') flags=\"\"\n        if (typeof why == 'undefined') why=null\n        /*\n        note: namespace names should *not* end in #;\n        the # will get added during qname processing */\n\n        this._bindings = new pyjslib_Dict([])\n        this._flags = flags\n        if ((thisDoc != \"\")) {\n            assertFudge((thisDoc.indexOf(\":\") >= 0),  ( \"Document URI not absolute: \" + thisDoc ) )\n            this._bindings[\"\"] = (  ( thisDoc + \"#\" ) )\n        }\n        this._store = store\n        if (genPrefix) {\n            store.setGenPrefix(genPrefix)\n        }\n        this._thisDoc = thisDoc\n        this.source = store.sym(thisDoc)\n        this.lines = 0\n        this.statementCount = 0\n        this.hasNil = false\n        this.startOfLine = 0\n        this.previousLine = 0\n        this._genPrefix = genPrefix\n        this.keywords = new pyjslib_List([\"a\", \"this\", \"bind\", \"has\", \"is\", \"of\", \"true\", \"false\"])\n        this.keywordsSet = 0\n        this._anonymousNodes = new pyjslib_Dict([])\n        this._variables = new pyjslib_Dict([])\n        this._parentVariables = new pyjslib_Dict([])\n        this._reason = why\n        this._reason2 = null\n        if (diag_tracking) {\n            this._reason2 = why_BecauseOfData(store.sym(thisDoc), this._reason)\n        }\n        if (baseURI) {\n            this._baseURI = baseURI\n        }\n        else {\n            if (thisDoc) {\n                this._baseURI = thisDoc\n            }\n            else {\n                this._baseURI = null\n            }\n        }\n        assertFudge(!(this._baseURI) || (this._baseURI.indexOf(\":\") >= 0))\n        if (!(this._genPrefix)) {\n            if (this._thisDoc) {\n                this._genPrefix =  ( this._thisDoc + \"#_g\" ) \n            }\n            else {\n                this._genPrefix = RDFSink_uniqueURI()\n            }\n        }\n        if ((openFormula == null)) {\n            if (this._thisDoc) {\n                this._formula = store.formula( ( thisDoc + \"#_formula\" ) )\n            }\n            else {\n                this._formula = store.formula()\n            }\n        }\n        else {\n            this._formula = openFormula\n        }\n        this._context = this._formula\n        this._parentContext = null\n    }\n\n\n    here(i) {\n        return  (  (  (  ( this._genPrefix + \"_L\" )  + this.lines )  + \"C\" )  +  (  ( i - this.startOfLine )  + 1 )  ) \n    };\n    formula() {\n        return this._formula\n    };\n    loadStream(stream) {\n        return this.loadBuf(stream.read())\n    };\n    loadBuf(buf) {\n        /*\n        Parses a buffer and returns its top level formula*/\n\n        this.startDoc()\n        this.feed(buf)\n        return this.endDoc()\n    };\n    feed(octets) {\n        /*\n        Feed an octet stream tothe parser\n\n        if BadSyntax is raised, the string\n        passed in the exception object is the\n        remainder after any statements have been parsed.\n        So if there is more data to feed to the\n        parser, it should be straightforward to recover.*/\n\n        var str = octets.decode(\"utf-8\")\n        var i = 0\n        while ((i >= 0)) {\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                return\n            }\n            var i = this.directiveOrStatement(str, j)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"expected directive or statement\")\n            }\n        }\n    };\n    directiveOrStatement(str, h) {\n        var i = this.skipSpace(str, h)\n        if ((i < 0)) {\n            return i\n        }\n        var j = this.directive(str, i)\n        if ((j >= 0)) {\n            return this.checkDot(str, j)\n        }\n        var j = this.statement(str, i)\n        if ((j >= 0)) {\n            return this.checkDot(str, j)\n        }\n        return j\n    };\n    tok(tok, str, i) {\n        /*\n        Check for keyword.  Space must have been stripped on entry and\n        we must not be at end of file.*/\n        var whitespace = \"\\t\\n\\v\\f\\r \"\n        if ((str.slice( i,  ( i + 1 ) ) == \"@\")) {\n            var i =  ( i + 1 ) \n        }\n        else {\n            if ((ArrayIndexOf(this.keywords,tok) < 0)) {\n                return -1\n            }\n        }\n        var k =  ( i + pyjslib_len(tok) ) \n        if ((str.slice( i, k) == tok) && (_notQNameChars.indexOf(str.charAt(k)) >= 0)) {\n            return k\n        }\n        else {\n            return -1\n        }\n    };\n    directive(str, i) {\n        var j = this.skipSpace(str, i)\n        if ((j < 0)) {\n            return j\n        }\n        var res = new pyjslib_List([])\n        var j = this.tok(\"bind\", str, i)\n        if ((j > 0)) {\n            throw BadSyntax(this._thisDoc, this.lines, str, i, \"keyword bind is obsolete: use @prefix\")\n        }\n        var j = this.tok(\"keywords\", str, i)\n        if ((j > 0)) {\n            var i = this.commaSeparatedList(str, j, res, false)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"'@keywords' needs comma separated list of words\")\n            }\n            this.setKeywords(pyjslib_slice(res, null, null))\n            if ((diag_chatty_flag > 80)) {\n                diag_progress(\"Keywords \", this.keywords)\n            }\n            return i\n        }\n        var j = this.tok(\"forAll\", str, i)\n        if ((j > 0)) {\n            var i = this.commaSeparatedList(str, j, res, true)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"Bad variable list after @forAll\")\n            }\n\n            var __x = new pyjslib_Iterator(res)\n            try {\n                while (true) {\n                    var x = __x.next()\n\n\n                    if (ArrayIndexOf(this._variables,x) < 0 || (ArrayIndexOf(this._parentVariables,x) >= 0)) {\n                        this._variables[x] = ( this._context.newUniversal(x))\n                    }\n\n                }\n            } catch (e) {\n                if (e != StopIteration) {\n                    throw e\n                }\n            }\n\n            return i\n        }\n        var j = this.tok(\"forSome\", str, i)\n        if ((j > 0)) {\n            var i = this.commaSeparatedList(str, j, res, this.uri_ref2)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"Bad variable list after @forSome\")\n            }\n\n            var __x = new pyjslib_Iterator(res)\n            try {\n                while (true) {\n                    var x = __x.next()\n\n\n                    this._context.declareExistential(x)\n\n                }\n            } catch (e) {\n                if (e != StopIteration) {\n                    throw e\n                }\n            }\n\n            return i\n        }\n        var j = this.tok(\"prefix\", str, i)\n        if ((j >= 0)) {\n            var t = new pyjslib_List([])\n            var i = this.qname(str, j, t)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"expected qname after @prefix\")\n            }\n            var j = this.uri_ref2(str, i, t)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected <uriref> after @prefix _qname_\")\n            }\n            var ns = t[1].uri\n            if (this._baseURI) {\n                var ns = uripath_join(this._baseURI, ns)\n            }\n            else {\n                assertFudge((ns.indexOf(\":\") >= 0), \"With no base URI, cannot handle relative URI for NS\")\n            }\n            assertFudge((ns.indexOf(\":\") >= 0))\n            this._bindings[t[0][0]] = ( ns)\n\n            this.bind(t[0][0], hexify(ns))\n            return j\n        }\n        var j = this.tok(\"base\", str, i)\n        if ((j >= 0)) {\n            var t = new pyjslib_List([])\n            var i = this.uri_ref2(str, j, t)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"expected <uri> after @base \")\n            }\n            var ns = t[0].uri\n            if (this._baseURI) {\n                var ns = uripath_join(this._baseURI, ns)\n            }\n            else {\n                throw BadSyntax(this._thisDoc, this.lines, str, j,  (  ( \"With no previous base URI, cannot use relative URI in @base  <\" + ns )  + \">\" ) )\n            }\n            assertFudge((ns.indexOf(\":\") >= 0))\n            this._baseURI = ns\n            return i\n        }\n        return -1\n    };\n    bind(qn, uri) {\n        if ((qn == \"\")) {\n        }\n        else {\n            this._store.setPrefixForURI(qn, uri)\n        }\n    };\n    setKeywords(k) {\n        /*\n        Takes a list of strings*/\n\n        if ((k == null)) {\n            this.keywordsSet = 0\n        }\n        else {\n            this.keywords = k\n            this.keywordsSet = 1\n        }\n    };\n    startDoc() {\n    };\n\n    /* Signal end of document and stop parsing. returns formula */\n    endDoc() {\n        if (this.hasNil && this._store.rdfFactory.supports[\"COLLECTIONS\"]) {\n          convertFirstRestNil(this._store, this.source)\n        }\n        return this._formula\n    };\n    makeStatement(quad) {\n        quad[0].add(quad[2], quad[1], quad[3], this.source)\n        if ((quad[2].uri && quad[2].uri === RDF_nil_URI)\n        || (quad[3].uri && quad[3].uri === RDF_nil_URI)) {\n          this.hasNil = true\n        }\n        this.statementCount += 1\n    };\n    statement(str, i) {\n        var r = new pyjslib_List([])\n        var i = this.object(str, i, r)\n        if ((i < 0)) {\n            return i\n        }\n        var j = this.property_list(str, i, r[0])\n        if ((j < 0)) {\n            throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected propertylist\")\n        }\n        return j\n    };\n    subject(str, i, res) {\n        return this.item(str, i, res)\n    };\n    verb(str, i, res) {\n        /*\n        has _prop_\n        is _prop_ of\n        a\n        =\n        _prop_\n        >- prop ->\n        <- prop -<\n        _operator_*/\n\n    var j = this.skipSpace(str, i)\n        if ((j < 0)) {\n            return j\n        }\n        var r = new pyjslib_List([])\n        var j = this.tok(\"has\", str, i)\n        if ((j >= 0)) {\n            var i = this.prop(str, j, r)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"expected property after 'has'\")\n            }\n            res.push(new pyjslib_Tuple([\"->\", r[0]]))\n            return i\n        }\n        var j = this.tok(\"is\", str, i)\n        if ((j >= 0)) {\n            var i = this.prop(str, j, r)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"expected <property> after 'is'\")\n            }\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"End of file found, expected property after 'is'\")\n                return j\n            }\n            var i = j\n            var j = this.tok(\"of\", str, i)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected 'of' after 'is' <prop>\")\n            }\n            res.push(new pyjslib_Tuple([\"<-\", r[0]]))\n            return j\n        }\n        var j = this.tok(\"a\", str, i)\n        if ((j >= 0)) {\n            res.push(new pyjslib_Tuple([\"->\", this._store.sym(RDF_type_URI)]))\n            return j\n        }\n        if ((str.slice( i,  ( i + 2 ) ) == \"<=\")) {\n            res.push(new pyjslib_Tuple([\"<-\", this._store.sym( ( Logic_NS + \"implies\" ) )]))\n            return  ( i + 2 ) \n        }\n        if ((str.slice( i,  ( i + 1 ) ) == \"=\")) {\n            if ((str.slice(  ( i + 1 ) ,  ( i + 2 ) ) == \">\")) {\n                res.push(new pyjslib_Tuple([\"->\", this._store.sym( ( Logic_NS + \"implies\" ) )]))\n                return  ( i + 2 ) \n            }\n            res.push(new pyjslib_Tuple([\"->\", this._store.sym(DAML_sameAs_URI)]))\n            return  ( i + 1 ) \n        }\n        if ((str.slice( i,  ( i + 2 ) ) == \":=\")) {\n            res.push(new pyjslib_Tuple([\"->\",  ( Logic_NS + \"becomes\" ) ]))\n            return  ( i + 2 ) \n        }\n        var j = this.prop(str, i, r)\n        if ((j >= 0)) {\n            res.push(new pyjslib_Tuple([\"->\", r[0]]))\n            return j\n        }\n        if ((str.slice( i,  ( i + 2 ) ) == \">-\") || (str.slice( i,  ( i + 2 ) ) == \"<-\")) {\n            throw BadSyntax(this._thisDoc, this.lines, str, j, \">- ... -> syntax is obsolete.\")\n        }\n        return -1\n    };\n    prop(str, i, res) {\n        return this.item(str, i, res)\n    };\n    item(str, i, res) {\n        return this.path(str, i, res)\n    };\n    blankNode(uri) {\n        return this._context.bnode(uri, this._reason2)\n    };\n    path(str, i, res) {\n        /*\n        Parse the path production.\n        */\n\n        var j = this.nodeOrLiteral(str, i, res)\n        if ((j < 0)) {\n            return j\n        }\n        while ((\"!^.\".indexOf(str.slice( j,  ( j + 1 ) )) >= 0)) {\n            var ch = str.slice( j,  ( j + 1 ) )\n            if ((ch == \".\")) {\n                if (dotTerminatesName(str, j)) {\n                    break\n                }\n            }\n            var subj = res.pop()\n            var obj = this.blankNode(this.here(j))\n            var j = this.node(str,  ( j + 1 ) , res)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"EOF found in middle of path syntax\")\n            }\n            var pred = res.pop()\n            if ((ch == \"^\")) {\n                this.makeStatement(new pyjslib_Tuple([this._context, pred, obj, subj]))\n            }\n            else {\n                this.makeStatement(new pyjslib_Tuple([this._context, pred, subj, obj]))\n            }\n            res.push(obj)\n        }\n        return j\n    };\n    anonymousNode(ln) {\n        /*\n        Remember or generate a term for one of these _: anonymous nodes*/\n\n        var term = this._anonymousNodes[ln]\n        if (term) {\n            return term\n        }\n        var term = this._store.bnode(ln)\n        // var term = this._store.bnode(this._context, this._reason2); eh?\n        this._anonymousNodes[ln] = ( term)\n        return term\n    };\n    node(str, i, res, subjectAlready) {\n        if (typeof subjectAlready == 'undefined') subjectAlready=null\n        /*\n        Parse the <node> production.\n        Space is now skipped once at the beginning\n        instead of in multipe calls to self.skipSpace().\n        */\n\n        var subj = subjectAlready\n        var j = this.skipSpace(str, i)\n        if ((j < 0)) {\n            return j\n        }\n        var i = j\n        var ch = str.slice( i,  ( i + 1 ) )\n        if ((ch == \"[\")) {\n            var bnodeID = this.here(i)\n            var j = this.skipSpace(str,  ( i + 1 ) )\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"EOF after '['\")\n            }\n            if ((str.slice( j,  ( j + 1 ) ) == \"=\")) {\n                var i =  ( j + 1 ) \n                var objs = new pyjslib_List([])\n                var j = this.objectList(str, i, objs)\n\n                if ((j >= 0)) {\n                    var subj = objs[0]\n                    if ((pyjslib_len(objs) > 1)) {\n                        var __obj = new pyjslib_Iterator(objs)\n                        try {\n                            while (true) {\n                                var obj = __obj.next()\n                                this.makeStatement(new pyjslib_Tuple([this._context, this._store.sym(DAML_sameAs_URI), subj, obj]))\n                            }\n                        } catch (e) {\n                            if (e != StopIteration) {\n                                throw e\n                            }\n                        }\n                    }\n                    var j = this.skipSpace(str, j)\n                    if ((j < 0)) {\n                        throw BadSyntax(this._thisDoc, this.lines, str, i, \"EOF when objectList expected after [ = \")\n                    }\n                    if ((str.slice( j,  ( j + 1 ) ) == \";\")) {\n                        var j =  ( j + 1 ) \n                    }\n                }\n                else {\n                    throw BadSyntax(this._thisDoc, this.lines, str, i, \"objectList expected after [= \")\n                }\n            }\n            if ((subj == null)) {\n                var subj = this.blankNode(bnodeID)\n            }\n            var i = this.property_list(str, j, subj)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"property_list expected\")\n            }\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"EOF when ']' expected after [ <propertyList>\")\n            }\n            if ((str.slice( j,  ( j + 1 ) ) == \".\")) {\n                // If a dot is found after a blank node, treat it as a statement terminator.\n                // Do NOT consume the '.' here: statement terminators are handled centrally by\n                // checkDot() (called by directiveOrStatement after statement()). Consuming the dot\n                // locally would bypass that unified logic and could cause inconsistencies.\n                // We do consume ']' below because it is a structural closer of the blank node,\n                // not a statement terminator.\n                res.push(subj)\n                return j // leave '.' for checkDot()\n            }\n            if ((str.slice( j,  ( j + 1 ) ) != \"]\")) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"']' expected\")\n            }\n            res.push(subj)\n            return  ( j + 1 ) \n        }\n        if ((ch == \"{\")) {\n            var ch2 = str.slice(  ( i + 1 ) ,  ( i + 2 ) )\n            if ((ch2 == \"$\")) {\n                i += 1\n                var j =  ( i + 1 ) \n                var mylist = new pyjslib_List([])\n                var first_run = true\n                while (1) {\n                    var i = this.skipSpace(str, j)\n                    if ((i < 0)) {\n                        throw BadSyntax(this._thisDoc, this.lines, str, i, \"needed '$}', found end.\")\n                    }\n                    if ((str.slice( i,  ( i + 2 ) ) == \"$}\")) {\n                        var j =  ( i + 2 ) \n                        break\n                    }\n                    if (!(first_run)) {\n                        if ((str.slice( i,  ( i + 1 ) ) == \",\")) {\n                            i += 1\n                        }\n                        else {\n                            throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected: ','\")\n                        }\n                    }\n                    else {\n                        var first_run = false\n                    }\n                    var item = new pyjslib_List([])\n                    var j = this.item(str, i, item)\n                    if ((j < 0)) {\n                        throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected item in set or '$}'\")\n                    }\n                    mylist.push(item[0])\n                }\n                res.push(this._store.newSet(mylist, this._context))\n                return j\n            }\n            else {\n                var j =  ( i + 1 ) \n                var oldParentContext = this._parentContext\n                this._parentContext = this._context\n                var parentAnonymousNodes = this._anonymousNodes\n                var grandParentVariables = this._parentVariables\n                this._parentVariables = this._variables\n                this._anonymousNodes = new pyjslib_Dict([])\n                this._variables = this._variables.slice()\n                var reason2 = this._reason2\n                this._reason2 = becauseSubexpression\n                if ((subj == null)) {\n                    var subj = this._store.formula()\n                }\n                this._context = subj\n                while (1) {\n                    var i = this.skipSpace(str, j)\n                    if ((i < 0)) {\n                        throw BadSyntax(this._thisDoc, this.lines, str, i, \"needed '}', found end.\")\n                    }\n                    if ((str.slice( i,  ( i + 1 ) ) == \"}\")) {\n                        var j =  ( i + 1 ) \n                        break\n                    }\n                    var j = this.directiveOrStatement(str, i)\n                    if ((j < 0)) {\n                        throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected statement or '}'\")\n                    }\n                }\n                this._anonymousNodes = parentAnonymousNodes\n                this._variables = this._parentVariables\n                this._parentVariables = grandParentVariables\n                this._context = this._parentContext\n                this._reason2 = reason2\n                this._parentContext = oldParentContext\n                res.push(subj.close())\n                return j\n            }\n        }\n        if ((ch == \"(\")) {\n            var thing_type = this._store.list\n            var ch2 = str.slice(  ( i + 1 ) ,  ( i + 2 ) )\n            if ((ch2 == \"$\")) {\n                var thing_type = this._store.newSet\n                i += 1\n            }\n            var j =  ( i + 1 ) \n            var mylist = new pyjslib_List([])\n            while (1) {\n                var i = this.skipSpace(str, j)\n                if ((i < 0)) {\n                    throw BadSyntax(this._thisDoc, this.lines, str, i, \"needed ')', found end.\")\n                }\n                if ((str.slice( i,  ( i + 1 ) ) == \")\")) {\n                    var j =  ( i + 1 ) \n                    break\n                }\n                var item = new pyjslib_List([])\n                var j = this.item(str, i, item)\n                if ((j < 0)) {\n                    throw BadSyntax(this._thisDoc, this.lines, str, i, \"expected item in list or ')'\")\n                }\n                mylist.push(item[0])\n            }\n            res.push(thing_type(mylist, this._context))\n            return j\n        }\n        var j = this.tok(\"this\", str, i)\n        if ((j >= 0)) {\n            throw BadSyntax(this._thisDoc, this.lines, str, i, \"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.\")\n            res.push(this._context)\n            return j\n        }\n        var j = this.tok(\"true\", str, i)\n        if ((j >= 0)) {\n            res.push(true)\n            return j\n        }\n        var j = this.tok(\"false\", str, i)\n        if ((j >= 0)) {\n            res.push(false)\n            return j\n        }\n        if ((subj == null)) {\n            var j = this.uri_ref2(str, i, res)\n            if ((j >= 0)) {\n                return j\n            }\n        }\n        return -1\n    };\n    property_list(str, i, subj) {\n        /*\n        Parse property list\n        Leaves the terminating punctuation in the buffer\n        */\n\n        while (1) {\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"EOF found when expected verb in property list\")\n                return j\n            }\n            if ((str.slice( j,  ( j + 2 ) ) == \":-\")) {\n                var i =  ( j + 2 ) \n                var res = new pyjslib_List([])\n                var j = this.node(str, i, res, subj)\n                if ((j < 0)) {\n                    throw BadSyntax(this._thisDoc, this.lines, str, i, \"bad {} or () or [] node after :- \")\n                }\n                var i = j\n                continue\n            }\n            var i = j\n            var v = new pyjslib_List([])\n            var j = this.verb(str, i, v)\n            if ((j <= 0)) {\n                return i\n            }\n            var objs = new pyjslib_List([])\n            var i = this.objectList(str, j, objs)\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"objectList expected\")\n            }\n\n            var __obj = new pyjslib_Iterator(objs)\n            try {\n                while (true) {\n                    var obj = __obj.next()\n\n\n                    var pairFudge = v[0]\n                    var dir = pairFudge[0]\n                    var sym = pairFudge[1]\n                    if ((dir == \"->\")) {\n                        this.makeStatement(new pyjslib_Tuple([this._context, sym, subj, obj]))\n                    }\n                    else {\n                        this.makeStatement(new pyjslib_Tuple([this._context, sym, obj, subj]))\n                    }\n\n                }\n            } catch (e) {\n                if (e != StopIteration) {\n                    throw e\n                }\n            }\n\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"EOF found in list of objects\")\n                return j\n            }\n            if ((str.slice( i,  ( i + 1 ) ) != \";\")) {\n                return i\n            }\n            var i =  ( i + 1 ) \n        }\n    };\n    commaSeparatedList(str, j, res, ofUris) {\n        /*\n        return value: -1 bad syntax; >1 new position in str\n        res has things found appended\n\n        Used to use a final value of the function to be called, e.g. this.bareWord\n        but passing the function didn't work fo js converion pyjs\n        */\n\n        var i = this.skipSpace(str, j)\n        if ((i < 0)) {\n            throw BadSyntax(this._thisDoc, this.lines, str, i, \"EOF found expecting comma sep list\")\n            return i\n        }\n        if ((str.charAt(i) == \".\")) {\n            return j\n        }\n        if (ofUris) {\n            var i = this.uri_ref2(str, i, res)\n        }\n        else {\n            var i = this.bareWord(str, i, res)\n        }\n        if ((i < 0)) {\n            return -1\n        }\n        while (1) {\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                return j\n            }\n            var ch = str.slice( j,  ( j + 1 ) )\n            if ((ch != \",\")) {\n                if ((ch != \".\")) {\n                    return -1\n                }\n                return j\n            }\n            if (ofUris) {\n                var i = this.uri_ref2(str,  ( j + 1 ) , res)\n            }\n            else {\n                var i = this.bareWord(str,  ( j + 1 ) , res)\n            }\n            if ((i < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i, \"bad list content\")\n                return i\n            }\n        }\n    };\n    objectList(str, i, res) {\n        var i = this.object(str, i, res)\n        if ((i < 0)) {\n            return -1\n        }\n        while (1) {\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, j, \"EOF found after object\")\n                return j\n            }\n            if ((str.slice( j,  ( j + 1 ) ) != \",\")) {\n                return j\n            }\n            var i = this.object(str,  ( j + 1 ) , res)\n            if ((i < 0)) {\n                return i\n            }\n        }\n    };\n    checkDot(str, i) {\n        var j = this.skipSpace(str, i)\n        if ((j < 0)) {\n            return j\n        }\n        if ((str.slice( j,  ( j + 1 ) ) == \".\")) {\n            return  ( j + 1 ) \n        }\n        if ((str.slice( j,  ( j + 1 ) ) == \"}\")) {\n            return j\n        }\n        if ((str.slice( j,  ( j + 1 ) ) == \"]\")) {\n            return j\n        }\n        throw BadSyntax(this._thisDoc, this.lines, str, j, \"expected '.' or '}' or ']' at end of statement\")\n        return i\n    };\n    uri_ref2(str, i, res) {\n        /*\n        Generate uri from n3 representation.\n\n        Note that the RDF convention of directly concatenating\n        NS and local name is now used though I prefer inserting a '#'\n        to make the namesapces look more like what XML folks expect.\n        */\n\n        var qn = new pyjslib_List([])\n        var j = this.qname(str, i, qn)\n        if ((j >= 0)) {\n            var pairFudge = qn[0]\n            var pfx = pairFudge[0]\n            var ln = pairFudge[1]\n            if ((pfx == null)) {\n                assertFudge(0, \"not used?\")\n                var ns =  ( this._baseURI + ADDED_HASH ) \n            }\n            else {\n                var ns = this._bindings[pfx]\n                if (!(ns)) {\n                    if ((pfx == \"_\")) {\n                        res.push(this.anonymousNode(ln))\n                        return j\n                    }\n                    throw BadSyntax(this._thisDoc, this.lines, str, i,  (  ( \"Prefix \" + pfx )  + \" not bound.\" ) )\n                }\n            }\n            var symb = this._store.sym( ( ns + ln ) )\n            if ((ArrayIndexOf(this._variables, symb) >= 0)) {\n                res.push(this._variables[symb])\n            }\n            else {\n                res.push(symb)\n            }\n            return j\n        }\n        var i = this.skipSpace(str, i)\n        if ((i < 0)) {\n            return -1\n        }\n        if ((str.charAt(i) == \"?\")) {\n            var v = new pyjslib_List([])\n            var j = this.variable(str, i, v)\n            if ((j > 0)) {\n                res.push(v[0])\n                return j\n            }\n            return -1\n        }\n        else if ((str.charAt(i) == \"<\")) {\n            var i =  ( i + 1 ) \n            var st = i\n            while ((i < pyjslib_len(str))) {\n                if ((str.charAt(i) == \">\")) {\n                    var uref = str.slice( st, i)\n                    if (this._baseURI) {\n                        var uref = uripath_join(this._baseURI, uref)\n                    }\n                    else {\n                        assertFudge((uref.indexOf(\":\") >= 0), \"With no base URI, cannot deal with relative URIs\")\n                    }\n                    if ((str.slice(  ( i - 1 ) , i) == \"#\") && !((pyjslib_slice(uref, -1, null) == \"#\"))) {\n                        var uref =  ( uref + \"#\" ) \n                    }\n                    var symb = this._store.sym(uref)\n                    if ((ArrayIndexOf(this._variables,symb) >= 0)) {\n                        res.push(this._variables[symb])\n                    }\n                    else {\n                        res.push(symb)\n                    }\n                    return  ( i + 1 ) \n                }\n                var i =  ( i + 1 ) \n            }\n            throw BadSyntax(this._thisDoc, this.lines, str, j, \"unterminated URI reference\")\n        }\n        else if (this.keywordsSet) {\n            var v = new pyjslib_List([])\n            var j = this.bareWord(str, i, v)\n            if ((j < 0)) {\n                return -1\n            }\n            if ((ArrayIndexOf(this.keywords, v[0]) >= 0)) {\n                throw BadSyntax(this._thisDoc, this.lines, str, i,  (  ( \"Keyword \\\"\" + v[0] )  + \"\\\" not allowed here.\" ) )\n            }\n            res.push(this._store.sym( ( this._bindings[\"\"] + v[0] ) ))\n            return j\n        }\n        else {\n            return -1\n        }\n    };\n    skipSpace(str, i) {\n        /*\n        Skip white space, newlines and comments.\n        return -1 if EOF, else position of first non-ws character*/\n\n        var whitespace = ' \\n\\r\\t\\f\\x0b\\xa0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u3000'\n        for (var j = (i ? i : 0); j < str.length; j++) {\n            var ch = str.charAt(j)\n            // console.log(\"    skipspace j= \"+j + \" i= \" + i + \" n= \" + str.length);\n            // console.log(\" skipspace ch <\" + ch + \">\");\n            if (whitespace.indexOf(ch) < 0 ) { //not ws\n                // console.log(\" skipspace 2 ch <\" + ch + \">\");\n                if( str.charAt(j)==='#' ) {\n                    for (;; j++) {\n                        // console.log(\"    skipspace2 j= \"+j + \" i= \" + i + \" n= \" + str.length);\n                        if (j === str.length) {\n                            return -1 // EOF\n                        }\n                        if (str.charAt(j) === '\\n') {\n                            this.lines = this.lines + 1\n                            break\n                        }\n                    };\n                } else { // Not hash - something interesting\n                    // console.log(\" skipspace 3 ch <\" + ch + \">\");\n                    return j\n                }\n            } else { // Whitespace\n                // console.log(\" skipspace 5 ch <\" + ch + \">\");\n                if (str.charAt(j) === '\\n') {\n                    this.lines = this.lines + 1\n                }\n            }\n        } // next j\n        return -1 // EOF\n    };\n\n    variable(str, i, res) {\n        /*\n        ?abc -> variable(:abc)\n        */\n\n        var j = this.skipSpace(str, i)\n        if ((j < 0)) {\n            return -1\n        }\n        if ((str.slice( j,  ( j + 1 ) ) != \"?\")) {\n            return -1\n        }\n        var j =  ( j + 1 ) \n        var i = j\n        if ((\"0123456789-\".indexOf(str.charAt(j)) >= 0)) {\n            throw BadSyntax(this._thisDoc, this.lines, str, j,  (  ( \"Varible name can't start with '\" + str.charAt(j) )  + \"s'\" ) )\n            return -1\n        }\n        while ((i < pyjslib_len(str)) && (_notNameChars.indexOf(str.charAt(i)) < 0)) {\n            var i =  ( i + 1 ) \n        }\n        if ((this._parentContext == null)) {\n            throw BadSyntax(this._thisDoc, this.lines, str, j,  ( \"Can't use ?xxx syntax for variable in outermost level: \" + str.slice(  ( j - 1 ) , i) ) )\n        }\n        res.push(this._store.variable(str.slice( j, i)))\n        return i\n    };\n    bareWord(str, i, res) {\n        /*\n        abc -> :abc\n        */\n\n        var j = this.skipSpace(str, i)\n        if ((j < 0)) {\n            return -1\n        }\n        var ch = str.charAt(j)\n        if ((\"0123456789-\".indexOf(ch) >= 0)) {\n            return -1\n        }\n        if ((_notNameChars.indexOf(ch) >= 0)) {\n            return -1\n        }\n        var i = j\n        while ((i < pyjslib_len(str))) {\n            var c = str.charAt(i)\n            if (c === '.') {\n                if (dotTerminatesName(str, i)) {\n                    break // treat as statement terminator, not part of name\n                }\n                // else: accept '.' as part of name\n            } else if (_notNameChars.indexOf(c) >= 0) {\n                // Other invalid characters terminate the name\n                break\n            }\n            var i =  ( i + 1 ) \n        }\n        res.push(str.slice( j, i))\n        return i\n    };\n    qname(str, i, res) {\n        /*\n\n        xyz:def -> ('xyz', 'def')\n        If not in keywords and keywordsSet: def -> ('', 'def')\n        :def -> ('', 'def')\n        */\n\n        var i = this.skipSpace(str, i)\n        if ((i < 0)) {\n            return -1\n        }\n        var c = str.charAt(i)\n        if ((\"0123456789-+\".indexOf(c) >= 0)) {\n            return -1\n        }\n        if ((_notNameChars.indexOf(c) < 0)) {\n            var ln = c\n            var i =  ( i + 1 ) \n            while ((i < pyjslib_len(str))) {\n                var c = str.charAt(i)\n                if (c === '.') {\n                    if (dotTerminatesName(str, i)) {\n                        break // dot ends the name here\n                    }\n                } else if (_notNameChars.indexOf(c) >= 0) {\n                    break\n                }\n                var ln =  ( ln + c ) \n                var i =  ( i + 1 ) \n            }\n        }\n        else {\n            var ln = \"\"\n        }\n        if ((i < pyjslib_len(str)) && (str.charAt(i) == \":\")) {\n            var pfx = ln\n            var i =  ( i + 1 ) \n            var ln = \"\"\n            while ((i < pyjslib_len(str))) {\n                var c = str.charAt(i)\n                if (c === '.') {\n                    if (dotTerminatesName(str, i)) {\n                        break // dot ends the name here\n                    }\n                } else if (_notNameChars.indexOf(c) >= 0) {\n                    break\n                }\n                var ln =  ( ln + c ) \n                var i =  ( i + 1 ) \n            }\n            res.push(new pyjslib_Tuple([pfx, ln]))\n            return i\n        }\n        else {\n            if (ln && this.keywordsSet && (ArrayIndexOf(this.keywords, ln) < 0)) {\n                res.push(new pyjslib_Tuple([\"\", ln]))\n                return i\n            }\n            return -1\n        }\n    };\n    object(str, i, res) {\n        var j = this.subject(str, i, res)\n        if ((j >= 0)) {\n            return j\n        }\n        else {\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                return -1\n            }\n            else {\n                var i = j\n            }\n            var delim = null\n            let ch = str.charAt(i)\n            if ((ch == \"\\\"\" || ch == \"'\")) {\n                if (str.slice(i,  ( i + 3 ) == ch + ch)) {\n                    delim = ch + ch + ch\n                }\n                else {\n                    delim = ch\n                }\n                var i =  ( i + pyjslib_len(delim) ) \n                var pairFudge = this.strconst(str, i, delim)\n                var j = pairFudge[0]\n                var s = pairFudge[1]\n                res.push(this._store.literal(s))\n                diag_progress(\"New string const \", s, j)\n                return j\n            }\n            else {\n                return -1\n            }\n        }\n    };\n    nodeOrLiteral(str, i, res) {\n        var j = this.node(str, i, res)\n        if ((j >= 0)) {\n            return j\n        }\n        else {\n            var j = this.skipSpace(str, i)\n            if ((j < 0)) {\n                return -1\n            }\n            else {\n                var i = j\n            }\n            var ch = str.charAt(i)\n            if ((\"-+0987654321\".indexOf(ch) >= 0)) {\n\n                datetime_syntax.lastIndex = 0\n                var m = datetime_syntax.exec(str.slice(i))\n                if ((m != null)) {\n                    // j =  ( i + datetime_syntax.lastIndex ) ;\n                    var val = m[0]\n                    j = i + val.length\n                    if ((val.indexOf(\"T\") >= 0)) {\n                        res.push(this._store.literal(val, this._store.sym(DATETIME_DATATYPE)))\n                    } else {\n                        res.push(this._store.literal(val, this._store.sym(DATE_DATATYPE)))\n                    }\n\n                } else {\n                    number_syntax.lastIndex = 0\n                    var m = number_syntax.exec(str.slice(i))\n                    if ((m == null)) {\n                        throw BadSyntax(this._thisDoc, this.lines, str, i, \"Bad number or date syntax\")\n                    }\n                    j =  ( i + number_syntax.lastIndex ) \n                    var val = str.slice( i, j)\n                    if ((val.indexOf(\"e\") >= 0)) {\n                        res.push(this._store.literal(parseFloat(val), this._store.sym(FLOAT_DATATYPE)))\n                    }\n                    else if ((str.slice( i, j).indexOf(\".\") >= 0)) {\n                        res.push(this._store.literal(parseFloat(val), this._store.sym(DECIMAL_DATATYPE)))\n                    }\n                    else {\n                        res.push(this._store.literal(parseInt(val), this._store.sym(INTEGER_DATATYPE)))\n                    }\n                };\n                return j // Where we have got up to\n            }\n            if ((str.charAt(i) == \"\\\"\")) {\n                if ((str.slice( i,  ( i + 3 ) ) == \"\\\"\\\"\\\"\")) {\n                    var delim = \"\\\"\\\"\\\"\"\n                }\n                else {\n                    var delim = \"\\\"\"\n                }\n                var i =  ( i + pyjslib_len(delim) ) \n                var dt = null\n                var pairFudge = this.strconst(str, i, delim)\n                var j = pairFudge[0]\n                var s = pairFudge[1]\n                var lang = null\n                if ((str.slice( j,  ( j + 1 ) ) == \"@\")) {\n                    langcode.lastIndex = 0\n\n                    var m = langcode.exec(str.slice( ( j + 1 ) ))\n                    if ((m == null)) {\n                        throw BadSyntax(this._thisDoc, startline, str, i, \"Bad language code syntax on string literal, after @\")\n                    }\n                    var i =  (  ( langcode.lastIndex + j )  + 1 ) \n\n                    var lang = str.slice(  ( j + 1 ) , i)\n                    var j = i\n                }\n                if ((str.slice( j,  ( j + 2 ) ) == \"^^\")) {\n                    var res2 = new pyjslib_List([])\n                    var j = this.uri_ref2(str,  ( j + 2 ) , res2)\n                    var dt = res2[0]\n                }\n                res.push(this._store.literal(s, lang || dt))\n                return j\n            }\n            else {\n                return -1\n            }\n        }\n    };\n    strconst(str, i, delim) {\n        /*\n        parse an N3 string constant delimited by delim.\n        return index, val\n        */\n\n        var j = i\n        var ustr = \"\"\n        var startline = this.lines\n        while ((j < pyjslib_len(str))) {\n            var i =  ( j + pyjslib_len(delim) ) \n            if ((str.slice( j, i) == delim)) {\n                return new pyjslib_Tuple([i, ustr])\n            }\n            if ((str.charAt(j) == \"\\\"\")) {\n                var ustr =  ( ustr + \"\\\"\" ) \n                var j =  ( j + 1 ) \n                continue\n            }\n            interesting.lastIndex = 0\n            var m = interesting.exec(str.slice(j))\n            if (!(m)) {\n                throw BadSyntax(this._thisDoc, startline, str, j,  (  (  ( \"Closing quote missing in string at ^ in \" + str.slice(  ( j - 20 ) , j) )  + \"^\" )  + str.slice( j,  ( j + 20 ) ) ) )\n            }\n            var i =  (  ( j + interesting.lastIndex )  - 1 ) \n            var ustr =  ( ustr + str.slice( j, i) ) \n            var ch = str.charAt(i)\n            if ((ch == \"\\\"\")) {\n                var j = i\n                continue\n            }\n            else if ((ch == \"\\r\")) {\n                var j =  ( i + 1 ) \n                continue\n            }\n            else if ((ch == \"\\n\")) {\n                if ((delim == \"\\\"\")) {\n                    throw BadSyntax(this._thisDoc, startline, str, i, \"newline found in string literal\")\n                }\n                this.lines =  ( this.lines + 1 ) \n                var ustr =  ( ustr + ch ) \n                var j =  ( i + 1 ) \n                this.previousLine = this.startOfLine\n                this.startOfLine = j\n            }\n            else if ((ch == \"\\\\\")) {\n                var j =  ( i + 1 ) \n                var ch = str.slice( j,  ( j + 1 ) )\n                if (!(ch)) {\n                    throw BadSyntax(this._thisDoc, startline, str, i, \"unterminated string literal (2)\")\n                }\n                var k = string_find(\"abfrtvn\\\\\\\"\", ch)\n                if ((k >= 0)) {\n                    var uch = \"\\a\\b\\f\\r\\t\\v\\n\\\\\\\"\".charAt(k)\n                    var ustr =  ( ustr + uch ) \n                    var j =  ( j + 1 ) \n                }\n                else if ((ch == \"u\")) {\n                    var pairFudge = this.uEscape(str,  ( j + 1 ) , startline)\n                    var j = pairFudge[0]\n                    var ch = pairFudge[1]\n                    var ustr =  ( ustr + ch ) \n                }\n                else if ((ch == \"U\")) {\n                    var pairFudge = this.UEscape(str,  ( j + 1 ) , startline)\n                    var j = pairFudge[0]\n                    var ch = pairFudge[1]\n                    var ustr =  ( ustr + ch ) \n                }\n                else {\n                    throw BadSyntax(this._thisDoc, this.lines, str, i, \"bad escape\")\n                }\n            }\n        }\n        throw BadSyntax(this._thisDoc, this.lines, str, i, \"unterminated string literal\")\n    };\n    uEscape(str, i, startline) {\n        var j = i\n        var count = 0\n        var value = 0\n        while ((count < 4)) {\n            var chFudge = str.slice( j,  ( j + 1 ) )\n            var ch = chFudge.toLowerCase()\n            var j =  ( j + 1 ) \n            if ((ch == \"\")) {\n                throw BadSyntax(this._thisDoc, startline, str, i, \"unterminated string literal(3)\")\n            }\n            var k = string_find(\"0123456789abcdef\", ch)\n            if ((k < 0)) {\n                throw BadSyntax(this._thisDoc, startline, str, i, \"bad string literal hex escape\")\n            }\n            var value =  (  ( value * 16 )  + k ) \n            var count =  ( count + 1 ) \n        }\n        var uch = String.fromCharCode(value)\n        return new pyjslib_Tuple([j, uch])\n    };\n    UEscape(str, i, startline) {\n        var j = i\n        var count = 0\n        var value = \"\\\\U\"\n        while ((count < 8)) {\n            var chFudge = str.slice( j,  ( j + 1 ) )\n            var ch = chFudge.toLowerCase()\n            var j =  ( j + 1 ) \n            if ((ch == \"\")) {\n                throw BadSyntax(this._thisDoc, startline, str, i, \"unterminated string literal(3)\")\n            }\n            var k = string_find(\"0123456789abcdef\", ch)\n            if ((k < 0)) {\n                throw BadSyntax(this._thisDoc, startline, str, i, \"bad string literal hex escape\")\n            }\n            var value =  ( value + ch ) \n            var count =  ( count + 1 ) \n        }\n        var uch = stringFromCharCode( (  ( \"0x\" + pyjslib_slice(value, 2, 10) )  - 0 ) )\n        return new pyjslib_Tuple([j, uch])\n    };\n}\n\nfunction OLD_BadSyntax(uri, lines, str, i, why) {\n    return new __OLD_BadSyntax(uri, lines, str, i, why)\n}\nfunction __OLD_BadSyntax(uri, lines, str, i, why) {\n    this._str = str.encode(\"utf-8\")\n    this._str = str\n    this._i = i\n    this._why = why\n    this.lines = lines\n    this._uri = uri\n}\n__OLD_BadSyntax.prototype.toString = function() {\n    var str = this._str\n    var i = this._i\n    var st = 0\n    if ((i > 60)) {\n        var pre = \"...\"\n        var st =  ( i - 60 ) \n    }\n    else {\n        var pre = \"\"\n    }\n    if (( ( pyjslib_len(str) - i )  > 60)) {\n        var post = \"...\"\n    }\n    else {\n        var post = \"\"\n    }\n    return \"Line %i of <%s>: Bad syntax (%s) at ^ in:\\n\\\"%s%s^%s%s\\\"\" % new pyjslib_Tuple([ ( this.lines + 1 ) , this._uri, this._why, pre, str.slice( st, i), str.slice( i,  ( i + 60 ) ), post])\n}\n\nfunction BadSyntax(uri, lines, str, i, why) {\n    let lineNo = lines + 1\n    let msg =  (  (  (  (  (  (  (  ( \"Line \" +  ( lineNo )  )  + \" of <\" )  + uri )  + \">: Bad syntax: \" )  + why )  + \"\\nat: \\\"\" )  + str.slice( i,  ( i + 30 ) ) )  + \"\\\"\" ) \n    let e = new SyntaxError(msg, uri , lineNo)\n    e.lineNo = lineNo\n    e.characterInFile = i\n    e.syntaxProblem = why\n    return e\n}\n\nfunction stripCR(str) {\n    var res = \"\"\n\n    var __ch = new pyjslib_Iterator(str)\n    try {\n        while (true) {\n            var ch = __ch.next()\n\n\n            if ((ch != \"\\r\")) {\n                var res =  ( res + ch ) \n            }\n\n        }\n    } catch (e) {\n        if (e != StopIteration) {\n            throw e\n        }\n    }\n\n    return res\n}\n\n\nfunction dummyWrite(x) {\n}\n","import Collection from '../collection'\nimport CanonicalDataFactory from './canonical-data-factory'\nimport { ValueType, CollectionTermType } from '../types'\nimport { DataFactory, DefaultFactoryTypes, Feature, Indexable } from './factory-types'\nimport { isCollection, isVariable } from '../utils/terms'\nimport Variable from '../variable'\nimport { Term } from '../tf-types'\n\ninterface CollectionFactory extends DataFactory {\n  collection(elements: ReadonlyArray<ValueType>): Collection\n}\n\n/**\n * Data factory which also supports Collections\n *\n * Necessary for preventing circular dependencies.\n */\nconst ExtendedTermFactory: CollectionFactory = {\n  ...CanonicalDataFactory,\n\n  supports: {\n    [Feature.collections]: true,\n    [Feature.defaultGraphType]: false,\n    [Feature.equalsMethod]: true,\n    [Feature.identity]: false,\n    [Feature.id]: true,\n    [Feature.reversibleId]: false,\n    [Feature.variableType]: true,\n  },\n\n  /**\n   * Creates a new collection\n   * @param elements - The initial element\n   */\n  collection (elements: ReadonlyArray<ValueType>): Collection {\n    return new Collection(elements)\n  },\n\n  id (term: Term | DefaultFactoryTypes): Indexable {\n    if (isCollection(term)) {\n      return `( ${term.elements.map((e) => {\n        return this.id(e) }).join(', ')} )`\n    }\n\n    if (isVariable(term)) {\n      return Variable.toString(term)\n    }\n\n    return CanonicalDataFactory.id(term)\n  },\n\n  termToNQ (term: Term): string {\n    if (term.termType === CollectionTermType) {\n      return Collection.toNT(term)\n    }\n\n    return CanonicalDataFactory.termToNQ(term)\n  }\n}\n\nexport default ExtendedTermFactory\n","import {arrayToStatements} from './utils'\n\n/**\n * Parses json-ld formatted JS objects to a rdf Term.\n * @param kb - The DataFactory to use.\n * @param obj - The json-ld object to process.\n * @return {Literal|NamedNode|BlankNode|Collection}\n */\nexport function jsonldObjectToTerm(kb, obj) {\n  if (typeof obj === 'string') {\n    return kb.rdfFactory.literal(obj)\n  }\n\n  if (Object.prototype.hasOwnProperty.call(obj, '@list')) {\n    if (kb.rdfFactory.supports[\"COLLECTIONS\"] === true) {\n      return listToCollection(kb, obj['@list'])\n    }\n\n    return listToStatements(kb, obj)\n  }\n\n  if (Object.prototype.hasOwnProperty.call(obj, '@id')) {\n    return nodeType(kb, obj)\n  }\n\n  if (Object.prototype.hasOwnProperty.call(obj, '@language')) {\n    return kb.rdfFactory.literal(obj['@value'], obj['@language'])\n  }\n\n  if (Object.prototype.hasOwnProperty.call(obj, '@type')) {\n    return kb.rdfFactory.literal(obj['@value'], kb.rdfFactory.namedNode(obj['@type']))\n  }\n\n  if (Object.prototype.hasOwnProperty.call(obj, '@value')) {\n    return kb.rdfFactory.literal(obj['@value'])\n  }\n\n  return kb.rdfFactory.literal(obj)\n}\n\n/**\n * Adds the statements in a json-ld list object to {kb}.\n */\nfunction listToStatements(kb, obj) {\n  const listId = obj['@id'] ? nodeType(kb, obj) : kb.rdfFactory.blankNode()\n\n  const items = obj['@list'].map((listItem => jsonldObjectToTerm(kb, listItem)))\n  const statements = arrayToStatements(kb.rdfFactory, listId, items)\n  kb.addAll(statements)\n\n  return listId\n}\n\nfunction listToCollection(kb, obj) {\n  if (!Array.isArray(obj)) {\n    throw new TypeError(\"Object must be an array\")\n  }\n  return kb.rdfFactory.collection(obj.map((o) => jsonldObjectToTerm(kb, o)))\n}\n\n/**\n * Takes a json-ld formatted string {str} and adds its statements to {kb}.\n *\n * Ensure that {kb.rdfFactory} is a DataFactory.\n */\nexport default async function jsonldParser(str, kb, base) {\n  const baseString = base && Object.prototype.hasOwnProperty.call(base, 'termType')\n    ? base.value\n    : base\n\n  const jsonld = await import('jsonld')\n  //  Unit tests also work without accessing `jsonld.default` explicitly, but real browser usage will fail with\n  // just calling `jsonld.flatten`, so please do not remove `default`\n  const flattened = await jsonld.default.flatten(JSON.parse(str), null, {base: baseString})\n  return flattened.reduce((store, flatResource) => processResource(store, base, flatResource), kb)\n}\n\nfunction nodeType(kb, obj) {\n  if (obj['@id'].startsWith('_:')) {\n    // This object is a Blank Node. Pass the id without the `_:` prefix\n    return kb.rdfFactory.blankNode(obj['@id'].substring(2))\n  } else {\n    // This object is a Named Node\n    return kb.rdfFactory.namedNode(obj['@id'])\n  }\n}\n\nfunction processResource(kb, base, flatResource) {\n  const id = flatResource['@id']\n    ? nodeType(kb, flatResource)\n    : kb.rdfFactory.blankNode()\n\n  for (const property of Object.keys(flatResource)) {\n    if (property === '@id') {\n      continue\n    } else if (property == '@graph') {\n      // the JSON-LD flattened structure may contain nested graphs\n      // the id value for this object is the new base (named graph id) for all nested flat resources\n      const graphId = id\n      // this is an array of resources\n      const nestedFlatResources = flatResource[property]\n\n      // recursively process all flat resources in the array, but with the graphId as base.\n      for (let i = 0; i < nestedFlatResources.length; i++) {\n        kb = processResource(kb, graphId, nestedFlatResources[i])\n      }\n    }\n\n    const value = flatResource[property]\n    if (Array.isArray(value)) {\n      for (let i = 0; i < value.length; i++) {\n        kb.addStatement(createStatement(kb, id, property, value[i], base))\n      }\n    } else {\n      kb.addStatement(createStatement(kb, id, property, value, base))\n    }\n  }\n\n  return kb\n}\n\n/**\n * Create statement quad depending on @type being a type node\n * @param kb\n * @param subject id\n * @param property\n * @param value\n * @return quad statement\n */\nfunction createStatement(kb, id, property, value, base) {\n  let predicate, object\n\n  if (property === \"@type\") {\n    predicate = kb.rdfFactory.namedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\")\n    object = kb.rdfFactory.namedNode(value)\n  } else {\n    predicate = kb.rdfFactory.namedNode(property)\n    object = jsonldObjectToTerm(kb, value)\n  }\n  return kb.rdfFactory.quad(id, predicate, object, kb.rdfFactory.namedNode(base))\n}","/**\n * Simple N-Quads/N-Triples parser\n *\n * N-Quads format: <subject> <predicate> <object> <graph> .\n * N-Triples format: <subject> <predicate> <object> .\n *\n * This replaces the heavyweight 'n3' library dependency for N-Quads parsing.\n */\n\nimport { RdfJsDataFactory, Quad } from './tf-types'\n\ninterface ParsedTerm {\n  type: 'iri' | 'blank' | 'literal'\n  value: string\n  language?: string\n  datatype?: string\n}\n\nfunction unescapeString(str: string): string {\n  return str\n    .replace(/\\\\\"/g, '\"')\n    .replace(/\\\\\\\\/g, '\\\\')\n    .replace(/\\\\n/g, '\\n')\n    .replace(/\\\\r/g, '\\r')\n    .replace(/\\\\t/g, '\\t')\n}\n\nfunction parseTerm(token: string): ParsedTerm | null {\n  token = token.trim()\n\n  // IRI\n  const iriMatch = token.match(/^<([^>]*)>/)\n  if (iriMatch) {\n    return { type: 'iri', value: iriMatch[1] }\n  }\n\n  // Blank node\n  const blankMatch = token.match(/^_:([^\\s]+)/)\n  if (blankMatch) {\n    return { type: 'blank', value: blankMatch[1] }\n  }\n\n  // Literal with possible language tag or datatype\n  const litMatch = token.match(/^\"([^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"/)\n  if (litMatch) {\n    const value = unescapeString(litMatch[1])\n    const rest = token.slice(litMatch[0].length)\n\n    // Check for language tag\n    const langMatch = rest.match(/^@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)/)\n    if (langMatch) {\n      return { type: 'literal', value, language: langMatch[1] }\n    }\n\n    // Check for datatype\n    const dtMatch = rest.match(/^\\^\\^<([^>]*)>/)\n    if (dtMatch) {\n      return { type: 'literal', value, datatype: dtMatch[1] }\n    }\n\n    return { type: 'literal', value }\n  }\n\n  return null\n}\n\nfunction createTerm(factory: RdfJsDataFactory, parsed: ParsedTerm) {\n  switch (parsed.type) {\n    case 'iri':\n      return factory.namedNode(parsed.value)\n    case 'blank':\n      return factory.blankNode(parsed.value)\n    case 'literal':\n      if (parsed.language) {\n        return factory.literal(parsed.value, parsed.language)\n      } else if (parsed.datatype) {\n        return factory.literal(parsed.value, factory.namedNode(parsed.datatype))\n      } else {\n        // Plain literal with xsd:string datatype\n        return factory.literal(parsed.value, factory.namedNode('http://www.w3.org/2001/XMLSchema#string'))\n      }\n  }\n}\n\n/**\n * Parse N-Quads/N-Triples string and call callback for each quad\n */\nexport function parseNQuads(\n  input: string,\n  factory: RdfJsDataFactory,\n  callback: (error: Error | null, quad: Quad | null) => void\n): void {\n  const lines = input.split(/\\r?\\n/)\n\n  for (const line of lines) {\n    const trimmed = line.trim()\n\n    // Skip empty lines and comments\n    if (!trimmed || trimmed.startsWith('#')) {\n      continue\n    }\n\n    // Remove trailing dot and whitespace\n    const content = trimmed.replace(/\\s*\\.\\s*$/, '')\n\n    // Tokenize - split on whitespace but respect quoted strings\n    const tokens: string[] = []\n    let current = ''\n    let inQuotes = false\n    let escape = false\n\n    for (let i = 0; i < content.length; i++) {\n      const char = content[i]\n\n      if (escape) {\n        current += char\n        escape = false\n        continue\n      }\n\n      if (char === '\\\\') {\n        current += char\n        escape = true\n        continue\n      }\n\n      if (char === '\"') {\n        current += char\n        inQuotes = !inQuotes\n        continue\n      }\n\n      if (!inQuotes && (char === ' ' || char === '\\t')) {\n        if (current) {\n          tokens.push(current)\n          current = ''\n        }\n        continue\n      }\n\n      current += char\n    }\n\n    if (current) {\n      tokens.push(current)\n    }\n\n    if (tokens.length < 3) {\n      continue // Invalid line\n    }\n\n    try {\n      const subject = parseTerm(tokens[0])\n      const predicate = parseTerm(tokens[1])\n      const object = parseTerm(tokens[2])\n      const graph = tokens[3] ? parseTerm(tokens[3]) : null\n\n      if (!subject || !predicate || !object) {\n        callback(new Error(`Failed to parse line: ${line}`), null)\n        continue\n      }\n\n      const quad = factory.quad(\n        createTerm(factory, subject),\n        createTerm(factory, predicate),\n        createTerm(factory, object),\n        graph ? createTerm(factory, graph) : factory.defaultGraph()\n      )\n\n      callback(null, quad)\n    } catch (err) {\n      callback(err as Error, null)\n    }\n  }\n\n  // Signal end of parsing\n  callback(null, null)\n}\n\nexport default parseNQuads\n","//  RDFa Parser for rdflib.js\n\n// Originally by: Alex Milowski\n// From https://github.com/alexmilowski/green-turtle\n// Converted: timbl 2015-08-25 not yet working\n// Added wrapper: csarven 2016-05-09 working\n\n// RDFaProcessor.prototype = new Object() // Was URIResolver\n\n// RDFaProcessor.prototype.constructor=RDFaProcessor\n\n// options.base = base URI    not really an option, shopuld always be set.\n//\n\nimport BlankNode from './blank-node'\nimport Literal from './literal'\nimport NamedNode from './named-node'\nimport * as Uri from './uri'\nimport * as Util from './utils-js'\nimport rdf from './factories/canonical-data-factory'\n\nif (typeof Node === 'undefined') { //  @@@@@@ Global. Interface to xmldom.\n  var Node = {\n    ELEMENT_NODE: 1,\n    ATTRIBUTE_NODE: 2,\n    TEXT_NODE: 3,\n    CDATA_SECTION_NODE: 4,\n    ENTITY_REFERENCE_NODE: 5,\n    ENTITY_NODE: 6,\n    PROCESSING_INSTRUCTION_NODE: 7,\n    COMMENT_NODE: 8,\n    DOCUMENT_NODE: 9,\n    DOCUMENT_TYPE_NODE: 10,\n    DOCUMENT_FRAGMENT_NODE: 11,\n    NOTATION_NODE: 12\n  }\n}\n\nexport default class RDFaProcessor {\n  constructor (kb, options) {\n    this.options = options || {}\n    this.kb = kb\n    this.target = options.target || {\n      graph: {\n        subjects: {},\n        prefixes: {},\n        terms: {}\n      }\n    }\n    // XXX: Added to track bnodes\n    this.blankNodes = []\n    // XXX: Added for normalisation\n    this.htmlOptions = {\n      'selfClosing': 'br img input area base basefont col colgroup source wbr isindex link meta param hr'\n    }\n    this.theOne = '_:' + (new Date()).getTime()\n    this.language = null\n    this.vocabulary = null\n    this.blankCounter = 0\n    this.langAttributes = [ { namespaceURI: 'http://www.w3.org/XML/1998/namespace', localName: 'lang' } ]\n    this.inXHTMLMode = false\n    this.absURIRE = /[\\w\\_\\-]+:\\S+/\n    this.finishedHandlers = []\n    this.init()\n  }\n\n  addTriple (origin, subject, predicate, object) {\n    var su, ob, pr, or\n    if (typeof subject === 'undefined') {\n      su = rdf.namedNode(this.options.base)\n    } else {\n      su = this.toRDFNodeObject(subject)\n    }\n    pr = this.toRDFNodeObject(predicate)\n    ob = this.toRDFNodeObject(object)\n    or = rdf.namedNode(this.options.base)\n    // console.log('Adding { ' + su + ' ' + pr + ' ' + ob + ' ' + or + ' }')\n    this.kb.add(su, pr, ob, or)\n  }\n\n  ancestorPath (node) {\n    var path = ''\n    while (node && node.nodeType !== Node.DOCUMENT_NODE) {\n      path = '/' + node.localName + path\n      node = node.parentNode\n    }\n    return path\n  }\n\n  copyMappings (mappings) {\n    var newMappings = {}\n    for (var k in mappings) {\n      newMappings[k] = mappings[k]\n    }\n    return newMappings\n  }\n\n  copyProperties () {\n  }\n\n  deriveDateTimeType (value) {\n    for (var i = 0; i < RDFaProcessor.dateTimeTypes.length; i++) {\n      // console.log(\"Checking \"+value+\" against \"+RDFaProcessor.dateTimeTypes[i].type)\n      var matched = RDFaProcessor.dateTimeTypes[i].pattern.exec(value)\n      if (matched && matched[0].length === value.length) {\n        // console.log(\"Matched!\")\n        return RDFaProcessor.dateTimeTypes[i].type\n      }\n    }\n    return null\n  }\n\n  init () {\n  }\n\n  newBlankNode () {\n    this.blankCounter++\n    return '_:' + this.blankCounter\n  }\n\n  newSubjectOrigin (origin, subject) {\n  }\n\n  parseCURIE (value, prefixes, base) {\n    var colon = value.indexOf(':')\n    var uri\n    if (colon >= 0) {\n      var prefix = value.substring(0, colon)\n      if (prefix === '') {\n        // default prefix\n        uri = prefixes['']\n        return uri ? uri + value.substring(colon + 1) : null\n      } else if (prefix === '_') {\n        // blank node\n        return '_:' + value.substring(colon + 1)\n      } else if (RDFaProcessor.NCNAME.test(prefix)) {\n        uri = prefixes[prefix]\n        if (uri) {\n          return uri + value.substring(colon + 1)\n        }\n      }\n    }\n    return null\n  }\n\n  parseCURIEOrURI (value, prefixes, base) {\n    var curie = this.parseCURIE(value, prefixes, base)\n    if (curie) {\n      return curie\n    }\n    return this.resolveAndNormalize(base, value)\n  }\n\n  parsePredicate (value, defaultVocabulary, terms, prefixes, base,\n                  ignoreTerms) {\n    if (value === '') {\n      return null\n    }\n    var predicate = this.parseTermOrCURIEOrAbsURI(value, defaultVocabulary, ignoreTerms ? null : terms, prefixes, base)\n    if (predicate && predicate.indexOf('_:') === 0) {\n      return null\n    }\n    return predicate\n  }\n\n  parsePrefixMappings (str, target) {\n    var values = this.tokenize(str)\n    var prefix = null\n    // var uri = null\n    for (var i = 0; i < values.length; i++) {\n      if (values[i][values[i].length - 1] === ':') {\n        prefix = values[i].substring(0, values[i].length - 1)\n      } else if (prefix) {\n        target[prefix] = this.options.base ? Uri.join(values[i], this.options.base) : values[i]\n        prefix = null\n      }\n    }\n  }\n\n  static parseRDFaDOM (dom, kb, base) {\n    var p = new RDFaProcessor(kb, { 'base': base })\n    //  Cannot assign to read only property 'baseURI' of object '#<XMLDocument>':\n    if (!dom.baseURI) { // Note this became a read-only attribute some time before 2018\n      dom.baseURI = base // oinly set if not already set\n    }\n    p.process(dom, { baseURI: base})\n  }\n\n  parseSafeCURIEOrCURIEOrURI (value, prefixes, base) {\n    value = this.trim(value)\n    if (value.charAt(0) === '[' && value.charAt(value.length - 1) === ']') {\n      value = value.substring(1, value.length - 1)\n      value = value.trim(value)\n      if (value.length === 0) {\n        return null\n      }\n      if (value === '_:') {\n        // the one node\n        return this.theOne\n      }\n      return this.parseCURIE(value, prefixes, base)\n    } else {\n      return this.parseCURIEOrURI(value, prefixes, base)\n    }\n  }\n\n  parseTermOrCURIEOrAbsURI (value, defaultVocabulary, terms, prefixes, base) {\n    // alert(\"Parsing \"+value+\" with default vocab \"+defaultVocabulary)\n    value = this.trim(value)\n    var curie = this.parseCURIE(value, prefixes, base)\n    if (curie) {\n      return curie\n    } else if (terms) {\n      if (defaultVocabulary && !this.absURIRE.exec(value)) {\n        return defaultVocabulary + value\n      }\n      var term = terms[value]\n      if (term) {\n        return term\n      }\n      var lcvalue = value.toLowerCase()\n      term = terms[lcvalue]\n      if (term) {\n        return term\n      }\n    }\n    if (this.absURIRE.exec(value)) {\n      return this.resolveAndNormalize(base, value)\n    }\n    return null\n  }\n\n  parseTermOrCURIEOrURI (value, defaultVocabulary, terms, prefixes, base) {\n    // alert(\"Parsing \"+value+\" with default vocab \"+defaultVocabulary)\n    value = this.trim(value)\n    var curie = this.parseCURIE(value, prefixes, base)\n    if (curie) {\n      return curie\n    } else {\n      var term = terms[value]\n      if (term) {\n        return term\n      }\n      var lcvalue = value.toLowerCase()\n      term = terms[lcvalue]\n      if (term) {\n        return term\n      }\n      if (defaultVocabulary && !this.absURIRE.exec(value)) {\n        return defaultVocabulary + value\n      }\n    }\n    return this.resolveAndNormalize(base, value)\n  }\n\n  parseURI (uri) {\n    return uri // We just use strings as URIs, not objects now.\n  }\n\n  process (node, options) {\n    /*\n    if (!window.console) {\n       window.console = { log: function() {} }\n    } */\n    options = options || {}\n    var base\n    if (node.nodeType === Node.DOCUMENT_NODE) {\n      if (node.baseURI && !options.baseURI) {\n        options.baseURI = node.baseURI  // be defensive as DOM implementations vary\n      }\n      base = node.baseURI\n      node = node.documentElement\n      if (!node.baseURI) {\n        node.baseURI = base\n      }\n      this.setContext(node)\n    } else if (node.parentNode.nodeType === Node.DOCUMENT_NODE) {\n      this.setContext(node)\n    }\n    var queue = []\n    // Fix for Firefox that includes the hash in the base URI\n    var removeHash = function (baseURI) {\n      // Fix for undefined baseURI property\n      if (!baseURI && options && options.baseURI) {\n        return options.baseURI\n      }\n\n      var hash = baseURI.indexOf('#')\n      if (hash >= 0) {\n        baseURI = baseURI.substring(0, hash)\n      }\n      if (options && options.baseURIMap) {\n        baseURI = options.baseURIMap(baseURI)\n      }\n      return baseURI\n    }\n    queue.push({ current: node,\n      context: this.push(null, removeHash(node.baseURI))\n    })\n    while (queue.length > 0) {\n      var item = queue.shift()\n      if (item.parent) {\n        // Sequence Step 14: list triple generation\n        if (item.context.parent && item.context.parent.listMapping === item.listMapping) {\n          // Skip a child context with exactly the same mapping\n          continue\n        }\n        // console.log(\"Generating lists for \"+item.subject+\", tag \"+item.parent.localName)\n        for (let predicate in item.listMapping) {\n          var list = item.listMapping[predicate]\n          if (list.length === 0) {\n            this.addTriple(item.parent, item.subject, predicate, { type: RDFaProcessor.objectURI, value: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil' })\n            continue\n          }\n          var bnodes = []\n          for (let i = 0; i < list.length; i++) {\n            bnodes.push(this.newBlankNode())\n          // this.newSubject(item.parent,bnodes[i])\n          }\n          for (let i = 0; i < bnodes.length; i++) {\n            this.addTriple(item.parent, bnodes[i], 'http://www.w3.org/1999/02/22-rdf-syntax-ns#first', list[i])\n            this.addTriple(item.parent, bnodes[i], 'http://www.w3.org/1999/02/22-rdf-syntax-ns#rest', { type: RDFaProcessor.objectURI, value: (i + 1) < bnodes.length ? bnodes[i + 1] : 'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil' })\n          }\n          this.addTriple(item.parent, item.subject, predicate, { type: RDFaProcessor.objectURI, value: bnodes[0] })\n        }\n        continue\n      }\n      var current = item.current\n      var context = item.context\n      // console.log(\"Tag: \"+current.localName+\", listMapping=\"+JSON.stringify(context.listMapping))\n      // Sequence Step 1\n      var skip = false\n      var newSubject = null\n      var currentObjectResource = null\n      var typedResource = null\n      var prefixes = context.prefixes\n      var prefixesCopied = false\n      var incomplete = []\n      var listMapping = context.listMapping\n      var listMappingDifferent = !context.parent\n      var language = context.language\n      var vocabulary = context.vocabulary\n      // TODO: the \"base\" element may be used for HTML+RDFa 1.1\n      base = this.parseURI(removeHash(current.baseURI))\n      current.item = null\n      // Sequence Step 2: set the default vocabulary\n      var vocabAtt = current.getAttributeNode('vocab')\n      if (vocabAtt) {\n        let value = this.trim(vocabAtt.value)\n        if (value.length > 0) {\n          vocabulary = value\n          var baseSubject = base.spec\n          // this.newSubject(current,baseSubject)\n          this.addTriple(current, baseSubject, 'http://www.w3.org/ns/rdfa#usesVocabulary', { type: RDFaProcessor.objectURI, value: vocabulary })\n        } else {\n          vocabulary = this.vocabulary\n        }\n      }\n      // Sequence Step 3: IRI mappings\n      // handle xmlns attributes\n      for (var i = 0; i < current.attributes.length; i++) {\n        var att = current.attributes[i]\n        // if (att.namespaceURI==\"http://www.w3.org/2000/xmlns/\") {\n        if (att.nodeName.charAt(0) === 'x' && att.nodeName.indexOf('xmlns:') === 0) {\n          if (!prefixesCopied) {\n            prefixes = this.copyMappings(prefixes)\n            prefixesCopied = true\n          }\n          var prefix = att.nodeName.substring(6)\n          // TODO: resolve relative?\n          var ref = RDFaProcessor.trim(att.value)\n          prefixes[prefix] = this.options.base ? Uri.join(ref, this.options.base) : ref\n        }\n      }\n      // Handle prefix mappings (@prefix)\n      var prefixAtt = current.getAttributeNode('prefix')\n      if (prefixAtt) {\n        if (!prefixesCopied) {\n          prefixes = this.copyMappings(prefixes)\n          prefixesCopied = true\n        }\n        this.parsePrefixMappings(prefixAtt.value, prefixes)\n      }\n      // Sequence Step 4: language\n      var xmlLangAtt = null\n      for (let i = 0; !xmlLangAtt && i < this.langAttributes.length; i++) {\n        xmlLangAtt = current.getAttributeNodeNS(this.langAttributes[i].namespaceURI, this.langAttributes[i].localName)\n      }\n      if (xmlLangAtt) {\n        let value = RDFaProcessor.trim(xmlLangAtt.value)\n        if (value.length > 0) {\n          language = value\n        } else {\n          language = null\n        }\n      }\n      var relAtt = current.getAttributeNode('rel')\n      var revAtt = current.getAttributeNode('rev')\n      var typeofAtt = current.getAttributeNode('typeof')\n      var propertyAtt = current.getAttributeNode('property')\n      var datatypeAtt = current.getAttributeNode('datatype')\n      var datetimeAtt = this.inHTMLMode\n        ? current.getAttributeNode('datetime')\n        : null\n      var contentAtt = current.getAttributeNode('content')\n      var aboutAtt = current.getAttributeNode('about')\n      var srcAtt = current.getAttributeNode('src')\n      var resourceAtt = current.getAttributeNode('resource')\n      var hrefAtt = current.getAttributeNode('href')\n      var inlistAtt = current.getAttributeNode('inlist')\n      var relAttPredicates = []\n      var predicate, values\n      if (relAtt) {\n        values = this.tokenize(relAtt.value)\n        for (let i = 0; i < values.length; i++) {\n          predicate = this.parsePredicate(values[i], vocabulary, context.terms, prefixes, base, this.inHTMLMode && propertyAtt !== null)\n          if (predicate) {\n            relAttPredicates.push(predicate)\n          }\n        }\n      }\n      var revAttPredicates = []\n      if (revAtt) {\n        values = this.tokenize(revAtt.value)\n        for (let i = 0; i < values.length; i++) {\n          predicate = this.parsePredicate(values[i], vocabulary, context.terms, prefixes, base, this.inHTMLMode && propertyAtt)\n          if (predicate) {\n            revAttPredicates.push(predicate)\n          }\n        }\n      }\n      // Section 3.1, bullet 7\n      if (this.inHTMLMode && (relAtt || revAtt) && propertyAtt) {\n        if (relAttPredicates.length === 0) {\n          relAtt = null\n        }\n        if (revAttPredicates.length === 0) {\n          revAtt = null\n        }\n      }\n      if (relAtt || revAtt) {\n        // Sequence Step 6: establish new subject and value\n        if (aboutAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value, prefixes, base)\n        }\n        if (typeofAtt) {\n          typedResource = newSubject\n        }\n        if (!newSubject) {\n          if (current.parentNode.nodeType === Node.DOCUMENT_NODE) {\n            newSubject = removeHash(current.baseURI)\n          } else if (context.parentObject) {\n            // TODO: Verify: If the xml:base has been set and the parentObject is the baseURI of the parent, then the subject needs to be the new base URI\n            newSubject = removeHash(current.parentNode.baseURI) === context.parentObject ? removeHash(current.baseURI) : context.parentObject\n          }\n        }\n        if (resourceAtt) {\n          currentObjectResource = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value, prefixes, base)\n        }\n        if (!currentObjectResource) {\n          if (hrefAtt) {\n            currentObjectResource = this.resolveAndNormalize(base, encodeURI(hrefAtt.value))\n          } else if (srcAtt) {\n            currentObjectResource = this.resolveAndNormalize(base, encodeURI(srcAtt.value))\n          } else if (typeofAtt && !aboutAtt && !(this.inXHTMLMode && (current.localName === 'head' || current.localName === 'body'))) {\n            currentObjectResource = this.newBlankNode()\n          }\n        }\n        if (typeofAtt && !aboutAtt && this.inXHTMLMode && (current.localName === 'head' || current.localName === 'body')) {\n          typedResource = newSubject\n        } else if (typeofAtt && !aboutAtt) {\n          typedResource = currentObjectResource\n        }\n      } else if (propertyAtt && !contentAtt && !datatypeAtt) {\n        // Sequence Step 5.1: establish a new subject\n        if (aboutAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value, prefixes, base)\n          if (typeofAtt) {\n            typedResource = newSubject\n          }\n        }\n        if (!newSubject && current.parentNode.nodeType === Node.DOCUMENT_NODE) {\n          newSubject = removeHash(current.baseURI)\n          if (typeofAtt) {\n            typedResource = newSubject\n          }\n        } else if (!newSubject && context.parentObject) {\n          // TODO: Verify: If the xml:base has been set and the parentObject is the baseURI of the parent, then the subject needs to be the new base URI\n          newSubject = removeHash(current.parentNode.baseURI) === context.parentObject ? removeHash(current.baseURI) : context.parentObject\n        }\n        if (typeofAtt && !typedResource) {\n          if (resourceAtt) {\n            typedResource = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value, prefixes, base)\n          }\n          if (!typedResource && hrefAtt) {\n            typedResource = this.resolveAndNormalize(base, encodeURI(hrefAtt.value))\n          }\n          if (!typedResource && srcAtt) {\n            typedResource = this.resolveAndNormalize(base, encodeURI(srcAtt.value))\n          }\n          if (!typedResource && (this.inXHTMLMode || this.inHTMLMode) && (current.localName === 'head' || current.localName === 'body')) {\n            typedResource = newSubject\n          }\n          if (!typedResource) {\n            typedResource = this.newBlankNode()\n          }\n          currentObjectResource = typedResource\n        }\n      // console.log(current.localName+\", newSubject=\"+newSubject+\", typedResource=\"+typedResource+\", currentObjectResource=\"+currentObjectResource)\n      } else {\n        // Sequence Step 5.2: establish a new subject\n        if (aboutAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value, prefixes, base)\n        }\n        if (!newSubject && resourceAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value, prefixes, base)\n        }\n        if (!newSubject && hrefAtt) {\n          newSubject = this.resolveAndNormalize(base, encodeURI(hrefAtt.value))\n        }\n        if (!newSubject && srcAtt) {\n          newSubject = this.resolveAndNormalize(base, encodeURI(srcAtt.value))\n        }\n        if (!newSubject) {\n          if (current.parentNode.nodeType === Node.DOCUMENT_NODE) {\n            newSubject = removeHash(current.baseURI)\n          } else if ((this.inXHTMLMode || this.inHTMLMode) && (current.localName === 'head' || current.localName === 'body')) {\n            newSubject = removeHash(current.parentNode.baseURI) === context.parentObject ? removeHash(current.baseURI) : context.parentObject\n          } else if (typeofAtt) {\n            newSubject = this.newBlankNode()\n          } else if (context.parentObject) {\n            // TODO: Verify: If the xml:base has been set and the parentObject is the baseURI of the parent, then the subject needs to be the new base URI\n            newSubject = removeHash(current.parentNode.baseURI) === context.parentObject ? removeHash(current.baseURI) : context.parentObject\n            if (!propertyAtt) {\n              skip = true\n            }\n          }\n        }\n        if (typeofAtt) {\n          typedResource = newSubject\n        }\n      }\n      // console.log(current.tagName+\": newSubject=\"+newSubject+\", currentObjectResource=\"+currentObjectResource+\", typedResource=\"+typedResource+\", skip=\"+skip)\n      // var rdfaData = null\n      if (newSubject) {\n        // this.newSubject(current,newSubject)\n        if (aboutAtt || resourceAtt || typedResource) {\n          var id = newSubject\n          if (typeofAtt && !aboutAtt && !resourceAtt && currentObjectResource) {\n            id = currentObjectResource\n          }\n          // console.log(\"Setting data attribute for \"+current.localName+\" for subject \"+id)\n          this.newSubjectOrigin(current, id)\n        }\n      }\n      // Sequence Step 7: generate type triple\n      if (typedResource) {\n        values = this.tokenize(typeofAtt.value)\n        for (let i = 0; i < values.length; i++) {\n          var object = this.parseTermOrCURIEOrAbsURI(values[i], vocabulary, context.terms, prefixes, base)\n          if (object) {\n            this.addTriple(current, typedResource, RDFaProcessor.typeURI, { type: RDFaProcessor.objectURI, value: object })\n          }\n        }\n      }\n      // Sequence Step 8: new list mappings if there is a new subject\n      // console.log(\"Step 8: newSubject=\"+newSubject+\", context.parentObject=\"+context.parentObject)\n      if (newSubject && newSubject !== context.parentObject) {\n        // console.log(\"Generating new list mapping for \"+newSubject)\n        listMapping = {}\n        listMappingDifferent = true\n      }\n      // Sequence Step 9: generate object triple\n      if (currentObjectResource) {\n        if (relAtt && inlistAtt) {\n          for (let i = 0; i < relAttPredicates.length; i++) {\n            let list = listMapping[relAttPredicates[i]]\n            if (!list) {\n              list = []\n              listMapping[relAttPredicates[i]] = list\n            }\n            list.push({ type: RDFaProcessor.objectURI, value: currentObjectResource })\n          }\n        } else if (relAtt) {\n          for (let i = 0; i < relAttPredicates.length; i++) {\n            this.addTriple(current, newSubject, relAttPredicates[i], { type: RDFaProcessor.objectURI, value: currentObjectResource })\n          }\n        }\n        if (revAtt) {\n          for (let i = 0; i < revAttPredicates.length; i++) {\n            this.addTriple(current, currentObjectResource, revAttPredicates[i], { type: RDFaProcessor.objectURI, value: newSubject })\n          }\n        }\n      } else {\n        // Sequence Step 10: incomplete triples\n        if (newSubject && !currentObjectResource && (relAtt || revAtt)) {\n          currentObjectResource = this.newBlankNode()\n        // alert(current.tagName+\": generated blank node, newSubject=\"+newSubject+\" currentObjectResource=\"+currentObjectResource)\n        }\n        if (relAtt && inlistAtt) {\n          for (let i = 0; i < relAttPredicates.length; i++) {\n            let list = listMapping[relAttPredicates[i]]\n            if (!list) {\n              list = []\n              listMapping[predicate] = list\n            }\n            // console.log(\"Adding incomplete list for \"+predicate)\n            incomplete.push({ predicate: relAttPredicates[i], list: list })\n          }\n        } else if (relAtt) {\n          for (let i = 0; i < relAttPredicates.length; i++) {\n            incomplete.push({ predicate: relAttPredicates[i], forward: true })\n          }\n        }\n        if (revAtt) {\n          for (let i = 0; i < revAttPredicates.length; i++) {\n            incomplete.push({ predicate: revAttPredicates[i], forward: false })\n          }\n        }\n      }\n      // Step 11: Current property values\n      if (propertyAtt) {\n        var datatype = null\n        var content = null\n        if (datatypeAtt) {\n          datatype = datatypeAtt.value === '' ? RDFaProcessor.PlainLiteralURI : this.parseTermOrCURIEOrAbsURI(datatypeAtt.value, vocabulary, context.terms, prefixes, base)\n          if (datetimeAtt && !contentAtt) {\n            content = datetimeAtt.value\n          } else {\n            content = datatype === RDFaProcessor.XMLLiteralURI || datatype === RDFaProcessor.HTMLLiteralURI ? null : (contentAtt ? contentAtt.value : current.textContent)\n          }\n        } else if (contentAtt) {\n          datatype = RDFaProcessor.PlainLiteralURI\n          content = contentAtt.value\n        } else if (datetimeAtt) {\n          content = datetimeAtt.value\n          datatype = RDFaProcessor.deriveDateTimeType(content)\n          if (!datatype) {\n            datatype = RDFaProcessor.PlainLiteralURI\n          }\n        } else if (!relAtt && !revAtt) {\n          if (resourceAtt) {\n            content = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value, prefixes, base)\n          }\n          if (!content && hrefAtt) {\n            content = this.resolveAndNormalize(base, encodeURI(hrefAtt.value))\n          } else if (!content && srcAtt) {\n            content = this.resolveAndNormalize(base, encodeURI(srcAtt.value))\n          }\n          if (content) {\n            datatype = RDFaProcessor.objectURI\n          }\n        }\n        if (!datatype) {\n          if (typeofAtt && !aboutAtt) {\n            datatype = RDFaProcessor.objectURI\n            content = typedResource\n          } else {\n            content = current.textContent\n            if (this.inHTMLMode && current.localName === 'time') {\n              datatype = RDFaProcessor.deriveDateTimeType(content)\n            }\n            if (!datatype) {\n              datatype = RDFaProcessor.PlainLiteralURI\n            }\n          }\n        }\n        values = this.tokenize(propertyAtt.value)\n        for (let i = 0; i < values.length; i++) {\n          let predicate = this.parsePredicate(values[i], vocabulary, context.terms, prefixes, base)\n          if (predicate) {\n            if (inlistAtt) {\n              let list = listMapping[predicate]\n              if (!list) {\n                list = []\n                listMapping[predicate] = list\n              }\n              list.push((datatype === RDFaProcessor.XMLLiteralURI || datatype === RDFaProcessor.HTMLLiteralURI) ? { type: datatype, value: current.childNodes } : { type: datatype || RDFaProcessor.PlainLiteralURI, value: content, language: language })\n            } else {\n              if (datatype === RDFaProcessor.XMLLiteralURI || datatype === RDFaProcessor.HTMLLiteralURI) {\n                this.addTriple(current, newSubject, predicate, { type: datatype, value: current.childNodes })\n              } else {\n                this.addTriple(current, newSubject, predicate, { type: datatype || RDFaProcessor.PlainLiteralURI, value: content, language: language })\n              // console.log(newSubject+\" \"+predicate+\"=\"+content)\n              }\n            }\n          }\n        }\n      }\n      // Sequence Step 12: complete incomplete triples with new subject\n      if (newSubject && !skip) {\n        for (let i = 0; i < context.incomplete.length; i++) {\n          if (context.incomplete[i].list) {\n            // console.log(\"Adding subject \"+newSubject+\" to list for \"+context.incomplete[i].predicate)\n            // TODO: it is unclear what to do here\n            context.incomplete[i].list.push({ type: RDFaProcessor.objectURI, value: newSubject })\n          } else if (context.incomplete[i].forward) {\n            // console.log(current.tagName+\": completing forward triple \"+context.incomplete[i].predicate+\" with object=\"+newSubject)\n            this.addTriple(current, context.subject, context.incomplete[i].predicate, { type: RDFaProcessor.objectURI, value: newSubject })\n          } else {\n            // console.log(current.tagName+\": completing reverse triple with object=\"+context.subject)\n            this.addTriple(current, newSubject, context.incomplete[i].predicate, { type: RDFaProcessor.objectURI, value: context.subject })\n          }\n        }\n      }\n      var childContext = null\n      var listSubject = newSubject\n      if (skip) {\n        // TODO: should subject be null?\n        childContext = this.push(context, context.subject)\n        // TODO: should the entObject be passed along?  If not, then intermediary children will keep properties from being associated with incomplete triples.\n        // TODO: Verify: if the current baseURI has changed and the parentObject is the parent's base URI, then the baseURI should change\n        childContext.parentObject = removeHash(current.parentNode.baseURI) === context.parentObject ? removeHash(current.baseURI) : context.parentObject\n        childContext.incomplete = context.incomplete\n        childContext.language = language\n        childContext.prefixes = prefixes\n        childContext.vocabulary = vocabulary\n      } else {\n        childContext = this.push(context, newSubject)\n        childContext.parentObject = currentObjectResource || (newSubject || context.subject)\n        childContext.prefixes = prefixes\n        childContext.incomplete = incomplete\n        if (currentObjectResource) {\n          // console.log(\"Generating new list mapping for \"+currentObjectResource)\n          listSubject = currentObjectResource\n          listMapping = {}\n          listMappingDifferent = true\n        }\n        childContext.listMapping = listMapping\n        childContext.language = language\n        childContext.vocabulary = vocabulary\n      }\n      if (listMappingDifferent) {\n        // console.log(\"Pushing list parent \"+current.localName)\n        queue.unshift({ parent: current, context: context, subject: listSubject, listMapping: listMapping })\n      }\n      for (var child = current.lastChild; child; child = child.previousSibling) {\n        if (child.nodeType === Node.ELEMENT_NODE) {\n          // console.log(\"Pushing child \"+child.localName)\n          // child.baseURI = current.baseURI\n          queue.unshift({ current: child, context: childContext })\n        }\n      }\n    }\n    if (this.inHTMLMode) {\n      this.copyProperties()\n    }\n    for (let i = 0; i < this.finishedHandlers.length; i++) {\n      this.finishedHandlers[i](node)\n    }\n  }\n\n  push (parent, subject) {\n    return {\n      parent: parent,\n      subject: subject || (parent ? parent.subject : null),\n      parentObject: null,\n      incomplete: [],\n      listMapping: parent ? parent.listMapping : {},\n      language: parent ? parent.language : this.language,\n      prefixes: parent ? parent.prefixes : this.target.graph.prefixes,\n      terms: parent ? parent.terms : this.target.graph.terms,\n      vocabulary: parent ? parent.vocabulary : this.vocabulary\n    }\n  }\n\n  resolveAndNormalize (base, uri) {\n    // console.log(\"Joining \" + uri + \" to \" + base + \" making \" +  Uri.join(uri, base))\n    return Uri.join(uri, base) // @@ normalize?\n  }\n\n  setContext (node) {\n    // We only recognized XHTML+RDFa 1.1 if the version is set propertyly\n    if (node.localName === 'html' && node.getAttribute('version') === 'XHTML+RDFa 1.1') {\n      this.setXHTMLContext()\n    } else if (node.localName === 'html' || node.namespaceURI === 'http://www.w3.org/1999/xhtml') {\n      if (typeof document !== 'undefined' && document.doctype) {\n        if (document.doctype.publicId === '-//W3C//DTD XHTML+RDFa 1.0//EN' && document.doctype.systemId === 'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd') {\n          console.log('WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode.')\n          this.setHTMLContext()\n        } else if (document.doctype.publicId === '-//W3C//DTD XHTML+RDFa 1.1//EN' && document.doctype.systemId === 'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd') {\n          this.setXHTMLContext()\n        } else {\n          this.setHTMLContext()\n        }\n      } else {\n        this.setHTMLContext()\n      }\n    } else {\n      this.setXMLContext()\n    }\n  }\n\n  setHTMLContext () {\n    this.setInitialContext()\n    this.langAttributes = [\n      {\n        namespaceURI: 'http://www.w3.org/XML/1998/namespace',\n        localName: 'lang'\n      },\n      { namespaceURI: null, localName: 'lang' }\n    ]\n    this.inXHTMLMode = false\n    this.inHTMLMode = true\n  }\n\n  setInitialContext () {\n    this.vocabulary = null\n    // By default, the prefixes are terms are loaded to the RDFa 1.1. standard within the graph constructor\n    this.langAttributes = [\n      {\n        namespaceURI: 'http://www.w3.org/XML/1998/namespace',\n        localName: 'lang'\n      }\n    ]\n  }\n\n  setXHTMLContext () {\n    this.setInitialContext()\n    this.inXHTMLMode = true\n    this.inHTMLMode = false\n    this.langAttributes = [\n      {\n        namespaceURI: 'http://www.w3.org/XML/1998/namespace',\n        localName: 'lang' },\n      { namespaceURI: null, localName: 'lang' }\n    ]\n    // From http://www.w3.org/2011/rdfa-context/xhtml-rdfa-1.1\n    this.target.graph.terms['alternate'] = 'http://www.w3.org/1999/xhtml/vocab#alternate'\n    this.target.graph.terms['appendix'] = 'http://www.w3.org/1999/xhtml/vocab#appendix'\n    this.target.graph.terms['bookmark'] = 'http://www.w3.org/1999/xhtml/vocab#bookmark'\n    this.target.graph.terms['cite'] = 'http://www.w3.org/1999/xhtml/vocab#cite'\n    this.target.graph.terms['chapter'] = 'http://www.w3.org/1999/xhtml/vocab#chapter'\n    this.target.graph.terms['contents'] = 'http://www.w3.org/1999/xhtml/vocab#contents'\n    this.target.graph.terms['copyright'] = 'http://www.w3.org/1999/xhtml/vocab#copyright'\n    this.target.graph.terms['first'] = 'http://www.w3.org/1999/xhtml/vocab#first'\n    this.target.graph.terms['glossary'] = 'http://www.w3.org/1999/xhtml/vocab#glossary'\n    this.target.graph.terms['help'] = 'http://www.w3.org/1999/xhtml/vocab#help'\n    this.target.graph.terms['icon'] = 'http://www.w3.org/1999/xhtml/vocab#icon'\n    this.target.graph.terms['index'] = 'http://www.w3.org/1999/xhtml/vocab#index'\n    this.target.graph.terms['last'] = 'http://www.w3.org/1999/xhtml/vocab#last'\n    this.target.graph.terms['license'] = 'http://www.w3.org/1999/xhtml/vocab#license'\n    this.target.graph.terms['meta'] = 'http://www.w3.org/1999/xhtml/vocab#meta'\n    this.target.graph.terms['next'] = 'http://www.w3.org/1999/xhtml/vocab#next'\n    this.target.graph.terms['prev'] = 'http://www.w3.org/1999/xhtml/vocab#prev'\n    this.target.graph.terms['previous'] = 'http://www.w3.org/1999/xhtml/vocab#previous'\n    this.target.graph.terms['section'] = 'http://www.w3.org/1999/xhtml/vocab#section'\n    this.target.graph.terms['stylesheet'] = 'http://www.w3.org/1999/xhtml/vocab#stylesheet'\n    this.target.graph.terms['subsection'] = 'http://www.w3.org/1999/xhtml/vocab#subsection'\n    this.target.graph.terms['start'] = 'http://www.w3.org/1999/xhtml/vocab#start'\n    this.target.graph.terms['top'] = 'http://www.w3.org/1999/xhtml/vocab#top'\n    this.target.graph.terms['up'] = 'http://www.w3.org/1999/xhtml/vocab#up'\n    this.target.graph.terms['p3pv1'] = 'http://www.w3.org/1999/xhtml/vocab#p3pv1'\n    // other\n    this.target.graph.terms['related'] = 'http://www.w3.org/1999/xhtml/vocab#related'\n    this.target.graph.terms['role'] = 'http://www.w3.org/1999/xhtml/vocab#role'\n    this.target.graph.terms['transformation'] = 'http://www.w3.org/1999/xhtml/vocab#transformation'\n  }\n\n  setXMLContext () {\n    this.setInitialContext()\n    this.inXHTMLMode = false\n    this.inHTMLMode = false\n  }\n\n  tokenize (str) {\n    return this.trim(str).split(/\\s+/)\n  }\n  static tokenize (str) {\n    return this.trim(str).split(/\\s+/)\n  }\n\n  toRDFNodeObject (x) {\n    if (typeof x === 'undefined') return undefined\n    if (typeof x === 'string') {\n      if (x.substring(0, 2) === '_:') {\n        if (typeof this.blankNodes[x.substring(2)] === 'undefined') {\n          this.blankNodes[x.substring(2)] = new BlankNode(x.substring(2))\n        }\n        return this.blankNodes[x.substring(2)]\n      }\n      return rdf.namedNode(x)\n    }\n    switch (x.type) {\n      case RDFaProcessor.objectURI:\n        if (x.value.substring(0, 2) === '_:') {\n          if (typeof this.blankNodes[x.value.substring(2)] === 'undefined') {\n            this.blankNodes[x.value.substring(2)] = new BlankNode(x.value.substring(2))\n          }\n          return this.blankNodes[x.value.substring(2)]\n        }\n        return rdf.namedNode(x.value)\n      case RDFaProcessor.PlainLiteralURI:\n        return new Literal(x.value, x.language || '')\n      case RDFaProcessor.XMLLiteralURI:\n      case RDFaProcessor.HTMLLiteralURI:\n        var string = ''\n        Object.keys(x.value).forEach(i => {\n          string += Util.domToString(x.value[i], this.htmlOptions)\n        })\n        return new Literal(string, '', new NamedNode(x.type))\n      default:\n        return new Literal(x.value, '', new NamedNode(x.type))\n    }\n  }\n\n  trim (str) {\n    return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '')\n  }\n  static trim (str) {\n    return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '')\n  }\n}\n\nRDFaProcessor.XMLLiteralURI =\n  'http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral'\nRDFaProcessor.HTMLLiteralURI = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML'\nRDFaProcessor.PlainLiteralURI =\n  'http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral'\nRDFaProcessor.objectURI = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#object'\nRDFaProcessor.typeURI = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'\nRDFaProcessor.nameChar =\n  '[-A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u10000-\\uEFFFF\\.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]'\nRDFaProcessor.nameStartChar =\n  '[\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u0131\\u0134-\\u013E\\u0141-\\u0148\\u014A-\\u017E\\u0180-\\u01C3\\u01CD-\\u01F0\\u01F4-\\u01F5\\u01FA-\\u0217\\u0250-\\u02A8\\u02BB-\\u02C1\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03CE\\u03D0-\\u03D6\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2-\\u03F3\\u0401-\\u040C\\u040E-\\u044F\\u0451-\\u045C\\u045E-\\u0481\\u0490-\\u04C4\\u04C7-\\u04C8\\u04CB-\\u04CC\\u04D0-\\u04EB\\u04EE-\\u04F5\\u04F8-\\u04F9\\u0531-\\u0556\\u0559\\u0561-\\u0586\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u063A\\u0641-\\u064A\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D3\\u06D5\\u06E5-\\u06E6\\u0905-\\u0939\\u093D\\u0958-\\u0961\\u0985-\\u098C\\u098F-\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09DC-\\u09DD\\u09DF-\\u09E1\\u09F0-\\u09F1\\u0A05-\\u0A0A\\u0A0F-\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32-\\u0A33\\u0A35-\\u0A36\\u0A38-\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8B\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2-\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AE0\\u0B05-\\u0B0C\\u0B0F-\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32-\\u0B33\\u0B36-\\u0B39\\u0B3D\\u0B5C-\\u0B5D\\u0B5F-\\u0B61\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99-\\u0B9A\\u0B9C\\u0B9E-\\u0B9F\\u0BA3-\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB5\\u0BB7-\\u0BB9\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C60-\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CDE\\u0CE0-\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D60-\\u0D61\\u0E01-\\u0E2E\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E45\\u0E81-\\u0E82\\u0E84\\u0E87-\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA-\\u0EAB\\u0EAD-\\u0EAE\\u0EB0\\u0EB2-\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0F40-\\u0F47\\u0F49-\\u0F69\\u10A0-\\u10C5\\u10D0-\\u10F6\\u1100\\u1102-\\u1103\\u1105-\\u1107\\u1109\\u110B-\\u110C\\u110E-\\u1112\\u113C\\u113E\\u1140\\u114C\\u114E\\u1150\\u1154-\\u1155\\u1159\\u115F-\\u1161\\u1163\\u1165\\u1167\\u1169\\u116D-\\u116E\\u1172-\\u1173\\u1175\\u119E\\u11A8\\u11AB\\u11AE-\\u11AF\\u11B7-\\u11B8\\u11BA\\u11BC-\\u11C2\\u11EB\\u11F0\\u11F9\\u1E00-\\u1E9B\\u1EA0-\\u1EF9\\u1F00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2126\\u212A-\\u212B\\u212E\\u2180-\\u2182\\u3041-\\u3094\\u30A1-\\u30FA\\u3105-\\u312C\\uAC00-\\uD7A3\\u4E00-\\u9FA5\\u3007\\u3021-\\u3029_]'\nRDFaProcessor.NCNAME = new RegExp('^' + RDFaProcessor.nameStartChar +\n  RDFaProcessor.nameChar + '*$')\n\n/*\nRDFaProcessor.prototype.resolveAndNormalize = function(base,href) {\n   var u = base.resolve(href)\n   var parsed = this.parseURI(u)\n   parsed.normalize()\n   return parsed.spec\n}\n*/\n\nRDFaProcessor.dateTimeTypes = [\n  { pattern: /-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\\.[0-9]+)?S)?)?/,\n    type: 'http://www.w3.org/2001/XMLSchema#duration' },\n  { pattern: /-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\\.[0-9]+)?(?:Z|[+\\-][0-9][0-9]:[0-9][0-9])?/,\n    type: 'http://www.w3.org/2001/XMLSchema#dateTime' },\n  { pattern: /-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\\-][0-9][0-9]:[0-9][0-9])?/,\n    type: 'http://www.w3.org/2001/XMLSchema#date' },\n  { pattern: /(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\\.[0-9]+)?(?:Z|[+\\-][0-9][0-9]:[0-9][0-9])?/,\n    type: 'http://www.w3.org/2001/XMLSchema#time' },\n  { pattern: /-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,\n    type: 'http://www.w3.org/2001/XMLSchema#gYearMonth' },\n  { pattern: /-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,\n    type: 'http://www.w3.org/2001/XMLSchema#gYear' }\n]\n\nconst parseRDFaDOM = RDFaProcessor.parseRDFaDOM\nexport { parseRDFaDOM }\n","/**\n *  RDF/XML PARSER\n *\n *  Parser believed to be in full positive RDF/XML parsing compliance\n *  with the possible exception of handling deprecated RDF attributes\n *  appropriately. Parser is believed to comply fully with other W3C\n *  and industry standards where appropriate (DOM, ECMAScript, &c.)\n *\n *  Author: David Sheets <dsheets@mit.edu>\n *\n * W3C SOFTWARE NOTICE AND LICENSE\n * http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231\n * This work (and included software, documentation such as READMEs, or\n * other related items) is being provided by the copyright holders under\n * the following license. By obtaining, using and/or copying this work,\n * you (the licensee) agree that you have read, understood, and will\n * comply with the following terms and conditions.\n *\n * Permission to copy, modify, and distribute this software and its\n * documentation, with or without modification, for any purpose and\n * without fee or royalty is hereby granted, provided that you include\n * the following on ALL copies of the software and documentation or\n * portions thereof, including modifications:\n *\n * 1. The full text of this NOTICE in a location viewable to users of\n * the redistributed or derivative work.\n * 2. Any pre-existing intellectual property disclaimers, notices, or terms and\n * conditions. If none exist, the W3C Software Short Notice should be\n * included (hypertext is preferred, text is permitted) within the body\n * of any redistributed or derivative code.\n * 3. Notice of any changes or modifications to the files, including the\n * date changes were made. (We recommend you provide URIs to the location\n * from which the code is derived.)\n *\n * THIS SOFTWARE AND DOCUMENTATION IS PROVIDED \"AS IS,\" AND COPYRIGHT\n * HOLDERS MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY OR FITNESS\n * FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE SOFTWARE OR\n * DOCUMENTATION WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS,\n * TRADEMARKS OR OTHER RIGHTS.\n *\n * COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL\n * OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE SOFTWARE OR\n * DOCUMENTATION.\n *\n * The name and trademarks of copyright holders may NOT be used in\n * advertising or publicity pertaining to the software without specific,\n * written prior permission. Title to copyright in this software and any\n * associated documentation will at all times remain with copyright\n * holders.\n */\n/**\n * @class RDFParser resource object tied to an RDFStore\n *\n * @author David Sheets <dsheets@mit.edu>\n *\n*/\nimport * as uriUtil from './uri'\n\n\nexport default class RDFParser {\n\n  /*\n   * @constructor\n   * @param {RDFStore} store An RDFStore object\n   */\n  constructor(store) {\n    /** Our triple store reference @private */\n\n    this.store = store /** Our identified blank nodes @private */\n    this.bnodes = {} /** A context for context-aware stores @private */\n    this.why = null /** Reification flag */\n    this.reify = false\n  }\n\n  /** Standard namespaces that we know how to handle @final\n   *  @member RDFParser\n   */\n  static ns = {'RDF': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#', 'RDFS': 'http://www.w3.org/2000/01/rdf-schema#'}\n\n  /** DOM Level 2 node type magic numbers @final\n   *  @member RDFParser\n   */\n  static nodeType = {'ELEMENT': 1, 'ATTRIBUTE': 2, 'TEXT': 3,\n    'CDATA_SECTION': 4, 'ENTITY_REFERENCE': 5,\n    'ENTITY': 6, 'PROCESSING_INSTRUCTION': 7,\n    'COMMENT': 8, 'DOCUMENT': 9, 'DOCUMENT_TYPE': 10,\n  'DOCUMENT_FRAGMENT': 11, 'NOTATION': 12}\n\n  /**\n   * Frame class for namespace and base URI lookups\n   * Base lookups will always resolve because the parser knows\n   * the default base.\n   *\n   * @private\n   */\n\n  frameFactory(parser, parent, element) {\n    return {'NODE': 1, 'ARC': 2, 'parent': parent, 'parser': parser, 'store': parser.store, 'element': element,\n      'lastChild': 0, 'base': null, 'lang': null, 'node': null, 'nodeType': null, 'listIndex': 1, 'rdfid': null, 'datatype': null, 'collection': false, /** Terminate the frame and notify the store that we're done */\n      'terminateFrame': function () {\n        if (this.collection) {\n          this.node.close()\n        }\n      },         /** Add a symbol of a certain type to the this frame */'addSymbol': function (type, uri) {\n        uri = uriUtil.join(uri, this.base)\n        this.node = this.store.sym(uri)\n\n        this.nodeType = type\n      },         /** Load any constructed triples into the store */'loadTriple': function () {\n        if (this.parent.parent.collection) {\n          this.parent.parent.node.append(this.node)\n        } else {\n          this.store.add(this.parent.parent.node, this.parent.node, this.node, this.parser.why)\n        }\n        if (this.parent.rdfid != null) {\n          // reify\n          var triple = this.store.sym(uriUtil.join('#' + this.parent.rdfid, this.base))\n          this.store.add(triple, this.store.sym(RDFParser.ns.RDF + 'type'), this.store.sym(RDFParser.ns.RDF + 'Statement'), this.parser.why)\n          this.store.add(triple, this.store.sym(RDFParser.ns.RDF + 'subject'), this.parent.parent.node, this.parser.why)\n          this.store.add(triple, this.store.sym(RDFParser.ns.RDF + 'predicate'), this.parent.node, this.parser.why)\n\n          this.store.add(triple, this.store.sym(RDFParser.ns.RDF + 'object'), this.node, this.parser.why)\n        }\n      },         /** Check if it's OK to load a triple */'isTripleToLoad': function () {\n        return (this.parent != null && this.parent.parent != null && this.nodeType === this.NODE && this.parent.nodeType ===\n        this.ARC && this.parent.parent.nodeType === this.NODE)\n      },         /** Add a symbolic node to this frame */'addNode': function (uri) {\n        this.addSymbol(this.NODE, uri)\n        if (this.isTripleToLoad()) {\n          this.loadTriple()\n        }\n      },         /** Add a collection node to this frame */'addCollection': function () {\n        this.nodeType = this.NODE\n        this.node = this.store.collection()\n        this.collection = true\n        if (this.isTripleToLoad()) {\n          this.loadTriple()\n        }\n      },         /** Add a collection arc to this frame */'addCollectionArc': function () {\n        this.nodeType = this.ARC\n      },         /** Add a bnode to this frame */'addBNode': function (id) {\n        if (id != null) {\n          if (this.parser.bnodes[id] != null) {\n            this.node = this.parser.bnodes[id]\n          } else {\n            this.node = this.parser.bnodes[id] = this.store.bnode()\n          }\n        } else {\n          this.node = this.store.bnode()\n        }\n        this.nodeType = this.NODE\n        if (this.isTripleToLoad()) {\n          this.loadTriple()\n        }\n      },         /** Add an arc or property to this frame */'addArc': function (uri) {\n        if (uri === RDFParser.ns.RDF + 'li') {\n          uri = RDFParser.ns.RDF + '_' + this.parent.listIndex\n          this.parent.listIndex++\n        }\n\n        this.addSymbol(this.ARC, uri)\n      },         /** Add a literal to this frame */'addLiteral': function (value) {\n        if (this.parent.datatype && this.parent.datatype !== RDFParser.ns.RDF +'langString') {\n          this.node = this.store.literal(value, this.store.sym(this.parent.datatype))\n        } else {\n          this.node = this.store.literal(value, this.lang)\n        }\n        this.nodeType = this.NODE\n        if (this.isTripleToLoad()) {\n          this.loadTriple()\n        }\n      }\n    }\n  }\n\n  // from the OpenLayers source .. needed to get around IE problems.\n  getAttributeNodeNS(node, uri, name) {\n    var attributeNode = null\n    if (node.getAttributeNodeNS) {\n      attributeNode = node.getAttributeNodeNS(uri, name)\n    } else {\n      var attributes = node.attributes\n      var potentialNode, fullName\n      for (var i = 0;i < attributes.length; ++i) {\n        potentialNode = attributes[i]\n        if (potentialNode.namespaceURI === uri) {\n          fullName = (potentialNode.prefix) ? (potentialNode.prefix + ':' + name) : name\n          if (fullName === potentialNode.nodeName) {\n            attributeNode = potentialNode\n            break\n          }\n        }\n      }\n    }\n    return attributeNode\n  }\n\n  /**\n   * Build our initial scope frame and parse the DOM into triples\n   * @param {HTMLDocument} document The DOM to parse\n   * @param {String} base The base URL to use\n   * @param {Object} why The context to which this resource belongs\n   */\n\n  parse(document, base, why) {\n    var children = document.childNodes // clean up for the next run\n    this.cleanParser() // figure out the root element\n    var root\n    if (document.nodeType === RDFParser.nodeType.DOCUMENT) {\n      for (var c = 0;c < children.length;c++) {\n        if (children[c].nodeType === RDFParser.nodeType.ELEMENT) {\n          root = children[c]\n          break\n        }\n      }\n    } else if (document.nodeType === RDFParser.nodeType.ELEMENT) {\n      root = document\n    } else {\n      throw new Error(\"RDFParser: can't find root in \" + base + '. Halting. ')\n    // return false\n    }\n    this.why = why // our topmost frame\n    var f = this.frameFactory(this)\n    this.base = base\n    f.base = base\n    f.lang = null // was '' but can't have langs like that 2015 (!)\n    this.parseDOM(this.buildFrame(f, root))\n    return true\n  }\n\n  parseDOM(frame) {\n    // a DOM utility function used in parsing\n    var rdfid\n    var elementURI = function (el) {\n      var result = ''\n      if (el.namespaceURI == null) {\n        throw new Error('RDF/XML syntax error: No namespace for ' + el.localName + ' in ' + this.base)\n      }\n      if (el.namespaceURI) {\n        result = result + el.namespaceURI\n      }\n      if (el.localName) {\n        result = result + el.localName\n      } else if (el.nodeName) {\n        if (el.nodeName.indexOf(':') >= 0)result = result + el.nodeName.split(':')[1]\n        else result = result + el.nodeName\n      }\n      return result\n    }.bind(this)\n    var dig = true // if we'll dig down in the tree on the next iter\n    while (frame.parent) {\n      var dom = frame.element\n      var attrs = dom.attributes\n      if (dom.nodeType === RDFParser.nodeType.TEXT || dom.nodeType === RDFParser.nodeType.CDATA_SECTION) {\n        // we have a literal\n        if (frame.parent.nodeType === frame.NODE) {\n          // must have had attributes, store as rdf:value\n          frame.addArc(RDFParser.ns.RDF + 'value')\n          frame = this.buildFrame(frame)\n        }\n        frame.addLiteral(dom.nodeValue)\n      } else if (elementURI(dom) !== RDFParser.ns.RDF + 'RDF') {\n        // not root\n        if (frame.parent && frame.parent.collection) {\n          // we're a collection element\n          frame.addCollectionArc()\n          frame = this.buildFrame(frame, frame.element)\n          frame.parent.element = null\n        }\n        if (!frame.parent || !frame.parent.nodeType || frame.parent.nodeType === frame.ARC) {\n          // we need a node\n          var about = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'about')\n          rdfid = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'ID')\n          if (about && rdfid) {\n            throw new Error('RDFParser: ' + dom.nodeName + ' has both rdf:id and rdf:about.' +\n              ' Halting. Only one of these' + ' properties may be specified on a' + ' node.')\n          }\n          if (!about && rdfid) {\n            frame.addNode('#' + rdfid.nodeValue)\n            dom.removeAttributeNode(rdfid)\n          } else if (about == null && rdfid == null) {\n            var bnid = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'nodeID')\n            if (bnid) {\n              frame.addBNode(bnid.nodeValue)\n              dom.removeAttributeNode(bnid)\n            } else {\n              frame.addBNode()\n            }\n          } else {\n            frame.addNode(about.nodeValue)\n            dom.removeAttributeNode(about)\n          }\n          // Typed nodes\n          var rdftype = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'type')\n          if (RDFParser.ns.RDF + 'Description' !== elementURI(dom)) {\n            rdftype = {'nodeValue': elementURI(dom)}\n          }\n          if (rdftype != null) {\n            this.store.add(frame.node, this.store.sym(RDFParser.ns.RDF + 'type'), this.store.sym(uriUtil.join(rdftype.nodeValue,\n              frame.base)), this.why)\n            if (rdftype.nodeName) {\n              dom.removeAttributeNode(rdftype)\n            }\n          }\n          // Property Attributes\n          for (var x = attrs.length - 1; x >= 0; x--) {\n            this.store.add(frame.node, this.store.sym(elementURI(attrs[x])), this.store.literal(attrs[x].nodeValue,\n              frame.lang), this.why)\n          }\n        } else {\n          // we should add an arc (or implicit bnode+arc)\n          frame.addArc(elementURI(dom)) // save the arc's rdf:ID if it has one\n          if (this.reify) {\n            rdfid = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'ID')\n            if (rdfid) {\n              frame.rdfid = rdfid.nodeValue\n              dom.removeAttributeNode(rdfid)\n            }\n          }\n          var parsetype = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'parseType')\n          var datatype = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'datatype')\n          if (datatype) {\n            frame.datatype = datatype.nodeValue\n            dom.removeAttributeNode(datatype)\n          }\n          if (parsetype) {\n            var nv = parsetype.nodeValue\n            if (nv === 'Literal') {\n              frame.datatype = RDFParser.ns.RDF + 'XMLLiteral'\n              frame = this.buildFrame(frame)\n              // Don't include the literal node, only its children\n              // see https://github.com/linkeddata/rdflib.js/issues/75\n              frame.addLiteral(dom.innerHTML || dom.childNodes)\n              dig = false\n            } else if (nv === 'Resource') {\n              frame = this.buildFrame(frame, frame.element)\n              frame.parent.element = null\n              frame.addBNode()\n            } else if (nv === 'Collection') {\n              frame = this.buildFrame(frame, frame.element)\n              frame.parent.element = null\n              frame.addCollection()\n            }\n            dom.removeAttributeNode(parsetype)\n          }\n          if (attrs.length !== 0) {\n            var resource = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'resource')\n            var bnid2 = this.getAttributeNodeNS(dom, RDFParser.ns.RDF, 'nodeID')\n            frame = this.buildFrame(frame)\n            if (resource) {\n              frame.addNode(resource.nodeValue)\n              dom.removeAttributeNode(resource)\n            } else {\n              if (bnid2) {\n                frame.addBNode(bnid2.nodeValue)\n                dom.removeAttributeNode(bnid2)\n              } else {\n                frame.addBNode()\n              }\n            }\n            for (var x1 = attrs.length - 1; x1 >= 0; x1--) {\n              var f = this.buildFrame(frame)\n              f.addArc(elementURI(attrs[x1]))\n              if (elementURI(attrs[x1]) === RDFParser.ns.RDF + 'type') {\n                (this.buildFrame(f)).addNode(attrs[x1].nodeValue)\n              } else {\n                (this.buildFrame(f)).addLiteral(attrs[x1].nodeValue)\n              }\n            }\n          } else if (dom.childNodes.length === 0) {\n            (this.buildFrame(frame)).addLiteral('')\n          }\n        }\n      } // rdf:RDF\n      // dig dug\n      dom = frame.element\n      while (frame.parent) {\n        var pframe = frame\n        while (dom == null) {\n          frame = frame.parent\n          dom = frame.element\n        }\n        var candidate = dom.childNodes && dom.childNodes[frame.lastChild]\n        if (!candidate || !dig) {\n          frame.terminateFrame()\n          if (!(frame = frame.parent)) {\n            break\n          } // done\n          dom = frame.element\n          dig = true\n        } else if ((candidate.nodeType !== RDFParser.nodeType.ELEMENT &&\n          candidate.nodeType !== RDFParser.nodeType.TEXT &&\n          candidate.nodeType !== RDFParser.nodeType.CDATA_SECTION) ||\n          ((candidate.nodeType === RDFParser.nodeType.TEXT ||\n          candidate.nodeType === RDFParser.nodeType.CDATA_SECTION) &&\n          dom.childNodes.length !== 1)) {\n          frame.lastChild++\n        } else {\n          // not a leaf\n          frame.lastChild++\n          frame = this.buildFrame(pframe, dom.childNodes[frame.lastChild - 1])\n          break\n        }\n      }\n    } // while\n  }\n\n  /**\n   * Cleans out state from a previous parse run\n   * @private\n   */\n  cleanParser() {\n    this.bnodes = {}\n    this.why = null\n  }\n\n  /**\n   * Builds scope frame\n   * @private\n   */\n  buildFrame(parent, element) {\n    var frame = this.frameFactory(this, parent, element)\n    if (parent) {\n      frame.base = parent.base\n      frame.lang = parent.lang\n    }\n    if (!element || element.nodeType === RDFParser.nodeType.TEXT ||\n      element.nodeType === RDFParser.nodeType.CDATA_SECTION) {\n      return frame\n    }\n    var attrs = element.attributes\n    var base = element.getAttributeNode('xml:base')\n    if (base != null) {\n      frame.base = base.nodeValue\n      element.removeAttribute('xml:base')\n    }\n    var lang = element.getAttributeNode('xml:lang')\n    if (lang != null) {\n      frame.lang = lang.nodeValue\n      element.removeAttribute('xml:lang')\n    }\n    // remove all extraneous xml and xmlns attributes\n    for (var x = attrs.length - 1;x >= 0;x--) {\n      if (attrs[x].nodeName.substr(0, 3) === 'xml') {\n        if (attrs[x].name.slice(0, 6) === 'xmlns:') {\n          var uri = attrs[x].nodeValue // alert('base for namespac attr:'+this.base)\n          if (this.base) uri = uriUtil.join(uri, this.base)\n          this.store.setPrefixForURI(attrs[x].name.slice(6), uri)\n        }\n        //\t\talert('rdfparser: xml atribute: '+attrs[x].name) //@@\n        element.removeAttributeNode(attrs[x])\n      }\n    }\n    return frame\n  }\n}\n","// Parse a simple SPARL-Update subset syntax for patches.\n//\n//  This parses\n//   WHERE {xxx} DELETE {yyy} INSERT DATA {zzz}\n// (not necessarily in that order)\n// as though it were the n3\n//   <#query> patch:where {xxx}; patch:delete {yyy}; patch:insert {zzz}.\nimport N3Parser from './n3parser'\nimport Namespace from './namespace'\n\nexport default function sparqlUpdateParser (str, kb, base) {\n  var i, j, k\n  var keywords = [ 'INSERT', 'DELETE', 'WHERE' ]\n  var SQNS = Namespace('http://www.w3.org/ns/pim/patch#')\n  var p = N3Parser(kb, kb, base, base, null, null, '', null)\n  var clauses = {}\n\n  var badSyntax = function (uri, lines, str, i, why) {\n    return ('Line ' + (lines + 1) + ' of <' + uri + '>: Bad syntax:\\n   ' +\n    why + '\\n   at: \"' + str.slice(i, (i + 30)) + '\"')\n  }\n\n  // var check = function (next, last, message) {\n  //   if (next < 0) {\n  //     throw badSyntax(p._thisDoc, p.lines, str, j, last, message)\n  //   }\n  //   return next\n  // }\n  i = 0\n  var query = kb.sym(base + '#query') // Invent a URI for the query\n  clauses['query'] = query // A way of accessing it in its N3 model.\n\n  while (true) {\n    // console.log(\"A Now at i = \" + i)\n    j = p.skipSpace(str, i)\n    if (j < 0) {\n      return clauses\n    }\n    // console.log(\"B After space at j= \" + j)\n    if (str[j] === ';') {\n      i = p.skipSpace(str, j + 1)\n      if (i < 0) {\n        return clauses // Allow end in a\n      }\n      j = i\n    }\n    var found = false\n    for (k = 0; k < keywords.length; k++) {\n      var key = keywords[k]\n      if (str.slice(j, j + key.length) === key) {\n        i = p.skipSpace(str, j + key.length)\n        if (i < 0) {\n          throw badSyntax(p._thisDoc, p.lines, str, j + key.length, 'found EOF, needed {...} after ' + key)\n        }\n        if (((key === 'INSERT') || (key === 'DELETE')) && str.slice(i, i + 4) === 'DATA') { // Some wanted 'DATA'. Whatever\n          j = p.skipSpace(str, i + 4)\n          if (j < 0) {\n            throw badSyntax(p._thisDoc, p.lines, str, i + 4, 'needed {...} after INSERT DATA ' + key)\n          }\n          i = j\n        }\n        var res2 = []\n        j = p.node(str, i, res2) // Parse all the complexity of the clause\n\n        if (j < 0) {\n          throw badSyntax(p._thisDoc, p.lines, str, i,\n            'bad syntax or EOF in {...} after ' + key)\n        }\n        clauses[key.toLowerCase()] = res2[0]\n        kb.add(query, SQNS(key.toLowerCase()), res2[0]) // , kb.sym(base)\n        // key is the keyword and res2 has the contents\n        found = true\n        i = j\n      }\n    }\n    if (!found && str.slice(j, j + 7) === '@prefix') {\n      i = p.directive(str, j)\n      if (i < 0) {\n        throw badSyntax(p._thisDoc, p.lines, str, i,\n          'bad syntax or EOF after @prefix ')\n      }\n      // console.log(\"P before dot i= \" + i)\n      i = p.checkDot(str, i)\n      // console.log(\"Q after dot i= \" + i)\n      found = true\n    }\n    if (!found) {\n      // console.log(\"Bad syntax \" + j)\n      throw badSyntax(p._thisDoc, p.lines, str, j,\n        \"Unknown syntax at start of statememt: '\" + str.slice(j).slice(0, 20) + \"'\")\n    }\n  } // while\n// return clauses\n}\n","import DataFactory from './factories/extended-term-factory'\nimport jsonldParser from './jsonldparser'\nimport N3Parser from './n3parser'\nimport { parseNQuads } from './nquads-parser'\nimport { parseRDFaDOM } from './rdfaparser'\nimport RDFParser from './rdfxmlparser'\nimport sparqlUpdateParser from './patch-parser'\nimport * as Util from './utils-js'\nimport Formula from './formula'\nimport { ContentType, TurtleContentType, N3ContentType, RDFXMLContentType, XHTMLContentType, HTMLContentType, SPARQLUpdateContentType, SPARQLUpdateSingleMatchContentType, JSONLDContentType, NQuadsContentType, NQuadsAltContentType } from './types'\n\ntype CallbackFunc = (error: any, kb: Formula | null) => void\n\n/**\n * Parse a string and put the result into the graph kb.\n * Normal method is sync.\n * Unfortunately jsdonld is currently written to need to be called async.\n * If you are parsing JSON-LD and want to know when and whether it succeeded, you need to use the callback param.\n * @param str - The input string to parse\n * @param kb - The store to use\n * @param base - The base URI to use\n * @param contentType - The MIME content type string for the input - defaults to text/turtle\n * @param [callback] - The callback to call when the data has been loaded\n */\nexport default function parse (\n  str: string,\n  kb: Formula,\n  base: string,\n  contentType: string | ContentType = 'text/turtle',\n  callback?: CallbackFunc\n) {\n  contentType = contentType || TurtleContentType\n  contentType = contentType.split(';')[0] as ContentType\n  try {\n    if (contentType === N3ContentType || contentType === TurtleContentType) {\n      var p = N3Parser(kb, kb, base, base, null, null, '', null)\n      p.loadBuf(str)\n      executeCallback()\n    } else if (contentType === RDFXMLContentType) {\n      var parser = new RDFParser(kb)\n      parser.parse(Util.parseXML(str), base, kb.sym(base))\n      executeCallback()\n    } else if (contentType === XHTMLContentType) {\n      parseRDFaDOM(Util.parseXML(str, {contentType: XHTMLContentType}), kb, base)\n      executeCallback()\n    } else if (contentType === HTMLContentType) {\n      parseRDFaDOM(Util.parseXML(str, {contentType: HTMLContentType}), kb, base)\n      executeCallback()\n    } else if ((contentType === SPARQLUpdateContentType) || (contentType === SPARQLUpdateSingleMatchContentType)) { // @@ we handle a subset\n      sparqlUpdateParser(str, kb, base)\n      executeCallback()\n    } else if (contentType === JSONLDContentType) {\n      // since we do not await the promise here, rejections will not be covered by the surrounding try catch\n      // we do not use await, because parse() should stay sync\n      // so, to not lose the async error, we need to catch the rejection and call the error callback here too\n      jsonldParser(str, kb, base)\n          .then(executeCallback)\n          .catch(executeErrorCallback)\n    } else if (contentType === NQuadsContentType ||\n               contentType === NQuadsAltContentType) {\n      parseNQuads(str, DataFactory, (err, quad) => {\n        if (err) {\n          executeErrorCallback(err)\n        } else if (quad) {\n          kb.add(quad.subject, quad.predicate, quad.object, quad.graph)\n        } else {\n          // null quad signals end of parsing\n          executeCallback()\n        }\n      })\n    } else if (contentType === undefined) {\n      throw new Error(\"contentType is undefined\")\n    } else {\n      throw new Error(\"Don't know how to parse \" + contentType + ' yet')\n    }\n  } catch (e) {\n    // @ts-ignore\n    executeErrorCallback(e)\n  }\n\n  (parse as any).handled= {\n    'text/n3': true,\n    'text/turtle': true,\n    'application/rdf+xml': true,\n    'application/xhtml+xml': true,\n    'text/html': true,\n    'application/sparql-update': true,\n    'application/sparql-update-single-match': true,\n    'application/ld+json': true,\n    'application/nquads' : true,\n    'application/n-quads' : true\n  }\n\n  function executeCallback () {\n    if (callback) {\n      callback(null, kb)\n    } else {\n      return\n    }\n  }\n\n  function executeErrorCallback (e: Error): void {\n    if (\n      // TODO: Always true, what is the right behavior\n      contentType !== JSONLDContentType ||\n      // @ts-ignore always true?\n      contentType !== NQuadsContentType ||\n      // @ts-ignore always true?\n      contentType !== NQuadsAltContentType\n    ) {\n      if (callback) {\n        callback(e, kb)\n      } else {\n        let e2 = new Error('' + e + ' while trying to parse <' + base + '> as ' + contentType)\n        //@ts-ignore .cause is not a default error property\n        e2.cause = e\n        throw e2\n      }\n    }\n  }\n}\n","/* global $SolidTestEnvironment */\n/**\n *\n * Project: rdflib.js\n *\n * @file: fetcher.js\n *\n * Description: contains functions for requesting/fetching/retracting\n *  This implements quite a lot of the web architecture.\n * A fetcher is bound to a specific quad store, into which\n * it loads stuff and into which it writes its metadata\n * @@ The metadata could be optionally a separate graph\n *\n * - implements semantics of HTTP headers, Internet Content Types\n * - selects parsers for rdf/xml, n3, rdfa, grddl\n *\n * TO do:\n * - Implement a runtime registry for parsers and serializers\n * -\n */\n\n/**\n * Things to test: callbacks on request, refresh, retract\n *   loading from HTTP, HTTPS, FTP, FILE, others?\n * To do:\n * Firing up a mail client for mid:  (message:) URLs\n */\nimport IndexedFormula from './store'\nimport log from './log'\nimport N3Parser from './n3parser'\nimport RDFlibNamedNode from './named-node'\nimport Namespace from './namespace'\nimport rdfParse from './parse'\nimport { parseRDFaDOM } from './rdfaparser'\nimport RDFParser from './rdfxmlparser'\nimport * as Uri from './uri'\nimport { isCollection, isNamedNode} from './utils/terms'\nimport * as Util from './utils-js'\nimport serialize from './serialize'\n// Use native fetch when available, no polyfill needed for modern environments\n// Headers is a global in modern browsers and Node.js 18+\ndeclare var Headers: typeof globalThis.Headers\n\nimport {\n  ContentType, TurtleContentType, RDFXMLContentType, XHTMLContentType\n} from './types'\nimport { termValue } from './utils/termValue'\nimport {\n  BlankNode,\n  RdfJsDataFactory,\n  Quad_Graph,\n  NamedNode,\n  Quad_Predicate,\n  Quad_Subject\n} from './tf-types'\nimport jsonldParser from './jsonldparser'\n\nconst Parsable = {\n  'text/n3': true,\n  'text/turtle': true,\n  'application/rdf+xml': true,\n  'application/xhtml+xml': true,\n  'text/html': true,\n  'application/ld+json': true\n}\n\n// This is a minimal set to allow the use of damaged servers if necessary\nconst CONTENT_TYPE_BY_EXT = {\n  'rdf': RDFXMLContentType,\n  'owl': RDFXMLContentType,\n  'n3': 'text/n3',\n  'ttl': 'text/turtle',\n  'nt': 'text/n3',\n  'acl': 'text/n3',\n  'html': 'text/html',\n  'xml': 'text/xml'\n}\n\n// Convenience namespaces needed in this module.\n// These are deliberately not exported as the user application should\n// make its own list and not rely on the prefixes used here,\n// and not be tempted to add to them, and them clash with those of another\n// application.\nconst getNS = (factory?: RdfJsDataFactory) => {\n  return {\n    link: Namespace('http://www.w3.org/2007/ont/link#', factory),\n    http: Namespace('http://www.w3.org/2007/ont/http#', factory),\n    httph: Namespace('http://www.w3.org/2007/ont/httph#', factory),  // headers\n    rdf: Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#', factory),\n    rdfs: Namespace('http://www.w3.org/2000/01/rdf-schema#', factory),\n    dc: Namespace('http://purl.org/dc/elements/1.1/', factory),\n    ldp: Namespace('http://www.w3.org/ns/ldp#', factory)\n  }\n}\nconst ns = getNS()\n\nexport interface FetchError extends Error {\n  statusText?: string\n  status?: StatusValues\n  response?: ExtendedResponse\n}\n\n/** An extended interface of Response, since RDFlib.js adds some properties. */\nexport interface ExtendedResponse extends Response {\n  /** String representation of the Body */\n  responseText?: string\n  /** Identifier of the reqest */\n  req?: Quad_Subject\n  size?: number\n  timeout?: number\n  /** Used in UpdateManager.updateDav */\n  error?: string\n}\n\n/** tell typescript that a 'panes' child may exist on Window */\ndeclare global {\n  interface Window {\n    panes?: any\n    solidFetcher?: any\n    solidFetch?: any\n  }\n  var solidFetcher: Function\n  var solidFetch: Function\n}\ndeclare var $SolidTestEnvironment: {\n  localSiteMap?: any\n}\n\ntype UserCallback = (\n  ok: boolean,\n  message: string,\n  response?: any\n) => void\n\ntype HTTPMethods = 'GET' | 'PUT' | 'POST' | 'PATCH' | 'HEAD' | 'DELETE' | 'CONNECT' | 'TRACE' | 'OPTIONS'\n\n/** All valid inputs for initFetchOptions */\nexport type Options = Partial<AutoInitOptions>\n\n/** Initiated by initFetchOptions, which runs on load */\nexport interface AutoInitOptions extends RequestInit{\n  /** The used Fetch function */\n  fetch?: Fetch\n  /**\n   * Referring term, the resource which\n   * referred to this (for tracking bad links).\n   * The document in which this link was found.\n   */\n  referringTerm?: NamedNode\n  /** Provided content type (for writes) */\n  contentType?: string\n  /**\n   * Override the incoming header to\n   * force the data to be treated as this content-type (for reads)\n   */\n  forceContentType?: ContentType\n  /**\n   * Load the data even if loaded before.\n   * Also sets the `Cache-Control:` header to `no-cache`\n   */\n  force?: boolean\n  /**\n   * Original uri to preserve\n   * through proxying etc (`xhr.original`).\n   */\n  baseURI: string\n  /**\n   * Whether this request is a retry via\n   * a proxy (generally done from an error handler)\n   */\n  proxyUsed?: boolean\n  actualProxyURI?: string\n  /** flag for XHR/CORS etc */\n  withCredentials?: boolean\n  /** Before we parse new data, clear old, but only on status 200 responses */\n  clearPreviousData?: boolean\n  /** Prevents the addition of various metadata triples (about the fetch request) to the store*/\n  noMeta?: boolean\n  noRDFa?: boolean\n  handlers?: Handler[]\n  timeout?: number\n  method?: HTTPMethods\n  retriedWithNoCredentials?: boolean\n  requestedURI?: string\n  // Seems to be required in some functions, such as XHTML parse and RedirectToProxy\n  resource: Quad_Subject\n  /** The serialized resource in the body*/\n  // Used for storing metadata of requests\n  original: NamedNode\n  // Like requeststatus? Can contain text with error.\n  data?: string\n  // Probably an identifier for request?s\n  req: BlankNode\n  // Might be the same as Options.data\n  body?: string\n  headers: HeadersInit\n  credentials?: 'include' | 'omit'\n}\n\nclass Handler {\n  // TODO: Document, type\n  response: ExtendedResponse\n  // TODO: Document, type\n  dom: Document\n  static pattern: RegExp\n\n  constructor (response: ExtendedResponse, dom?: Document) {\n    this.response = response\n    // The type assertion operator here might need to be removed.\n    this.dom = dom!\n  }\n}\n\nclass RDFXMLHandler extends Handler {\n  static toString () {\n    return 'RDFXMLHandler'\n  }\n\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes[RDFXMLContentType] = {\n      'q': 0.9\n    }\n  }\n\n  parse (\n    fetcher: Fetcher,\n    /** An XML String */\n    responseText: String,\n    /** Requires .original */\n    options: {\n      original: Quad_Subject\n      req: Quad_Subject\n    } & Options,\n  ) {\n    let kb = fetcher.store\n    if (!this.dom) {\n      this.dom = Util.parseXML(responseText)\n    }\n    let root = this.dom.documentElement\n    if (root && root.nodeName === 'parsererror') { // Mozilla only See issue/issue110\n      // have to fail the request\n      return fetcher.failFetch(options, 'Badly formed XML in ' +\n        options.resource!.value, 'parse_error')\n    }\n    let parser = new RDFParser(kb)\n    try {\n      parser.parse(this.dom, options.original.value, options.original)\n    } catch (err) {\n      return fetcher.failFetch(options, 'Syntax error parsing RDF/XML! ' + err,\n        'parse_error')\n    }\n    if (!options.noMeta) {\n      kb.add(options.original, ns.rdf('type'), ns.link('RDFDocument'), fetcher.appNode)\n    }\n\n    return fetcher.doneFetch(options, this.response)\n  }\n}\nRDFXMLHandler.pattern = new RegExp('application/rdf\\\\+xml')\n\nclass XHTMLHandler extends Handler {\n  static toString () {\n    return 'XHTMLHandler'\n  }\n\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes[XHTMLContentType] = {\n      'q': 0.8\n    }\n  }\n\n  parse (\n    fetcher: Fetcher,\n    responseText: string,\n    options: {\n      resource: Quad_Subject\n      original: Quad_Subject\n    } & Options,\n  ): Promise<FetchError> | ExtendedResponse {\n    let relation, reverse: boolean\n    if (!this.dom) {\n      this.dom = Util.parseXML(responseText)\n    }\n    let kb = fetcher.store\n\n    // dc:title\n    let title = this.dom.getElementsByTagName('title')\n    if (title.length > 0) {\n      kb.add(options.resource, ns.dc('title'), kb.rdfFactory.literal(title[0].textContent as string),\n        options.resource)\n      // log.info(\"Inferring title of \" + xhr.resource)\n    }\n\n    // link rel\n    let links = this.dom.getElementsByTagName('link')\n    for (let x = links.length - 1; x >= 0; x--) { // @@ rev\n      relation = links[x].getAttribute('rel')\n      reverse = false\n      if (!relation) {\n        relation = links[x].getAttribute('rev')\n        reverse = true\n      }\n      if (relation) {\n        fetcher.linkData(options.original, relation,\n          links[x].getAttribute('href') as string, options.resource, reverse)\n      }\n    }\n\n    // Data Islands\n    let scripts = this.dom.getElementsByTagName('script')\n    for (let i = 0; i < scripts.length; i++) {\n      let contentType = scripts[i].getAttribute('type')\n      if (Parsable[contentType!]) {\n        // @ts-ignore incompatibility between Store.add and Formula.add\n        rdfParse(scripts[i].textContent as string, kb, options.original.value, contentType)\n        // @ts-ignore incompatibility between Store.add and Formula.add\n        rdfParse(scripts[i].textContent as string, kb, options.original.value, contentType)\n      }\n    }\n\n    if (!options.noMeta) {\n      kb.add(options.resource, ns.rdf('type'), ns.link('WebPage'), fetcher.appNode)\n    }\n\n    if (!options.noRDFa && parseRDFaDOM) { // enable by default\n      try {\n        parseRDFaDOM(this.dom, kb, options.original.value)\n      } catch (err) {\n        // @ts-ignore\n        let msg = 'Error trying to parse ' + options.resource + ' as RDFa:\\n' + err + ':\\n' + err.stack\n        return fetcher.failFetch(options as AutoInitOptions, msg, 'parse_error')\n      }\n    }\n\n    return fetcher.doneFetch(options as AutoInitOptions, this.response)\n  }\n}\nXHTMLHandler.pattern = new RegExp('application/xhtml')\n\nclass XMLHandler extends Handler {\n  static toString () {\n    return 'XMLHandler'\n  }\n\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes['text/xml'] = { 'q': 0.5 }\n    fetcher.mediatypes['application/xml'] = { 'q': 0.5 }\n  }\n\n  static isElement(node: Node): node is Element {\n    return node.nodeType === Node.ELEMENT_NODE;\n  }\n\n\n  parse (\n    fetcher: Fetcher,\n    responseText: string,\n    options: {\n      original: Quad_Subject\n      req: BlankNode\n      resource: Quad_Subject\n    } & Options,\n  ): ExtendedResponse | Promise<FetchError> {\n    let dom = Util.parseXML(responseText)\n\n    // XML Semantics defined by root element namespace\n    // figure out the root element\n    for (let c = 0; c < dom.childNodes.length; c++) {\n      const node = dom.childNodes[c]\n      // is this node an element?\n      if (XMLHandler.isElement(node)) {\n\n        // We've found the first element, it's the root\n        let ns = node.namespaceURI\n\n        // Is it RDF/XML?\n        if (ns && ns === ns['rdf']) {\n          fetcher.addStatus(options.req,\n            'Has XML root element in the RDF namespace, so assume RDF/XML.')\n\n          let rdfHandler = new RDFXMLHandler(this.response, dom)\n          return rdfHandler.parse(fetcher, responseText, options)\n        }\n\n        break\n      }\n    }\n\n    // Or it could be XHTML?\n    // Maybe it has an XHTML DOCTYPE?\n    if (dom.doctype) {\n      // log.info(\"We found a DOCTYPE in \" + xhr.resource)\n      if (dom.doctype.name === 'html' &&\n          dom.doctype.publicId.match(/^-\\/\\/W3C\\/\\/DTD XHTML/) &&\n          dom.doctype.systemId.match(/http:\\/\\/www.w3.org\\/TR\\/xhtml/)) {\n        fetcher.addStatus(options.req,\n          'Has XHTML DOCTYPE. Switching to XHTML Handler.\\n')\n\n        let xhtmlHandler = new XHTMLHandler(this.response, dom)\n        return xhtmlHandler.parse(fetcher, responseText, options)\n      }\n    }\n\n    // Or what about an XHTML namespace?\n    let html = dom.getElementsByTagName('html')[0]\n    if (html) {\n      let xmlns = html.getAttribute('xmlns')\n      if (xmlns && xmlns.match(/^http:\\/\\/www.w3.org\\/1999\\/xhtml/)) {\n        fetcher.addStatus(options.req,\n          'Has a default namespace for ' + 'XHTML. Switching to XHTMLHandler.\\n')\n\n        let xhtmlHandler = new XHTMLHandler(this.response, dom)\n        return xhtmlHandler.parse(fetcher, responseText, options)\n      }\n    }\n\n    // At this point we should check the namespace document (cache it!) and\n    // look for a GRDDL transform\n    // @@  Get namespace document <n>, parse it, look for  <n> grddl:namespaceTransform ?y\n    // Apply ?y to   dom\n    // We give up. What dialect is this?\n    return fetcher.failFetch(options,\n      'Unsupported dialect of XML: not RDF or XHTML namespace, etc.\\n' +\n      responseText.slice(0, 80), 901)\n  }\n}\nXMLHandler.pattern = new RegExp('(text|application)/(.*)xml')\n\nclass HTMLHandler extends Handler {\n  static toString () {\n    return 'HTMLHandler'\n  }\n\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes['text/html'] = {\n      'q': 0.8\n    }\n  }\n\n  parse (\n    fetcher: Fetcher,\n    responseText: string,\n    options: {\n      req: BlankNode,\n      resource: Quad_Subject,\n      original: Quad_Subject,\n    } & Options\n  ): Promise<FetchError> | ExtendedResponse {\n    let kb = fetcher.store\n\n    // We only handle XHTML so we have to figure out if this is XML\n    // log.info(\"Sniffing HTML \" + xhr.resource + \" for XHTML.\")\n    if (isXML(responseText)) {\n      fetcher.addStatus(options.req, \"Has an XML declaration. We'll assume \" +\n        \"it's XHTML as the content-type was text/html.\\n\")\n\n      let xhtmlHandler = new XHTMLHandler(this.response)\n      return xhtmlHandler.parse(fetcher, responseText, options)\n    }\n\n    // DOCTYPE html\n    if (isXHTML(responseText)) {\n      fetcher.addStatus(options.req,\n        'Has XHTML DOCTYPE. Switching to XHTMLHandler.\\n')\n\n      let xhtmlHandler = new XHTMLHandler(this.response)\n      return xhtmlHandler.parse(fetcher, responseText, options)\n    }\n\n    // xmlns\n    if (isXMLNS(responseText)) {\n      fetcher.addStatus(options.req,\n        'Has default namespace for XHTML, so switching to XHTMLHandler.\\n')\n\n      let xhtmlHandler = new XHTMLHandler(this.response)\n      return xhtmlHandler.parse(fetcher, responseText, options)\n    }\n\n    // dc:title\n    // no need to escape '/' here\n    let titleMatch = (new RegExp('<title>([\\\\s\\\\S]+?)</title>', 'im')).exec(responseText)\n    if (titleMatch) {\n      kb.add(options.resource, ns.dc('title'), kb.rdfFactory.literal(titleMatch[1]),\n        options.resource) // think about xml:lang later\n    }\n    kb.add(options.resource, ns.rdf('type'), ns.link('WebPage'), fetcher.appNode)\n    fetcher.addStatus(options.req, 'non-XML HTML document, not parsed for data.')\n\n    return fetcher.doneFetch(options, this.response)\n  }\n}\nHTMLHandler.pattern = new RegExp('text/html')\n\nclass JsonLdHandler extends Handler {\n  static toString () {\n    return 'JsonLdHandler'\n  }\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes['application/ld+json'] = {\n      'q': 0.9\n    }\n  }\n  async parse(\n      fetcher: Fetcher,\n      responseText: string,\n      options: {\n        req: Quad_Subject\n        original: Quad_Subject\n        resource: Quad_Subject\n      } & Options,\n      response: ExtendedResponse\n  ): Promise<ExtendedResponse | FetchError> {\n    const kb = fetcher.store\n    try {\n      await jsonldParser(responseText, kb, options.original.value)\n      fetcher.store.add(options.original, ns.rdf('type'), ns.link('RDFDocument'), fetcher.appNode)\n      return fetcher.doneFetch(options, response)\n    } catch (err) {\n      const msg = 'Error trying to parse ' + options.resource +\n          ' as JSON-LD:\\n' + err  // not err.stack -- irrelevant\n      return fetcher.failFetch(options, msg, 'parse_error', response)\n    }\n  }\n}\n\nJsonLdHandler.pattern = /application\\/(ld\\+json|activity\\+json)/\n\nclass TextHandler extends Handler {\n  static toString () {\n    return 'TextHandler'\n  }\n\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes['text/plain'] = {\n      'q': 0.5\n    }\n  }\n\n  parse (\n    fetcher: Fetcher,\n    responseText: string,\n    options: {\n      req: Quad_Subject\n      original: Quad_Subject\n      resource: Quad_Subject\n    } & Options\n  ): ExtendedResponse | Promise<FetchError> {\n    // We only speak dialects of XML right now. Is this XML?\n\n    // Look for an XML declaration\n    if (isXML(responseText)) {\n      fetcher.addStatus(options.req, 'Warning: ' + options.resource +\n        \" has an XML declaration. We'll assume \" +\n        \"it's XML but its content-type wasn't XML.\\n\")\n\n      let xmlHandler = new XMLHandler(this.response)\n      return xmlHandler.parse(fetcher, responseText, options)\n    }\n\n    // Look for an XML declaration\n    if (responseText.slice(0, 500).match(/xmlns:/)) {\n      fetcher.addStatus(options.req, \"May have an XML namespace. We'll assume \" +\n        \"it's XML but its content-type wasn't XML.\\n\")\n\n      let xmlHandler = new XMLHandler(this.response)\n      return xmlHandler.parse(fetcher, responseText, options)\n    }\n\n    // We give up finding semantics - this is not an error, just no data\n    fetcher.addStatus(options.req, 'Plain text document, no known RDF semantics.')\n\n    return fetcher.doneFetch(options, this.response)\n  }\n}\nTextHandler.pattern = new RegExp('text/plain')\n\nclass N3Handler extends Handler {\n  static toString () {\n    return 'N3Handler'\n  }\n\n  static register (fetcher: Fetcher) {\n    fetcher.mediatypes['text/n3'] = {}\n    fetcher.mediatypes['text/turtle'] = {}\n  }\n\n  parse (\n    fetcher: Fetcher,\n    responseText: string,\n    options: {\n      original: NamedNode\n      req: Quad_Subject\n    } & Options,\n    response: ExtendedResponse\n  ): ExtendedResponse | Promise<FetchError> {\n    // Parse the text of this N3 file\n    let kb = fetcher.store\n    let p = N3Parser(kb, kb, options.original.value, options.original.value,\n      null, null, '', null)\n    //                p.loadBuf(xhr.responseText)\n    try {\n      p.loadBuf(responseText)\n    } catch (err) {\n      let msg = 'Error trying to parse ' + options.resource +\n        ' as Notation3:\\n' + err  // not err.stack -- irrelevant\n      return fetcher.failFetch(options, msg, 'parse_error', response)\n    }\n\n    fetcher.addStatus(options.req, 'N3 parsed: ' + p.statementCount + ' triples in ' + p.lines + ' lines.')\n    fetcher.store.add(options.original, ns.rdf('type'), ns.link('RDFDocument'), fetcher.appNode)\n\n    return fetcher.doneFetch(options, this.response)\n  }\n}\nN3Handler.pattern = new RegExp('(application|text)/(x-)?(rdf\\\\+)?(n3|turtle)')\n\nconst defaultHandlers = {\n  RDFXMLHandler, XHTMLHandler, XMLHandler, HTMLHandler, TextHandler, N3Handler, JsonLdHandler\n}\n\nfunction isXHTML (responseText) {\n  const docTypeStart = responseText.indexOf('<!DOCTYPE html')\n  const docTypeEnd = responseText.indexOf('>')\n  if (docTypeStart === -1 || docTypeEnd === -1 || docTypeStart > docTypeEnd) {\n    return false\n  }\n  return responseText.substr(docTypeStart, docTypeEnd - docTypeStart).indexOf('XHTML') !== -1\n}\n\nfunction isXML (responseText: string): boolean {\n  const match = responseText.match(/\\s*<\\?xml\\s+version\\s*=[^<>]+\\?>/)\n  return !!match\n}\n\nfunction isXMLNS (responseText: string): boolean {\n  const match = responseText.match(/[^(<html)]*<html\\s+[^<]*xmlns=['\"]http:\\/\\/www.w3.org\\/1999\\/xhtml[\"'][^<]*>/)\n  return !!match\n}\n\ntype StatusValues =\n  /** No record of web access or record reset */\n  undefined |\n  /** Has been requested, fetch in progress */\n  true |\n  /** Received, OK */\n  'done' |\n  /** Not logged in */\n  401 |\n  /** HTTP status unauthorized */\n  403 |\n  /** Not found, resource does not exist */\n  404 |\n  /** In attempt to counter CORS problems retried */\n  'redirected' |\n  /** If it did fail */\n  'failed' |\n  'parse_error' |\n  /**\n   * URI is not a protocol Fetcher can deal with\n   * other strings mean various other errors.\n   */\n  'unsupported_protocol' |\n  'timeout' |\n  /** Any other HTTP status code */\n  number\n\ninterface MediatypesMap {\n  [id: string]: {\n    // Either string '1.0' or number 1.0 is allowed\n    'q'?: number | string\n  };\n}\n\ninterface RequestedMap {\n  [uri: string]: StatusValues\n}\n\ninterface TimeOutsMap {\n  [uri: string]: number[]\n}\n\ninterface FetchQueue {\n  [uri: string]: Promise<ExtendedResponse>\n}\n\ninterface FetchCallbacks {\n  [uri: string]: UserCallback[]\n}\n\ninterface BooleanMap {\n  [uri: string]: boolean\n}\n\n// Not sure about the shapes of this. Response? FetchError?\ntype Result = Response\n\n/** Differs from normal Fetch, has an extended Response type */\ntype Fetch = (input: RequestInfo, init?: RequestInit) => Promise<ExtendedResponse>;\n\ninterface CallbackifyInterface {\n  fireCallbacks: Function\n}\n\n/** Fetcher\n *\n * The Fetcher object is a helper object for a quadstore\n * which turns it from an offline store to an online store.\n * The fetcher deals with loading data files rom the web,\n  * figuring how to parse them.  It will also refresh, remove, the data\n  * and put back the data to the web.\n */\nexport default class Fetcher implements CallbackifyInterface {\n  store: IndexedFormula\n  timeout: number\n  _fetch: Fetch\n  mediatypes: MediatypesMap\n  /** Denoting this session */\n  appNode: NamedNode\n  /**\n   * this.requested[uri] states:\n   * undefined     no record of web access or records reset\n   * true          has been requested, fetch in progress\n   * 'done'        received, Ok\n   * 401           Not logged in\n   * 403           HTTP status unauthorized\n   * 404           Resource does not exist. Can be created etc.\n   * 'redirected'  In attempt to counter CORS problems retried.\n   * 'parse_error' Parse error\n   * 'unsupported_protocol'  URI is not a protocol Fetcher can deal with\n   * other strings mean various other errors.\n   */\n  requested: RequestedMap\n  /** List of timeouts associated with a requested URL */\n  timeouts: TimeOutsMap\n  /** Redirected from *key uri* to *value uri* */\n  redirectedTo: Record<string, string>\n  fetchQueue: FetchQueue\n  /** fetchCallbacks[uri].push(callback) */\n  fetchCallbacks: FetchCallbacks\n  /** Keep track of explicit 404s -> we can overwrite etc */\n  nonexistent: BooleanMap\n  lookedUp: BooleanMap\n  handlers: Array<typeof Handler>\n  ns: { [k: string]: (ln: string) => Quad_Predicate }\n  static HANDLERS: {\n    [handlerName: number]: Handler\n  }\n  static CONTENT_TYPE_BY_EXT: Record<string, string>\n  // TODO: Document this\n  static crossSiteProxyTemplate: any\n\n  /** Methods added by calling Util.callbackify in the constructor*/\n  fireCallbacks!: Function\n\n  constructor (store: IndexedFormula, options: Options = {}) {\n    this.store = store || new IndexedFormula()\n    this.ns = getNS(this.store.rdfFactory)\n    this.timeout = options.timeout || 30000\n\n    // solidFetcher is deprecated\n    // Prefer native fetch (available in modern browsers and Node.js 18+)\n    let fetchFunc = options.fetch\n               || (typeof globalThis !== 'undefined' && globalThis.fetch)\n               || (typeof global !== 'undefined' && (global.solidFetcher || global.solidFetch || global.fetch))\n               || (typeof window !== 'undefined' && (window.solidFetcher || window.solidFetch || window.fetch))\n    if (!fetchFunc) {\n      throw new Error('No fetch function available. If using Node.js < 18, install a fetch polyfill.')\n    }\n    // Bind fetch to its context to avoid \"Illegal invocation\" errors\n    // Check if it's the native browser fetch or global fetch that needs binding\n    if (typeof window !== 'undefined' && fetchFunc === window.fetch) {\n      this._fetch = fetchFunc.bind(window)\n    } else if (typeof global !== 'undefined' && fetchFunc === global.fetch) {\n      this._fetch = fetchFunc.bind(global)\n    } else {\n      this._fetch = fetchFunc\n    }\n    // This is the name of the graph we store all the HTTP metadata in\n    this.appNode = this.store.sym('chrome://TheCurrentSession')\n    // this.appNode = this.store.rdfFactory.blankNode() // Needs to have a URI in tests\n    this.store.fetcher = this // Bi-linked\n    this.requested = {}\n    this.timeouts = {}\n    this.redirectedTo = {}\n    this.fetchQueue = {}\n    this.fetchCallbacks = {}\n    this.nonexistent = {}\n    this.lookedUp = {}\n    this.handlers = []\n    this.mediatypes = {\n      'image/*': { 'q': 0.9 },\n      '*/*': { 'q': 0.1 }  // Must allow access to random content\n    }\n\n    // Util.callbackify(this, ['request', 'recv', 'headers', 'load', 'fail',\n    //   'refresh', 'retract', 'done'])\n    // In switching to fetch(), 'recv', 'headers' and 'load' do not make sense\n    Util.callbackify(this, ['request', 'fail', 'refresh', 'retract', 'done'])\n\n    Object.keys(options.handlers || defaultHandlers).map(key => this.addHandler(defaultHandlers[key]))\n  }\n\n  static crossSiteProxy (uri: string): undefined | any {\n    if (Fetcher.crossSiteProxyTemplate) {\n      return Fetcher.crossSiteProxyTemplate\n        .replace('{uri}', encodeURIComponent(uri))\n    } else {\n      return undefined\n    }\n  }\n\n  static offlineOverride (uri: string): string {\n    // Map the URI to a localhost proxy if we are running on localhost\n    // This is used for working offline, e.g. on planes.\n    // Is the script itself is running in localhost, then access all\n    //   data in a localhost mirror.\n    // Do not remove without checking with TimBL\n    let requestedURI = uri\n\n    var UI\n    if (typeof window !== 'undefined' && window.panes && (UI = window.panes.UI) &&\n      UI.preferences && UI.preferences.get('offlineModeUsingLocalhost')) {\n      if (requestedURI.slice(0, 7) === 'http://' && requestedURI.slice(7, 17) !== 'localhost/') {\n        requestedURI = 'http://localhost/' + requestedURI.slice(7)\n        log.warn('Localhost kludge for offline use: actually getting <' +\n          requestedURI + '>')\n      } else {\n        // log.warn(\"Localhost kludge NOT USED <\" + requestedURI + \">\")\n      }\n    } else {\n      // log.warn(\"Localhost kludge OFF offline use: actually getting <\" +\n      //   requestedURI + \">\")\n    }\n\n    return requestedURI\n  }\n\n  static proxyIfNecessary (uri: string) {\n    var UI\n    if (\n      typeof window !== 'undefined' &&\n      (window as any).panes &&\n      (UI = (window as any).panes.UI) &&\n      UI.isExtension\n    ) {\n      return uri\n    } // Extension does not need proxy\n\n    if (typeof $SolidTestEnvironment !== 'undefined' &&\n      $SolidTestEnvironment.localSiteMap) {\n      // nested dictionaries of URI parts from origin down\n      let hostpath = uri.split('/').slice(2) // the bit after the //\n\n      const lookup = (parts, index) => {\n        let z = index[parts.shift()]\n\n        if (!z) { return null }\n\n        if (typeof z === 'string') {\n          return z + parts.join('/')\n        }\n\n        if (!parts) { return null }\n\n        return lookup(parts, z)\n      }\n\n      const y = lookup(hostpath, $SolidTestEnvironment.localSiteMap)\n\n      if (y) {\n        return y\n      }\n    }\n\n    // browser does 2014 on as https browser script not trusted\n    // If the web app origin is https: then the mixed content rules\n    // prevent it loading insecure http: stuff so we need proxy.\n    if (Fetcher.crossSiteProxyTemplate &&\n        typeof document !== 'undefined' && document.location &&\n        ('' + document.location).slice(0, 6) === 'https:' && // origin is secure\n        uri.slice(0, 5) === 'http:') { // requested data is not\n      return Fetcher.crossSiteProxyTemplate\n        .replace('{uri}', encodeURIComponent(uri))\n    }\n\n    return uri\n  }\n\n  /**\n   * Tests whether the uri's protocol is supported by the Fetcher.\n   * @param uri\n   */\n  static unsupportedProtocol (uri: string): boolean {\n    let pcol = Uri.protocol(uri)\n\n    return (pcol === 'tel' || pcol === 'mailto' || pcol === 'urn')\n  }\n\n  /** Decide on credentials using old XXHR api or new fetch()  one\n   * @param requestedURI\n   * @param options\n   */\n  static setCredentials (requestedURI: string, options: Options = {}) {\n    // 2014 CORS problem:\n    // XMLHttpRequest cannot load http://www.w3.org/People/Berners-Lee/card.\n    // A wildcard '*' cannot be used in the 'Access-Control-Allow-Origin'\n    //   header when the credentials flag is true.\n    // @ Many ontology files under http: and need CORS wildcard ->\n    //   can't have credentials\n    if (options.credentials === undefined) { // Caller using new fetch convention\n      if (options.withCredentials !== undefined) { // XHR style is what Fetcher specified before\n        options.credentials = options.withCredentials ? 'include' : 'omit'\n      } else {\n        options.credentials = 'include' // default is to be logged on\n      }\n    }\n  }\n\n  /**\n   * Promise-based load function\n   *\n   * Loads a web resource or resources into the store.\n   *\n   * A resource may be given as NamedNode object, or as a plain URI.\n   * an array of resources will be given, in which they will be fetched in parallel.\n   * By default, the HTTP headers are recorded also, in the same store, in a separate graph.\n   * This allows code like editable() for example to test things about the resource.\n   *\n   * @param uri {Array<RDFlibNamedNode>|Array<string>|RDFlibNamedNode|string}\n   *\n   * @param [options={}] {Object}\n   *\n   * @param [options.fetch] {Function}\n   *\n   * @param [options.referringTerm] {RDFlibNamedNode} Referring term, the resource which\n   *   referred to this (for tracking bad links)\n   *\n   * @param [options.contentType] {string} Provided content type (for writes)\n   *\n   * @param [options.forceContentType] {string} Override the incoming header to\n   *   force the data to be treated as this content-type (for reads)\n   *\n   * @param [options.force] {boolean} Load the data even if loaded before.\n   *   Also sets the `Cache-Control:` header to `no-cache`\n   *\n   * @param [options.baseURI=docuri] {Node|string} Original uri to preserve\n   *   through proxying etc (`xhr.original`).\n   *\n   * @param [options.proxyUsed] {boolean} Whether this request is a retry via\n   *   a proxy (generally done from an error handler)\n   *\n   * @param [options.withCredentials] {boolean} flag for XHR/CORS etc\n   *\n   * @param [options.clearPreviousData] {boolean} Before we parse new data,\n   *   clear old, but only on status 200 responses\n   *\n   * @param [options.noMeta] {boolean} Prevents the addition of various metadata\n   *   triples (about the fetch request) to the store\n   *\n   * @param [options.noRDFa] {boolean}\n   *\n   * @returns {Promise<Result>}\n   */\n  load <T extends NamedNode | string | Array<string | NamedNode>>(\n    uri: T,\n    options: Options = {}\n  ): T extends Array<string | NamedNode> ? Promise<Result[]> : Promise<Result> {\n    options = Object.assign({}, options) // Take a copy as we add stuff to the options!!\n    if (uri instanceof Array) {\n      return Promise.all(uri.map((x) => {\n        return this.load(x, Object.assign({}, options)) as unknown as Promise<Result>\n      })) as T extends Array<string | NamedNode> ? Promise<Result[]> : Promise<Result>\n    }\n\n    const uriIn: NamedNode | string = uri as NamedNode\n\n    let docuri = termValue(uriIn)\n    docuri = docuri.split('#')[0]\n\n    options = this.initFetchOptions(docuri, options)\n    // if metadata flaged clear cache and removeDocument\n    const meta = this.appNode\n    const kb = this.store\n    const requests = kb.statementsMatching(undefined, this.ns.link('requestedURI'), kb.sym(docuri), meta).map(st => st.subject)\n    for (const request of requests) {\n      const response = kb.any(request, this.ns.link('response'), null, meta) as Quad_Subject\n      if (response != undefined) { // ts\n        const quad = kb.statementsMatching(response, this.ns.link('outOfDate'), true as any, meta)\n        kb.remove(quad)\n        options.force = true\n        options.clearPreviousData = true\n      }\n    }\n\n    const initialisedOptions = this.initFetchOptions(docuri, options)\n\n    return this.pendingFetchPromise(docuri, initialisedOptions.baseURI, initialisedOptions) as any\n  }\n\n  async pendingFetchPromise (\n    uri: string,\n    originalUri: string,\n    options: AutoInitOptions\n  ): Promise<Result> {\n    let pendingPromise\n\n    // Check to see if some request is already dealing with this uri\n    if (!options.force && await this.fetchQueue[originalUri]) {\n      pendingPromise = this.fetchQueue[originalUri]\n    } else {\n      pendingPromise = Promise\n        .race([\n          this.setRequestTimeout(uri, options),\n          this.fetchUri(uri, options)\n        ])\n      this.fetchQueue[originalUri] = pendingPromise\n\n      // Clean up the queued promise after a time, if it's resolved\n      this.cleanupFetchRequest(originalUri, undefined, this.timeout)\n    }\n\n    return pendingPromise.then(x => {\n      if (uri in this.timeouts) {\n        this.timeouts[uri].forEach(clearTimeout)\n        delete this.timeouts[uri]\n      }\n      return x\n    })\n  }\n\n  /**\n   * @param _options - DEPRECATED\n   */\n  cleanupFetchRequest (\n    originalUri: string,\n    _options,\n    timeout: number\n  ) {\n    if (_options !== undefined) {\n      console.warn(\"_options is deprecated\")\n    }\n    this.timeouts[originalUri] = (this.timeouts[originalUri] || []).concat(setTimeout(() => {\n      if (!this.isPending(originalUri)) {\n        delete this.fetchQueue[originalUri]\n      }\n    }, timeout) as unknown as number)\n  }\n\n  initFetchOptions (\n    uri: string,\n    options: Options\n  ): AutoInitOptions {\n    let kb = this.store\n\n    let isGet = !options.method || options.method.toUpperCase() === 'GET'\n    if (!isGet) {\n      options.force = true\n    }\n\n    options.resource = kb.rdfFactory.namedNode(uri) // This might be proxified\n    options.baseURI = options.baseURI || uri // Preserve though proxying etc\n    options.original = kb.rdfFactory.namedNode(options.baseURI)\n    options.req = kb.bnode()\n    options.headers = options.headers || {}\n\n    if (options.contentType) {\n      // @ts-ignore\n      options.headers['content-type'] = options.contentType\n    }\n\n    if (options.force) {\n      options.cache = 'no-cache'\n    }\n\n    let acceptString = this.acceptString()\n    // @ts-ignore\n    options.headers['accept'] = acceptString\n\n    let requestedURI = Fetcher.offlineOverride(uri)\n    options.requestedURI = requestedURI\n\n    Fetcher.setCredentials(requestedURI, options)\n\n    let actualProxyURI = Fetcher.proxyIfNecessary(requestedURI)\n    if (requestedURI !== actualProxyURI) {\n      options.proxyUsed = true\n    }\n    options.actualProxyURI = actualProxyURI\n\n    return options as AutoInitOptions\n  }\n\n  /**\n   * (The promise chain ends in either a `failFetch()` or a `doneFetch()`)\n   *\n   * @param docuri {string}\n   * @param options {Object}\n   *\n   * @returns {Promise<Object>} fetch() result or an { error, status } object\n   */\n  fetchUri (docuri: string, options: AutoInitOptions): Promise<ExtendedResponse | FetchError> {\n    if (!docuri) {\n      return Promise.reject(new Error('Cannot fetch an empty uri'))\n    }\n\n    if (Fetcher.unsupportedProtocol(docuri)) {\n      return this.failFetch(options, 'fetcher: Unsupported protocol', 'unsupported_protocol')\n    }\n\n    let state = this.getState(docuri)\n\n    if (!options.force) {\n      if (state === 'fetched') {  // URI already fetched and added to store\n        return Promise.resolve(\n          // @ts-ignore This is not a valid response object\n          this.doneFetch(options, {\n            status: 200,\n            ok: true,\n            statusText: 'Already loaded into quadstore.'\n          })\n        )\n      }\n      if (state === 'failed' && this.requested[docuri] === 404) { // Remember nonexistence\n        let message = 'Previously failed: ' + this.requested[docuri]\n        // @ts-ignore This is not a valid response object\n        let dummyResponse: ExtendedResponse = {\n          url: docuri,\n          // This does not comply to Fetch spec, it can be a string value in rdflib\n          status: this.requested[docuri] as number,\n          statusText: message,\n          responseText: message,\n          headers: new Headers,  // Headers() ???\n          ok: false,\n          body: null,\n          bodyUsed: false,\n          size: 0,\n          timeout: 0\n        }\n        return this.failFetch(options, message,\n          this.requested[docuri], dummyResponse)\n      }\n    } else {\n      // options.force == true\n      delete this.nonexistent[docuri]\n    }\n\n    this.fireCallbacks('request', [docuri])\n\n    this.requested[docuri] = true  // mark this uri as 'requested'\n\n    if (!options.noMeta) {\n      this.saveRequestMetadata(docuri, options)\n    }\n\n    let { actualProxyURI } = options\n\n    // Map might get mistakenly added into headers\n    // error TS2339: Property 'map' does not exist on type 'Headers'.\n    /* let map\n    if (options.headers && map in options.headers) {\n      delete options.headers.map\n    } */\n\n    return this._fetch((actualProxyURI as string), options)\n      .then(response => this.handleResponse(response, docuri, options),\n      error => { // @@ handleError?\n        // @ts-ignore Invalid response object\n        let dummyResponse: ExtendedResponse = {\n          url: actualProxyURI as string,\n          status: 999, // @@ what number/string should fetch failures report?\n          statusText: (error.name || 'network failure') + ': ' +\n            (error.errno || error.code || error.type),\n          responseText: error.message,\n          headers: new Headers(),  // Headers() ???\n          ok: false,\n          body: null,\n          bodyUsed: false,\n          size: 0,\n          timeout: 0\n        }\n        // console.log('Fetcher: <' + actualProxyURI + '> Non-HTTP fetch exception: ' + error)\n        return this.handleError(dummyResponse, docuri, options) // possible credentials retry\n        // return this.failFetch(options, 'fetch failed: ' + error, 999, dummyResponse) // Fake status code: fetch exception\n\n        // handleError expects a response so we fake some important bits.\n        /*\n        this.handleError(, docuri, options)\n        */\n      }\n    )\n  }\n\n  /**\n   * Asks for a doc to be loaded if necessary then calls back\n   *\n   * Calling methods:\n   *   nowOrWhenFetched (uri, userCallback)\n   *   nowOrWhenFetched (uri, options, userCallback)\n   *   nowOrWhenFetched (uri, referringTerm, userCallback, options)  <-- old\n   *   nowOrWhenFetched (uri, referringTerm, userCallback) <-- old\n   *\n   *  Options include:\n   *   referringTerm    The document in which this link was found.\n   *                    this is valuable when finding the source of bad URIs\n   *   force            boolean.  Never mind whether you have tried before,\n   *                    load this from scratch.\n   *   forceContentType Override the incoming header to force the data to be\n   *                    treated as this content-type.\n   *\n   *  Callback function takes:\n   *\n   *    ok               True if the fetch worked, and got a 200 response.\n   *                     False if any error happened\n   *\n   *    errmessage       Text error message if not OK.\n   *\n   *    response         The fetch Response object (was: XHR) if there was was one\n   *                     includes response.status as the HTTP status if any.\n   */\n  nowOrWhenFetched (\n    uriIn: string | NamedNode,\n    p2?: UserCallback | Options,\n    userCallback?: UserCallback,\n    options: Options = {}\n  ): void {\n    const uri = termValue(uriIn)\n\n    if (typeof p2 === 'function') {\n      // nowOrWhenFetched (uri, userCallback)\n      userCallback = p2\n    } else if (typeof p2 === 'undefined') { // original calling signature\n      // referringTerm = undefined\n    } else if (isNamedNode(p2)) {\n      // referringTerm = p2\n      options.referringTerm = p2\n    } else {\n      // nowOrWhenFetched (uri, options, userCallback)\n      options = p2\n    }\n\n    (this.load(uri, options) as Promise<Response>)\n      .then((fetchResponse: ExtendedResponse) => {\n        if (userCallback) {\n          if (fetchResponse) {\n            if ((fetchResponse as Response).ok) {\n              userCallback(true, 'OK', fetchResponse)\n            } else {\n              let oops = 'HTTP error: Status ' + fetchResponse.status + ' (' + fetchResponse.statusText + ')'\n              if (fetchResponse.responseText) {\n                oops += ' ' + fetchResponse.responseText // not in 404, dns error, nock failure\n              }\n              userCallback(false, oops, fetchResponse)\n            }\n          } else {\n            let oops = ('@@ nowOrWhenFetched:  no response object!')\n            userCallback(false, oops)\n          }\n        }\n      }, function (err: FetchError) {\n        var message = err.message || err.statusText\n        message = 'Failed to load  <' + uri + '> ' + message\n        if (err.response && err.response.status) {\n          message += ' status: ' + err.response.status\n        }\n        (userCallback as any)(false, message, err.response)\n      })\n  }\n\n  /**\n   * Records a status message (as a literal node) by appending it to the\n   * request's metadata status collection.\n   *\n   */\n  addStatus (req: BlankNode, statusMessage: string) {\n    // <Debug about=\"parsePerformance\">\n    let now = new Date()\n    statusMessage = '[' + now.getHours() + ':' + now.getMinutes() + ':' +\n      now.getSeconds() + '.' + now.getMilliseconds() + '] ' + statusMessage\n    // </Debug>\n    let kb = this.store\n\n    const statusNode = kb.the(req, this.ns.link('status'))\n    if (isCollection(statusNode)) {\n      statusNode.append(kb.rdfFactory.literal(statusMessage))\n    } else {\n      log.warn('web.js: No list to add to: ' + statusNode + ',' + statusMessage)\n    }\n  }\n\n  /**\n   * Records errors in the system on failure:\n   *\n   *  - Adds an entry to the request status collection\n   *  - Adds an error triple with the fail message to the metadata\n   *  - Fires the 'fail' callback\n   *  - Rejects with an error result object, which has a response object if any\n   */\n  failFetch (\n    options: {\n      req: BlankNode\n      original: Quad_Subject\n    } & Options,\n    errorMessage: string,\n    statusCode: StatusValues,\n    response?: ExtendedResponse\n  ): Promise<FetchError> {\n    this.addStatus(options.req, errorMessage)\n\n    if (!options.noMeta) {\n      this.store.add(\n        options.original,\n        this.ns.link('error'),\n        this.store.rdfFactory.literal(errorMessage)\n      )\n    }\n\n    let meth = (options.method || 'GET').toUpperCase()\n    let isGet = meth === 'GET' || meth === 'HEAD'\n\n    if (isGet) {  // only cache the status code on GET or HEAD\n      if (!(options as any).resource.equals(options.original)) {\n        // console.log('@@ Recording failure  ' + meth + '  original ' + options.original +option '( as ' + options.resource + ') : ' + statusCode)\n      } else {\n        // console.log('@@ Recording ' + meth + ' failure for ' + options.original + ': ' + statusCode)\n      }\n      this.requested[Uri.docpart(options.original.value)] = statusCode\n      this.fireCallbacks('fail', [options.original.value, errorMessage])\n    }\n\n    var err: FetchError = new Error('Fetcher: ' + errorMessage)\n\n    // err.ok = false // Is taken as a response, will work too @@ phase out?\n    err.status = statusCode\n    err.statusText = errorMessage\n    err.response = response\n\n    return Promise.reject(err)\n  }\n\n  // in the why part of the quad distinguish between HTML and HTTP header\n  // Reverse is set iif the link was rev= as opposed to rel=\n  linkData (\n    originalUri: NamedNode,\n    rel: string,\n    uri: string,\n    why: Quad_Graph,\n    reverse?: boolean\n  ) {\n    if (!uri) return\n    let kb = this.store\n    let predicate\n    // See http://www.w3.org/TR/powder-dr/#httplink for describedby 2008-12-10\n    let obj = kb.rdfFactory.namedNode(Uri.join(uri, originalUri.value))\n\n    if (rel === 'alternate' || rel === 'seeAlso' || rel === 'meta' ||\n        rel === 'describedby') {\n      if (obj.value === originalUri.value) { return }\n      predicate = this.ns.rdfs('seeAlso')\n    } else if (rel === 'type') {\n      predicate = kb.rdfFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type')\n    } else {\n      // See https://www.iana.org/assignments/link-relations/link-relations.xml\n      // Alas not yet in RDF yet for each predicate\n      // encode space in e.g. rel=\"shortcut icon\"\n      predicate = kb.rdfFactory.namedNode(\n        Uri.join(encodeURIComponent(rel),\n          'http://www.iana.org/assignments/link-relations/')\n      )\n    }\n    if (reverse) {\n      kb.add(obj, predicate, originalUri, why)\n    } else {\n      kb.add(originalUri, predicate, obj, why)\n    }\n  }\n\n  parseLinkHeader (\n    linkHeader: string,\n    originalUri: NamedNode,\n    reqNode: Quad_Graph\n  ): void {\n    if (!linkHeader) { return }\n\n    // const linkexp = /<[^>]*>\\s*(\\s*;\\s*[^()<>@,;:\"/[\\]?={} \\t]+=(([^()<>@,;:\"/[]?={} \\t]+)|(\"[^\"]*\")))*(,|$)/g\n    // const paramexp = /[^()<>@,;:\"/[]?={} \\t]+=(([^()<>@,;:\"/[]?={} \\t]+)|(\"[^\"]*\"))/g\n\n    // From https://www.dcode.fr/regular-expression-simplificator:\n    // const linkexp = /<[^>]*>\\s*(\\s*;\\s*[^()<>@,;:\"/[\\]?={} t]+=[\"]))*[,$]/g\n    // const paramexp = /[^\\\\<>@,;:\"\\/\\[\\]?={} \\t]+=[\"])/g\n    // Original:\n    const linkexp = /<[^>]*>\\s*(\\s*;\\s*[^()<>@,;:\"/[\\]?={} \\t]+=(([^\\(\\)<>@,;:\"\\/\\[\\]\\?={} \\t]+)|(\"[^\"]*\")))*(,|$)/g\n    const paramexp = /[^\\(\\)<>@,;:\"\\/\\[\\]\\?={} \\t]+=(([^\\(\\)<>@,;:\"\\/\\[\\]\\?={} \\t]+)|(\"[^\"]*\"))/g\n\n    const matches = linkHeader.match(linkexp)\n\n    if (matches == null) return;\n\n    for (let i = 0; i < matches.length; i++) {\n      let split = matches[i].split('>')\n      let href = split[0].substring(1)\n      let ps = split[1]\n      let s = ps.match(paramexp)\n      if (s == null) return\n      for (let j = 0; j < s.length; j++) {\n        let p = s[j]\n        let paramsplit = p.split('=')\n        // var name = paramsplit[0]\n        let rel = paramsplit[1].replace(/[\"']/g, '') // '\"\n        this.linkData(originalUri, rel, href, reqNode)\n      }\n    }\n  }\n\n  doneFetch (\n    options: {\n      req: Quad_Subject,\n      original: Quad_Subject\n    } & Options,\n    response: ExtendedResponse\n  ): Response {\n    this.addStatus(options.req, 'Done.')\n    this.requested[options.original.value] = 'done'\n\n    this.fireCallbacks('done', [options.original.value])\n\n    response.req = options.req  // Set the request meta blank node\n\n    return response\n  }\n\n  /**\n   * Note two nodes are now smushed\n   * If only one was flagged as looked up, then the new node is looked up again,\n   * which will make sure all the URIs are dereferenced\n   */\n  nowKnownAs (was: Quad_Subject, now: Quad_Subject): void {\n    if (this.lookedUp[was.value]) {\n      // Transfer userCallback\n      if (!this.lookedUp[now.value]) {\n        this.lookUpThing(now, was)\n      }\n    } else if (this.lookedUp[now.value]) {\n      if (!this.lookedUp[was.value]) {\n        this.lookUpThing(was, now)\n      }\n    }\n  }\n\n  /**\n   * Writes back to the web what we have in the store for this uri\n   */\n  putBack (\n    uri: NamedNode | string,\n    options: Options = {}\n  ): Promise<Response> {\n    const uriSting = termValue(uri)\n    let doc = new RDFlibNamedNode(uriSting).doc() // strip off #\n    options.contentType = options[\"content-type\"] || options[\"Content-Type\"] || options.contentType || TurtleContentType\n    if (options.contentType === 'application/ld+json') {\n      return new Promise((resolve, reject) => {\n        serialize(doc, this.store, doc.uri, options.contentType, (err, jsonString) => {\n          if (err) {\n            reject(err)\n          } else {\n            // @ts-ignore\n            options.data = jsonString\n            this.webOperation('PUT', uri, options)\n              .then((res) => resolve(res))\n              .catch((error) => reject(error))\n          }\n        })\n      })\n    }\n    options.data = serialize(doc, this.store, doc.value, options.contentType) as string\n    return this.webOperation('PUT', uriSting, options)\n  }\n\n  webCopy (here: string, there: string, contentType): Promise<ExtendedResponse> {\n    return this.webOperation('GET', here)\n      .then((result) => {\n        return this.webOperation(\n          'PUT', // change to binary from text\n          there, { data: result.responseText, contentType })\n      })\n  }\n\n  delete (uri: string, options?: Options): Promise<ExtendedResponse> {\n    return this.webOperation('DELETE', uri, options)\n      .then(response => {\n        this.requested[uri] = 404\n        this.nonexistent[uri] = true\n        this.unload(this.store.rdfFactory.namedNode(uri))\n\n        return response\n      })\n  }\n\n  /** Create an empty resource if it really does not exist\n   *  Be absolutely sure something does not exist before creating a new empty file\n   * as otherwise existing could  be deleted.\n   * @param doc - The resource\n  */\n  async createIfNotExists (\n    doc: RDFlibNamedNode,\n    contentType = TurtleContentType,\n    data = ''\n  ): Promise<ExtendedResponse> {\n    const fetcher = this\n    try {\n      var response = await fetcher.load(doc as NamedNode)\n    } catch (err) {\n      // @ts-ignore\n      if (err.response.status === 404) {\n        // console.log('createIfNotExists: doc does NOT exist, will create... ' + doc)\n        try {\n          response = await fetcher.webOperation('PUT', doc.value, {data, contentType})\n        } catch (err) {\n          // console.log('createIfNotExists doc FAILED: ' + doc + ': ' + err)\n          throw err\n        }\n        delete fetcher.requested[doc.value] // delete cached 404 error\n        // console.log('createIfNotExists doc created ok ' + doc)\n        return response\n      } else {\n        // console.log('createIfNotExists doc load error NOT 404:  ' + doc + ': ' + err)\n        throw err\n      }\n    }\n    // console.log('createIfNotExists: doc exists, all good: ' + doc)\n    return response as Response\n  }\n\n  /**\n   * @param parentURI URI of parent container\n   * @param folderName - Optional folder name (slug)\n   * @param data - Optional folder metadata\n   */\n  createContainer (\n    parentURI: string,\n    folderName: string,\n    data: string\n  ): Promise<Response> {\n    let headers = {\n      // Force the right mime type for containers\n      'content-type': TurtleContentType,\n      'link': this.ns.ldp('BasicContainer') + '; rel=\"type\"'\n    }\n\n    if (folderName) {\n      headers['slug'] = folderName\n    }\n\n    // @ts-ignore These headers lack some of the required operators.\n    let options: Options = { headers }\n\n    if (data) {\n      options.body = data\n    }\n\n    return this.webOperation('POST', parentURI, options)\n  }\n\n  invalidateCache (iri: string | NamedNode): void {\n    const uri = termValue(iri)\n    const fetcher = this\n    // @ts-ignore\n    if (fetcher.fetchQueue && fetcher.fetchQueue[uri]) {\n      // console.log('Internal error - fetchQueue exists ' + uri)\n      var promise = fetcher.fetchQueue[uri]\n      if (promise['PromiseStatus'] === 'resolved') {\n        delete fetcher.fetchQueue[uri]\n      } else { // pending\n        delete fetcher.fetchQueue[uri]\n        // console.log('*** Fetcher: pending fetchQueue deleted ' + uri)\n      }\n    } if (fetcher.requested[uri] && fetcher.requested[uri] !== 'done' &&\n     fetcher.requested[uri] !== 'failed' && fetcher.requested[uri] !== 404) {\n       let msg = `Rdflib: fetcher: Destructive operation on <${fetcher.requested[uri]}> file being fetched! ` + uri\n      console.error(msg)\n      // alert(msg)\n    } else {\n      delete fetcher.requested[uri] // invalidate read cache -- @@ messes up logic if request in progress ??\n      delete fetcher.nonexistent[uri]\n    }\n  }\n\n  /**\n   * A generic web operation, at the fetch() level.\n   * does not involve the quad store.\n   *\n   *  Returns promise of Response\n   *  If data is returned, copies it to response.responseText before returning\n   */\n  webOperation (\n    method: HTTPMethods,\n    uriIn: string | NamedNode,\n    // Not sure about this type. Maybe this Options is different?\n    options: Options = {}\n  ): Promise<ExtendedResponse> {\n    const uri = termValue(uriIn)\n    options.method = method\n    options.body = options.data || options.body\n    options.force = true\n    const fetcher = this\n\n    if (options.body && !options.contentType) {\n      throw new Error('Web operation sending data must have a defined contentType.')\n    }\n    if (options.contentType) {\n      (options as any).headers = options.headers || {};\n      (options as any).headers['content-type'] = options.contentType\n    }\n    Fetcher.setCredentials(uri, options)\n\n    return new Promise(function (resolve, reject) {\n      fetcher._fetch(uri, options).then(response => {\n        if (response.ok) {\n          if (method === 'PUT' || method === 'PATCH' || method === 'POST' || method === 'DELETE') {\n            fetcher.invalidateCache (uri)\n          } // response.body with Chrome can't be relied on\n          if (response.text) { // Was: response.body https://github.com/linkeddata/rdflib.js/issues/506\n            response.text().then(data => {\n              response.responseText = data\n              resolve(response)\n            })\n          } else {\n            resolve(response)\n          }\n        } else {\n          let msg = 'Web error: ' + response.status\n          if (response.statusText) msg += ' (' + response.statusText + ')'\n          msg += ' on ' + method + ' of <' + uri + '>'\n          if (response.responseText) msg += ': ' + response.responseText\n          let e2: FetchError = new Error(msg)\n          e2.response = response\n          reject(e2)\n        }\n      }, (err: Error) => {\n        let msg = 'Fetch error for ' + method + ' of <' + uri + '>:' + err\n        reject(new Error(msg))\n      })\n    })\n  }\n\n  /**\n   * Looks up something.\n   * Looks up all the URIs a things has.\n   *\n   * @param term - canonical term for the thing whose URI is\n   *   to be dereferenced\n   * @param rterm - the resource which referred to this\n   *   (for tracking bad links)\n   */\n  lookUpThing (\n    term: Quad_Subject,\n    rterm: Quad_Subject\n  ): Promise<Response> | Promise<Response>[] {\n    let uris = this.store.uris(term)  // Get all URIs\n    uris = uris.map(u => Uri.docpart(u))  // Drop hash fragments\n\n    uris.forEach(u => {\n      this.lookedUp[u] = true\n    })\n\n    // @ts-ignore Recursive type\n    return this.load(uris, { referringTerm: rterm })\n  }\n\n  /**\n   * Looks up response header.\n   *\n   * @returns {Array|undefined} a list of header values found in a stored HTTP\n   *   response, or [] if response was found but no header found,\n   *   or undefined if no response is available.\n   * Looks for { [] link:requestedURI ?uri; link:response [ httph:header-name  ?value ] }\n   */\n  getHeader (\n    doc: NamedNode,\n    header: string\n  ): undefined | string[] {\n    const kb = this.store // look for the URI (AS A STRING NOT A NODE) for a stored request\n    const docuri: string = doc.value\n    const requests = kb.each(undefined, this.ns.link('requestedURI'), kb.rdfFactory.literal(docuri)) as Quad_Subject[]\n\n    for (let r = 0; r < requests.length; r++) {\n      let request = requests[r]\n      if (request !== undefined) {\n        let response = kb.any(request, this.ns.link('response')) as Quad_Subject\n        if (response !== undefined && kb.anyValue(response, this.ns.http('status')) && (kb.anyValue(response, this.ns.http('status')) as string).startsWith('2')) {\n          // Only look at success returns - not 401 error messagess etc\n          let results = kb.each(response, this.ns.httph(header.toLowerCase()))\n\n          if (results.length) {\n            return results.map(v => { return v.value })\n          }\n\n          return []\n        }\n      }\n    }\n    return undefined\n  }\n\n  saveRequestMetadata (\n    docuri: string,\n    options: AutoInitOptions\n  ) {\n    let req = options.req\n    let kb = this.store\n    let rterm = options.referringTerm\n\n    this.addStatus(options.req, 'Accept: ' + options.headers['accept'])\n\n    if (isNamedNode(rterm)) {\n      kb.add(kb.rdfFactory.namedNode(docuri), this.ns.link('requestedBy'), rterm, this.appNode)\n    }\n\n    if (options.original && options.original.value !== docuri) {\n      kb.add(req, this.ns.link('orginalURI'), kb.rdfFactory.literal(options.original.value),\n        this.appNode)\n    }\n\n    const now = new Date()\n    const timeNow = '[' + now.getHours() + ':' + now.getMinutes() + ':' +\n      now.getSeconds() + '] '\n\n    kb.add(req, this.ns.rdfs('label'),\n      kb.rdfFactory.literal(timeNow + ' Request for ' + docuri), this.appNode)\n    // We store the docuri as a string, not as a node,\n    // see https://github.com/linkeddata/rdflib.js/pull/427#pullrequestreview-447910061\n    kb.add(req, this.ns.link('requestedURI'), kb.rdfFactory.literal(docuri), this.appNode)\n    kb.add(req, this.ns.link('status'), kb.collection(), this.appNode)\n  }\n\n  saveResponseMetadata (\n    response: Response,\n    options: {\n      req: BlankNode,\n      resource: Quad_Subject\n    } & Options\n  ): BlankNode {\n    const kb = this.store\n\n    let responseNode = kb.bnode()\n\n    kb.add(options.req, this.ns.link('response'), responseNode, this.appNode)\n    kb.add(responseNode, this.ns.http('status'),\n    kb.rdfFactory.literal(response.status as any), this.appNode)\n    kb.add(responseNode, this.ns.http('statusText'),\n    kb.rdfFactory.literal(response.statusText), this.appNode)\n\n    // Save the response headers\n    response.headers.forEach((value, header) => {\n      kb.add(responseNode, this.ns.httph(header), this.store.rdfFactory.literal(value), this.appNode)\n\n      if (header === 'content-type') {\n        kb.add(\n          options.resource,\n          this.ns.rdf('type'),\n          kb.rdfFactory.namedNode(Util.mediaTypeClass(value).value),\n          this.appNode // responseNode\n        )\n      }\n    })\n\n    return responseNode\n  }\n\n  objectRefresh (term: NamedNode): void {\n    let uris = this.store.uris(term) // Get all URIs\n    if (typeof uris !== 'undefined') {\n      for (let i = 0; i < uris.length; i++) {\n        this.refresh(this.store.rdfFactory.namedNode(Uri.docpart(uris[i])))\n        // what about rterm?\n      }\n    }\n  }\n\n  /* refresh  Reload data from a given document\n  **\n  ** @param term - An RDF Named Node for the eodcument in question\n  ** @param userCallback - A function userCallback(ok, message, response)\n  */\n  refresh (\n    term: NamedNode,\n    userCallback?: UserCallback\n  ): void { // sources_refresh\n    this.fireCallbacks('refresh', arguments)\n\n    this.nowOrWhenFetched(term, { force: true, clearPreviousData: true },\n      userCallback)\n  }\n\n /* refreshIfExpired   Conditional refresh if Expired\n **\n ** @param term - An RDF Named Node for the eodcument in question\n ** @param userCallback - A function userCallback(ok, message, response)\n */\n  refreshIfExpired (\n    term: NamedNode,\n    userCallback: UserCallback\n  ): void {\n    let exp = this.getHeader(term, 'Expires')\n    if (!exp || (new Date(exp[0]).getTime()) <= (new Date().getTime())) {\n      this.refresh(term, userCallback)\n    } else {\n      userCallback(true, 'Not expired', {})\n    }\n  }\n\n  retract (term: Quad_Graph) { // sources_retract\n    this.store.removeMany(undefined, undefined, undefined, term)\n    if (term.value) {\n      delete this.requested[Uri.docpart(term.value)]\n    }\n    this.fireCallbacks('retract', arguments)\n  }\n\n  getState (docuri: string) {\n    if (typeof this.requested[docuri] === 'undefined') {\n      return 'unrequested'\n    } else if (this.requested[docuri] === true) {\n      return 'requested'\n    } else if (this.requested[docuri] === 'done') {\n      return 'fetched'\n    } else if (this.requested[docuri] === 'redirected') {\n      return this.getState(this.redirectedTo[docuri])\n    } else { // An non-200 HTTP error status\n      return 'failed'\n    }\n  }\n\n  isPending (docuri: string) { // sources_pending\n    // doing anyStatementMatching is wasting time\n    // if it's not pending: false -> flailed\n    //   'done' -> done 'redirected' -> redirected\n    return this.requested[docuri] === true\n  }\n\n  unload (term: NamedNode) {\n    this.store.removeDocument(term)\n    delete this.requested[term.value] // So it can be load2ed again\n  }\n\n  addHandler (handler: typeof Handler) {\n    this.handlers.push(handler);\n    (handler as any).register(this)\n  }\n\n  retryNoCredentials (\n    docuri: string,\n    options\n  ): Promise<Result> {\n    // console.log('Fetcher: CORS: RETRYING with NO CREDENTIALS for ' + options.resource)\n\n    options.retriedWithNoCredentials = true // protect against being called twice\n\n    delete this.requested[docuri] // forget the original request happened\n    delete this.fetchQueue[docuri]\n    // Note: XHR property was withCredentials, but fetch property is just credentials\n    let newOptions = Object.assign({}, options, { credentials: 'omit' })\n\n    this.addStatus(options.req,\n      'Abort: Will retry with credentials SUPPRESSED to see if that helps')\n\n    return this.load(docuri, newOptions) as Promise<Result>\n  }\n\n  /**\n   * Tests whether a request is being made to a cross-site URI (for purposes\n   * of retrying with a proxy)\n   */\n  isCrossSite (uri: string): boolean {\n    // Mashup situation, not node etc\n    if (typeof document === 'undefined' || !document.location) {\n      return false\n    }\n\n    const hostpart = Uri.hostpart\n    const here = '' + document.location\n    return (hostpart(here) && hostpart(uri) && hostpart(here)) !== hostpart(uri)\n  }\n\n  /**\n   * Called when there's a network error in fetch(), or a response\n   * with status of 0.\n   */\n  handleError (\n    response: ExtendedResponse | Error,\n    docuri: string,\n    options: AutoInitOptions\n  ): Promise<ExtendedResponse | FetchError> {\n    if (this.isCrossSite(docuri)) {\n      // Make sure we haven't retried already\n      if (options.credentials && options.credentials === 'include' && !options.retriedWithNoCredentials) {\n        return this.retryNoCredentials(docuri, options)\n      }\n\n      // Now attempt retry via proxy\n      let proxyUri = Fetcher.crossSiteProxy(docuri)\n\n      if (proxyUri && !options.proxyUsed) {\n        // console.log('web: Direct failed so trying proxy ' + proxyUri)\n        return this.redirectToProxy(proxyUri, options)\n      }\n    }\n\n    var message\n    if (response instanceof Error) {\n      message = 'Fetch error: ' + response.message\n    } else {\n      message = response.statusText\n      if (response.responseText) {\n        message += ` ${response.responseText}`\n      }\n    }\n\n    // This is either not a CORS error, or retries have been made\n    return this.failFetch(options, message, (response as Response).status || 998, (response as Response))\n  }\n\n  // deduce some things from the HTTP transaction\n  addType (\n    rdfType: NamedNode,\n    req: Quad_Subject,\n    kb: IndexedFormula,\n    locURI: string\n  ): void { // add type to all redirected resources too\n    let prev = req\n    if (locURI) {\n      var reqURI = kb.any(prev, this.ns.link('requestedURI'))\n      if (reqURI && reqURI.value !== locURI) {\n        kb.add(kb.rdfFactory.namedNode(locURI), this.ns.rdf('type'), rdfType, this.appNode)\n      }\n    }\n    for (;;) {\n      const doc = kb.any(prev, this.ns.link('requestedURI'))\n      if (doc && doc.value) {\n        kb.add(kb.rdfFactory.namedNode(doc.value), this.ns.rdf('type'), rdfType, this.appNode)\n      } // convert Literal\n      prev = kb.any(undefined, kb.rdfFactory.namedNode('http://www.w3.org/2007/ont/link#redirectedRequest'), prev) as Quad_Subject\n      if (!prev) { break }\n      var response = kb.any(prev, kb.rdfFactory.namedNode('http://www.w3.org/2007/ont/link#response'))\n      if (!response) { break }\n      var redirection = kb.any((response as NamedNode), kb.rdfFactory.namedNode('http://www.w3.org/2007/ont/http#status'))\n      if (!redirection) { break }\n      // @ts-ignore always true?\n      if ((redirection !== '301') && (redirection !== '302')) { break }\n    }\n  }\n\n  /**\n   * Handle fetch() response\n   */\n  handleResponse (\n    response: ExtendedResponse,\n    docuri: string,\n    options: AutoInitOptions\n  ): Promise<FetchError | ExtendedResponse> | ExtendedResponse {\n\n    const kb = this.store\n    const headers = (response as Response).headers\n\n    const reqNode = options.req\n\n    const responseNode = this.saveResponseMetadata(response, options)\n\n    const contentType = this.normalizedContentType(options, headers) || ''\n    let contentLocation = headers.get('content-location')\n\n    // this.fireCallbacks('recv', xhr.args)\n    // this.fireCallbacks('headers', [{uri: docuri, headers: xhr.headers}])\n\n    // Check for masked errors (CORS, etc)\n    if (response.status === 0) {\n      // console.log('Masked error - status 0 for ' + docuri)\n      return this.handleError(response, docuri, options)\n    }\n\n    if (response.status >= 400) {\n      if (response.status === 404) {\n        this.nonexistent[options.original.value] = true\n        this.nonexistent[docuri] = true\n      }\n\n      return this.saveErrorResponse(response, responseNode)\n        .then(() => {\n          let errorMessage = options.resource + ' ' + response.statusText\n\n          return this.failFetch(options, errorMessage, response.status, response)\n        })\n    }\n\n    var diffLocation: null | string = null\n    var absContentLocation: null | string = null\n    if (contentLocation) {\n      absContentLocation = Uri.join(contentLocation, docuri)\n      if (absContentLocation !== docuri) {\n        diffLocation = absContentLocation\n      }\n    }\n    if (response.status === 200) {\n      this.addType(this.ns.link('Document') as NamedNode, reqNode, kb, docuri)\n      if (diffLocation) {\n        this.addType(this.ns.link('Document') as NamedNode, reqNode, kb,\n          diffLocation)\n      }\n\n      // Before we parse new data clear old but only on 200\n      if (options.clearPreviousData) {\n        // kb.removeDocument(options.resource)\n        // only remove content, keep metatdata\n        const sts = kb.statementsMatching(undefined, undefined, undefined, options.resource).slice() // Take a copy as this is the actual index\n        for (let i = 0; i < sts.length; i++) {\n          kb.removeStatement(sts[i])\n        }\n      }\n\n      let isImage = contentType.includes('image/') ||\n        contentType.includes('application/pdf')\n\n      if (contentType && isImage) {\n        this.addType(kb.rdfFactory.namedNode('http://purl.org/dc/terms/Image'), reqNode, kb,\n          docuri)\n        if (diffLocation) {\n          this.addType(kb.rdfFactory.namedNode('http://purl.org/dc/terms/Image'), reqNode, kb,\n            diffLocation)\n        }\n      }\n    }\n\n    // If we have already got the thing at this location, abort\n    if (contentLocation) {\n      if (!options.force && diffLocation && this.requested[absContentLocation as string] === 'done') {\n        // we have already fetched this\n        // should we smush too?\n        // log.info(\"HTTP headers indicate we have already\" + \" retrieved \" +\n        // xhr.resource + \" as \" + absContentLocation + \". Aborting.\")\n        return this.doneFetch(options, response)\n      }\n\n      this.requested[absContentLocation as string] = true\n    }\n\n    this.parseLinkHeader(headers.get('link') as string, options.original, reqNode)\n\n    let handler = this.handlerForContentType(contentType, response) as Handler\n\n    if (!handler) {\n      //  Not a problem, we just don't extract data\n      this.addStatus(reqNode, 'Fetch over. No data handled.')\n      return this.doneFetch(options, response)\n    }\n\n    return response\n      .text()\n      // @ts-ignore Types seem right\n      .then(responseText => {\n        response.responseText = responseText\n        return (handler as N3Handler).parse(this, responseText, options, response)\n      })\n  }\n\n  saveErrorResponse (\n    response: ExtendedResponse,\n    responseNode: Quad_Subject\n  ): Promise<void> {\n    let kb = this.store\n\n    return response.text()\n      .then(content => {\n        if (content.length > 10) {\n          kb.add(responseNode, this.ns.http('content'), kb.rdfFactory.literal(content), responseNode)\n        }\n      })\n  }\n\n  handlerForContentType (contentType: string, response: ExtendedResponse): Handler | null {\n    if (!contentType) {\n      return null\n    }\n\n    let Handler = this.handlers.find(handler => {\n      return contentType.match(handler.pattern)\n    })\n\n    // @ts-ignore in practice all Handlers have constructors.\n    return Handler ? new Handler(response) : null\n  }\n\n  guessContentType (uri: string): ContentType | undefined {\n    return CONTENT_TYPE_BY_EXT[uri.split('.').pop() as string]\n  }\n\n  normalizedContentType (\n    options: AutoInitOptions,\n    headers: Headers\n  ): ContentType | string | null {\n    if (options.forceContentType) {\n      return options.forceContentType\n    }\n\n    let contentType = headers.get('content-type')\n    if (!contentType || contentType.includes('application/octet-stream')) {\n      let guess = this.guessContentType(options.resource.value)\n\n      if (guess) {\n        return guess\n      }\n    }\n\n    let protocol = Uri.protocol(options.resource.value) as string\n\n    if (!contentType && ['file', 'chrome'].includes(protocol)) {\n      return 'text/xml'\n    }\n\n    return contentType\n  }\n\n  /**\n   * Sends a new request to the specified uri. (Extracted from `onerrorFactory()`)\n   */\n  redirectToProxy (\n    newURI: string,\n    options: AutoInitOptions\n  ): Promise<ExtendedResponse | FetchError> {\n    this.addStatus(options.req, 'BLOCKED -> Cross-site Proxy to <' + newURI + '>')\n\n    options.proxyUsed = true\n\n    const kb = this.store\n    const oldReq = options.req  // request metadata blank node\n\n    if (!options.noMeta) {\n      kb.add(oldReq, this.ns.link('redirectedTo'), kb.rdfFactory.namedNode(newURI), oldReq)\n      this.addStatus(oldReq, 'redirected to new request') // why\n    }\n\n    this.requested[options.resource.value] = 'redirected'\n    this.redirectedTo[options.resource.value] = newURI\n\n    let newOptions = Object.assign({}, options)\n    newOptions.baseURI = options.resource.value\n\n    return this.fetchUri(newURI, newOptions)\n      .then(response => {\n        if (!newOptions.noMeta) {\n          kb.add(oldReq, this.ns.link('redirectedRequest'), newOptions.req, this.appNode)\n        }\n\n        return response\n      })\n  }\n\n  setRequestTimeout (\n    uri: string,\n    options: {\n      req: Quad_Subject\n      original: Quad_Subject\n    } & Options\n  ): Promise<number | FetchError> {\n    return new Promise((resolve) => {\n      this.timeouts[uri] = (this.timeouts[uri] || []).concat(setTimeout(() => {\n        if (this.isPending(uri) &&\n            !options.retriedWithNoCredentials &&\n            !options.proxyUsed) {\n          resolve(this.failFetch(options, `Request to ${uri} timed out`, 'timeout'))\n        }\n      }, this.timeout) as unknown as number)\n    })\n  }\n\n  addFetchCallback (\n    uri: string,\n    callback: UserCallback\n  ): void {\n    if (!this.fetchCallbacks[uri]) {\n      this.fetchCallbacks[uri] = [callback]\n    } else {\n      this.fetchCallbacks[uri].push(callback)\n    }\n  }\n\n  acceptString () {\n    let acceptstring = ''\n\n    for (let mediaType in this.mediatypes) {\n      if (acceptstring !== '') {\n        acceptstring += ', '\n      }\n\n      acceptstring += mediaType\n\n      for (let property in this.mediatypes[mediaType]) {\n        acceptstring += ';' + property + '=' + this.mediatypes[mediaType][property]\n      }\n    }\n\n    return acceptstring\n  }\n  // var updatesVia = new $rdf.UpdatesVia(this) // Subscribe to headers\n// @@@@@@@@ This is turned off because it causes a websocket to be set up for ANY fetch\n// whether we want to track it ot not. including ontologies loaed though the XSSproxy\n}\n\nFetcher.HANDLERS = defaultHandlers\nFetcher.CONTENT_TYPE_BY_EXT = CONTENT_TYPE_BY_EXT\n","export default (function () {\r\n  return {\r\n    parseJSON: function (data, source, store) {\r\n      var subject, predicate, object\r\n      var bnodes = {}\r\n      var why = store.sym(source)\r\n      for (var x in data) {\r\n        if (x.indexOf('_:') === 0) {\r\n          if (bnodes[x]) {\r\n            subject = bnodes[x]\r\n          } else {\r\n            subject = store.bnode(x)\r\n            bnodes[x] = subject\r\n          }\r\n        } else {\r\n          subject = store.sym(x)\r\n        }\r\n        var preds = data[x]\r\n        for (var y in preds) {\r\n          var objects = preds[y]\r\n          predicate = store.sym(y)\r\n          for (var z in objects) {\r\n            var obj = objects[z]\r\n            if (obj.type === 'uri') {\r\n              object = store.sym(obj.value)\r\n              store.add(subject, predicate, object, why)\r\n            } else if (obj.type === 'BlankNode') {\r\n              if (bnodes[obj.value]) {\r\n                object = bnodes[obj.value]\r\n              } else {\r\n                object = store.bnode(obj.value)\r\n                bnodes[obj.value] = object\r\n              }\r\n              store.add(subject, predicate, object, why)\r\n            } else if (obj.type === 'Literal') {\r\n              // var datatype\r\n              if (obj.datatype) {\r\n                object = store.literal(obj.value, undefined, store.sym(obj.datatype))\r\n              } else if (obj.lang) {\r\n                object = store.literal(obj.value, obj.lang)\r\n              } else {\r\n                object = store.literal(obj.value)\r\n              }\r\n              store.add(subject, predicate, object, why)\r\n            } else {\r\n              throw new Error('error: unexpected termtype: ' + z.type)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()\r\n","import log from './log'\n\nexport default function queryToSPARQL (query) {\n  var indent = 0\n  function getSelect (query) {\n    var str = addIndent() + 'SELECT '\n    for (var i = 0; i < query.vars.length; i++) {\n      str += query.vars[i] + ' '\n    }\n    str += '\\n'\n    return str\n  }\n\n  function getPattern (pat) {\n    var str = ''\n    var st = pat.statements\n    for (var x in st) {\n      log.debug('Found statement: ' + st)\n      str += addIndent() + st[x] + '\\n'\n    }\n    return str\n  }\n\n  function getConstraints (pat) {\n    var str = ''\n    for (var v in pat.constraints) {\n      var foo = pat.constraints[v]\n      str += addIndent() + 'FILTER ( ' + foo.describe(v) + ' ) ' + '\\n'\n    }\n    return str\n  }\n\n  function getOptionals (pat) {\n    var str = ''\n    for (var x = 0; x < pat.optional.length; x++) {\n      // alert(pat.optional.termType)\n      log.debug('Found optional query')\n      str += addIndent() + 'OPTIONAL { ' + '\\n'\n      indent++\n      str += getPattern(pat.optional[x])\n      str += getConstraints(pat.optional[x])\n      str += getOptionals(pat.optional[x])\n      indent--\n      str += addIndent() + '}' + '\\n'\n    }\n    return str\n  }\n\n  function getWhere (pat) {\n    var str = addIndent() + 'WHERE \\n' + '{ \\n'\n    indent++\n    str += getPattern(pat)\n    str += getConstraints(pat)\n    str += getOptionals(pat)\n    indent--\n    str += '}'\n    return str\n  }\n\n  function addIndent () {\n    var str = ''\n    for (var i = 0; i < indent; i++) {\n      str += '    '\n    }\n    return str\n  }\n\n  function getSPARQL (query) {\n    return getSelect(query) + getWhere(query.pat)\n  }\n\n  return getSPARQL(query)\n}\n","// Converting between SPARQL queries and the $rdf query API\n/*\n\nfunction SQuery () {\n  this.terms = []\n  return this\n}\n\nSTerm.prototype.toString = STerm.val\nSQuery.prototype.add = function (str) {this.terms.push()}*/\n\nimport log from './log'\nimport { Query } from './query'\n\n/**\n * @SPARQL: SPARQL text that is converted to a query object which is returned.\n * @testMode: testing flag. Prevents loading of sources.\n */\nexport default function SPARQLToQuery (SPARQL, testMode, kb) {\n  // AJAR_ClearTable()\n  var variableHash = []\n  function makeVar (name) {\n    if (variableHash[name]) {\n      return variableHash[name]\n    }\n    var newVar = kb.variable(name)\n    variableHash[name] = newVar\n    return newVar\n  }\n\n  // term type functions\n  function isRealText (term) {\n    return (typeof term === 'string' && term.match(/[^ \\n\\t]/))\n  }\n  function isVar (term) {\n    return (typeof term === 'string' && term.match(/^[\\?\\$]/))\n  }\n  function fixSymbolBrackets (term) {\n    if (typeof term === 'string') {\n      return term.replace(/^&lt;/, '<').replace(/&gt;$/, '>')\n    } else {\n      return term\n    }\n  }\n  function isSymbol (term) {\n    return (typeof term === 'string' && term.match(/^<[^>]*>$/))\n  }\n  function isBnode (term) {\n    return (typeof term === 'string' && (term.match(/^_:/) || term.match(/^$/)))\n  }\n  function isPrefix (term) {\n    return (typeof term === 'string' && term.match(/:$/))\n  }\n  function isPrefixedSymbol (term) {\n    return (typeof term === 'string' && term.match(/^:|^[^_][^:]*:/))\n  }\n  function getPrefix (term) {\n    var a = term.split(':')\n    return a[0]\n  }\n  function getSuffix (term) {\n    var a = term.split(':')\n    return a[1]\n  }\n  function removeBrackets (term) {\n    if (isSymbol(term)) {\n      return term.slice(1, term.length - 1)\n    } else {\n      return term\n    }\n  }\n  // takes a string and returns an array of strings and Literals in the place of literals\n  function parseLiterals (str) {\n    // var sin = (str.indexOf(/[ \\n]\\'/)==-1)?null:str.indexOf(/[ \\n]\\'/), doub = (str.indexOf(/[ \\n]\\\"/)==-1)?null:str.indexOf(/[ \\n]\\\"/)\n    var sin = (str.indexOf(\"'\") === -1)\n      ? null\n      : str.indexOf(\"'\")\n    var doub = (str.indexOf('\"') === -1)\n      ? null\n      : str.indexOf('\"')\n    // alert(\"S: \"+sin+\" D: \"+doub)\n    if (!sin && !doub) {\n      var a = new Array(1)\n      a[0] = str\n      return a\n    }\n    var res = new Array(2)\n    var br\n    var ind\n    if (!sin || (doub && doub < sin)) {\n      br = '\"'\n      ind = doub\n    } else if (!doub || (sin && sin < doub)) {\n      br = \"'\"\n      ind = sin\n    } else {\n      log.error('SQARQL QUERY OOPS!')\n      return res\n    }\n    res[0] = str.slice(0, ind)\n    var end = str.slice(ind + 1).indexOf(br)\n    if (end === -1) {\n      log.error('SPARQL parsing error: no matching parentheses in literal ' + str)\n      return str\n    }\n    // alert(str.slice(end + ind + 2).match(/^\\^\\^/))\n    var end2\n    if (str.slice(end + ind + 2).match(/^\\^\\^/)) {\n      end2 = str.slice(end + ind + 2).indexOf(' ')\n      // alert(end2)\n      res[1] = kb.literal(\n        str.slice(ind + 1, ind + 1 + end),\n        kb.sym(removeBrackets(\n          str.slice(ind + 4 + end, ind + 2 + end + end2))\n        )\n      )\n      // alert(res[1].datatype.uri)\n      res = res.concat(parseLiterals(str.slice(end + ind + 3 + end2)))\n    } else if (str.slice(end + ind + 2).match(/^@/)) {\n      end2 = str.slice(end + ind + 2).indexOf(' ')\n      // alert(end2)\n      res[1] = kb.literal(\n        str.slice(ind + 1, ind + 1 + end),\n        str.slice(ind + 3 + end, ind + 2 + end + end2), null\n      )\n      // alert(res[1].datatype.uri)\n      res = res.concat(\n        parseLiterals(str.slice(end + ind + 2 + end2))\n      )\n    } else {\n      res[1] = kb.literal(str.slice(ind + 1, ind + 1 + end))\n      log.info('Literal found: ' + res[1])\n      res = res.concat(parseLiterals(str.slice(end + ind + 2))) // finds any other literals\n    }\n    return res\n  }\n\n  function spaceDelimit (str) {\n    str = str.replace(/\\(/g, ' ( ')\n      .replace(/\\)/g, ' ) ')\n      .replace(/</g, ' <')\n      .replace(/>/g, '> ')\n      .replace(/{/g, ' { ')\n      .replace(/}/g, ' } ')\n      .replace(/[\\t\\n\\r]/g, ' ')\n      .replace(/; /g, ' ; ')\n      .replace(/\\. /g, ' . ')\n      .replace(/, /g, ' , ')\n    log.info('New str into spaceDelimit: \\n' + str)\n    var res = []\n    var br = str.split(' ')\n    for (var x in br) {\n      if (isRealText(br[x])) {\n        res = res.concat(br[x])\n      }\n    }\n    return res\n  }\n\n  function replaceKeywords (input) {\n    var strarr = input\n    for (var x = 0; x < strarr.length; x++) {\n      if (strarr[x] === 'a') {\n        strarr[x] = '<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>'\n      }\n      if (strarr[x] === 'is' && strarr[x + 2] === 'of') {\n        strarr.splice(x, 1)\n        strarr.splice(x + 1, 1)\n        var s = strarr[x - 1]\n        strarr[x - 1] = strarr[x + 1]\n        strarr[x + 1] = s\n      }\n    }\n    return strarr\n  }\n\n  function toTerms (input) {\n    var res = []\n    for (var x = 0; x < input.length; x++) {\n      if (typeof input[x] !== 'string') {\n        res[x] = input[x]\n        continue\n      }\n      input[x] = fixSymbolBrackets(input[x])\n      if (isVar(input[x])) {\n        res[x] = makeVar(input[x].slice(1))\n      } else if (isBnode(input[x])) {\n        log.info(input[x] + ' was identified as a bnode.')\n        res[x] = kb.bnode()\n      } else if (isSymbol(input[x])) {\n        log.info(input[x] + ' was identified as a symbol.')\n        res[x] = kb.sym(removeBrackets(input[x]))\n      } else if (isPrefixedSymbol(input[x])) {\n        log.info(input[x] + ' was identified as a prefixed symbol')\n        if (prefixes[getPrefix(input[x])]) {\n          res[x] = kb.sym(input[x] = prefixes[getPrefix(input[x])] +\n            getSuffix(input[x]))\n        } else {\n          log.error('SPARQL error: ' + input[x] + ' with prefix ' +\n            getPrefix(input[x]) + ' does not have a correct prefix entry.')\n          res[x] = input[x]\n        }\n      } else {\n        res[x] = input[x]\n      }\n    }\n    return res\n  }\n\n  function tokenize (str) {\n    var token1 = parseLiterals(str)\n    var token2 = []\n    for (var x in token1) {\n      if (typeof token1[x] === 'string') {\n        token2 = token2.concat(spaceDelimit(token1[x]))\n      } else {\n        token2 = token2.concat(token1[x])\n      }\n    }\n    token2 = replaceKeywords(token2)\n    log.info('SPARQL Tokens: ' + token2)\n    return token2\n  }\n\n  // CASE-INSENSITIVE\n  function arrayIndexOf (str, arr) {\n    for (var i = 0; i < arr.length; i++) {\n      if (typeof arr[i] !== 'string') {\n        continue\n      }\n      if (arr[i].toLowerCase() === str.toLowerCase()) {\n        return i\n      }\n    }\n    // log.warn(\"No instance of \"+str+\" in array \"+arr)\n    return null\n  }\n\n  // CASE-INSENSITIVE\n  function arrayIndicesOf (str, arr) {\n    var ind = []\n    for (var i = 0; i < arr.length; i++) {\n      if (typeof arr[i] !== 'string') {\n        continue\n      }\n      if (arr[i].toLowerCase() === str.toLowerCase()) {\n        ind.push(i)\n      }\n    }\n    return ind\n  }\n\n  function setVars (input, query) {\n    log.info('SPARQL vars: ' + input)\n    for (var x in input) {\n      if (isVar(input[x])) {\n        log.info('Added ' + input[x] + ' to query variables from SPARQL')\n        var v = makeVar(input[x].slice(1))\n        query.vars.push(v)\n        v.label = input[x].slice(1)\n      } else {\n        log.warn('Incorrect SPARQL variable in SELECT: ' + input[x])\n      }\n    }\n  }\n\n  function getPrefixDeclarations (input) {\n    var prefInd = arrayIndicesOf('PREFIX', input)\n    var res = []\n    for (var i in prefInd) {\n      var a = input[prefInd[i] + 1]\n      var b = input[prefInd[i] + 2]\n      if (!isPrefix(a)) {\n        log.error('Invalid SPARQL prefix: ' + a)\n      } else if (!isSymbol(b)) {\n        log.error('Invalid SPARQL symbol: ' + b)\n      } else {\n        log.info('Prefix found: ' + a + ' -> ' + b)\n        var pref = getPrefix(a)\n        var symbol = removeBrackets(b)\n        res[pref] = symbol\n      }\n    }\n    return res\n  }\n\n  function getMatchingBracket (arr, open, close) {\n    log.info('Looking for a close bracket of type ' + close + ' in ' + arr)\n    var index = 0\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i] === open) {\n        index++\n      }\n      if (arr[i] === close) {\n        index--\n      }\n      if (index < 0) {\n        return i\n      }\n    }\n    log.error('Statement had no close parenthesis in SPARQL query')\n    return 0\n  }\n\n  function constraintGreaterThan (value) {\n    this.describe = function (varstr) {\n      return varstr + ' > ' + value.toNT()\n    }\n    this.test = function (term) {\n      if (term.value.match(/[0-9]+(\\.[0-9]+)?([eE][+-]?[0-9]+)?/)) {\n        return (parseFloat(term.value) > parseFloat(value))\n      } else {\n        return (term.toNT() > value.toNT())\n      }\n    }\n    return this\n  }\n\n  function constraintLessThan (value) { // this is not the recommended usage. Should only work on literal, numeric, dateTime\n    this.describe = function (varstr) {\n      return varstr + ' < ' + value.toNT()\n    }\n    this.test = function (term) {\n      // this.describe = function (varstr) { return varstr + \" < \"+value }\n      if (term.value.match(/[0-9]+(\\.[0-9]+)?([eE][+-]?[0-9]+)?/)) {\n        return (parseFloat(term.value) < parseFloat(value))\n      } else {\n        return (term.toNT() < value.toNT())\n      }\n    }\n    return this\n  }\n  // This should only work on literals but doesn't.\n  function ConstraintEqualTo (value) {\n    this.describe = function (varstr) {\n      return varstr + ' = ' + value.toNT()\n    }\n    this.test = function (term) {\n      return value.equals(term)\n    }\n    return this\n  }\n\n  // value must be a literal\n  function ConstraintRegexp (value) {\n    this.describe = function (varstr) {\n      return \"REGEXP( '\" + value + \"' , \" + varstr + ' )'\n    }\n    this.test = function (term) {\n      var str = value\n      // str = str.replace(/^//,\"\").replace(//$/,\"\")\n      var rg = new RegExp(str)\n      if (term.value) {\n        return rg.test(term.value)\n      } else {\n        return false\n      }\n    }\n  }\n\n  function setConstraint (input, pat) {\n    if (input.length === 3 && input[0].termType === 'Variable' &&\n      (input[2].termType === 'NamedNode' || input[2].termType === 'Literal')) {\n      if (input[1] === '=') {\n        log.debug('Constraint added: ' + input)\n        pat.constraints[input[0]] = new ConstraintEqualTo(input[2])\n      } else if (input[1] === '>') {\n        log.debug('Constraint added: ' + input)\n        pat.constraints[input[0]] = new ConstraintEqualTo(input[2])\n      } else if (input[1] === '<') {\n        log.debug('Constraint added: ' + input)\n        pat.constraints[input[0]] = new ConstraintEqualTo(input[2])\n      } else {\n        log.warn(\"I don't know how to handle the constraint: \" + input)\n      }\n    } else if (input.length === 6 && typeof input[0] === 'string' &&\n      input[0].toLowerCase() === 'regexp' &&\n      input[1] === '(' && input[5] === ')' && input[3] === ',' &&\n      input[4].termType === 'Variable' && input[2].termType === 'Literal') {\n      log.debug('Constraint added: ' + input)\n      pat.constraints[input[4]] = new ConstraintRegexp(input[2].value)\n    }\n  // log.warn(\"I don't know how to handle the constraint: \"+input)\n  // alert(\"length: \"+input.length+\" input 0 type: \"+input[0].termType+\" input 1: \"+input[1]+\" input[2] type: \"+input[2].termType)\n  }\n\n  function setOptional (terms, pat) {\n    log.debug('Optional query: ' + terms + ' not yet implemented.')\n    var opt = kb.formula()\n    setWhere(terms, opt)\n    pat.optional.push(opt)\n  }\n\n  function setWhere (input, pat) {\n    var terms = toTerms(input)\n    var end\n    log.debug('WHERE: ' + terms)\n    var opt\n    // var opt = arrayIndicesOf(\"OPTIONAL\",terms)\n    while (arrayIndexOf('OPTIONAL', terms)) {\n      opt = arrayIndexOf('OPTIONAL', terms)\n      log.debug('OPT: ' + opt + ' ' + terms[opt] + ' in ' + terms)\n      if (terms[opt + 1] !== '{') {\n        log.warn('Bad optional opening bracket in word ' + opt)\n      }\n      end = getMatchingBracket(terms.slice(opt + 2), '{', '}')\n      if (end === -1) {\n        log.error('No matching bracket in word ' + opt)\n      } else {\n        setOptional(terms.slice(opt + 2, opt + 2 + end), pat)\n        // alert(pat.statements[0].toNT())\n        opt = arrayIndexOf('OPTIONAL', terms)\n        end = getMatchingBracket(terms.slice(opt + 2), '{', '}')\n        terms.splice(opt, end + 3)\n      }\n    }\n    log.debug('WHERE after optionals: ' + terms)\n    while (arrayIndexOf('FILTER', terms)) {\n      var filt = arrayIndexOf('FILTER', terms)\n      if (terms[filt + 1] !== '(') {\n        log.warn('Bad filter opening bracket in word ' + filt)\n      }\n      end = getMatchingBracket(terms.slice(filt + 2), '(', ')')\n      if (end === -1) {\n        log.error('No matching bracket in word ' + filt)\n      } else {\n        setConstraint(terms.slice(filt + 2, filt + 2 + end), pat)\n        filt = arrayIndexOf('FILTER', terms)\n        end = getMatchingBracket(terms.slice(filt + 2), '(', ')')\n        terms.splice(filt, end + 3)\n      }\n    }\n    log.debug('WHERE after filters and optionals: ' + terms)\n    extractStatements(terms, pat)\n  }\n\n  function extractStatements (terms, formula) {\n    var arrayZero = new Array(1)\n    arrayZero[0] = -1 // this is just to add the beginning of the where to the periods index.\n    var per = arrayZero.concat(arrayIndicesOf('.', terms))\n    var stat = []\n    for (var x = 0; x < per.length - 1; x++) {\n      stat[x] = terms.slice(per[x] + 1, per[x + 1])\n    }\n    // Now it's in an array of statements\n    for (x in stat) { // THIS MUST BE CHANGED FOR COMMA, SEMICOLON\n      log.info('s+p+o ' + x + ' = ' + stat[x])\n      var subj = stat[x][0]\n      stat[x].splice(0, 1)\n      var sem = arrayZero.concat(arrayIndicesOf(';', stat[x]))\n      sem.push(stat[x].length)\n      var stat2 = []\n      for (var y = 0; y < sem.length - 1; y++) {\n        stat2[y] = stat[x].slice(sem[y] + 1, sem[y + 1])\n      }\n      for (x in stat2) {\n        log.info('p+o ' + x + ' = ' + stat[x])\n        var pred = stat2[x][0]\n        stat2[x].splice(0, 1)\n        var com = arrayZero.concat(arrayIndicesOf(',', stat2[x]))\n        com.push(stat2[x].length)\n        var stat3 = []\n        for (y = 0; y < com.length - 1; y++) {\n          stat3[y] = stat2[x].slice(com[y] + 1, com[y + 1])\n        }\n        for (x in stat3) {\n          var obj = stat3[x][0]\n          log.info('Subj=' + subj + ' Pred=' + pred + ' Obj=' + obj)\n          formula.add(subj, pred, obj)\n        }\n      }\n    }\n  }\n\n  // ******************************* Body of SPARQLToQuery ***************************//\n  log.info('SPARQL input: \\n' + SPARQL)\n  var q = new Query()\n  var sp = tokenize(SPARQL) // first tokenize everything\n  var prefixes = getPrefixDeclarations(sp)\n  if (!prefixes.rdf) {\n    prefixes.rdf = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#'\n  }\n  if (!prefixes.rdfs) {\n    prefixes.rdfs = 'http://www.w3.org/2000/01/rdf-schema#'\n  }\n  var selectLoc = arrayIndexOf('SELECT', sp)\n  var whereLoc = arrayIndexOf('WHERE', sp)\n  if (selectLoc < 0 || whereLoc < 0 || selectLoc > whereLoc) {\n    log.error('Invalid or nonexistent SELECT and WHERE tags in SPARQL query')\n    return false\n  }\n  setVars(sp.slice(selectLoc + 1, whereLoc), q)\n\n  setWhere(sp.slice(whereLoc + 2, sp.length - 1), q.pat)\n\n  if (testMode) {\n    return q\n  }\n\n  for (var x in q.pat.statements) {\n    var st = q.pat.statements[x]\n    if (st.subject.termType === 'NamedNode') {\n      if (kb.fetcher) {\n        kb.fetcher.lookUpThing(st.subject, 'sparql:' + st.subject)\n      }\n    }\n    if (st.object.termType === 'NamedNode') {\n      if (kb.fetcher) {\n        kb.fetcher.lookUpThing(st.object, 'sparql:' + st.object)\n      }\n    }\n  }\n  // alert(q.pat)\n  return q\n// checkVars()\n// *******************************************************************//\n}\n","/* @file Update Manager Class\n**\n** 2007-07-15 original SPARQL Update module by Joe Presbrey <presbrey@mit.edu>\n** 2010-08-08 TimBL folded in Kenny's WEBDAV\n** 2010-12-07 TimBL added local file write code\n*/\nimport IndexedFormula from './store'\nimport { docpart, join as uriJoin } from './uri'\nimport Fetcher, { Options } from './fetcher'\nimport Namespace from './namespace'\nimport Serializer from './serializer'\nimport { isBlankNode, isStore } from './utils/terms'\nimport * as Util from './utils-js'\nimport Statement from './statement'\nimport RDFlibNamedNode from './named-node'\nimport { termValue } from './utils/termValue'\nimport { BlankNode, NamedNode, Quad, Quad_Graph, Quad_Object, Quad_Predicate, Quad_Subject, Term, } from './tf-types'\n\ninterface UpdateManagerFormula extends IndexedFormula {\n  fetcher: Fetcher\n}\n\ntype CallBackFunction = (uri: string, ok: boolean, message: string, response: Error | Response) => {} | void\n\n/**\n* The UpdateManager is a helper object for a store.\n* Just as a Fetcher provides the store with the ability to read and write,\n* the Update Manager provides functionality for making small patches in real time,\n* and also looking out for concurrent updates from other agents\n*/\nexport default class UpdateManager {\n\n  store: UpdateManagerFormula\n\n  ifps: {}\n\n  fps: {}\n\n  /** Index of objects for coordinating incoming and outgoing patches */\n  patchControl: []\n\n  /** Object of namespaces */\n  ns: any\n\n  /**\n   * @param  store - The quadstore to store data and metadata. Created if not passed.\n  */\n  constructor(store?: IndexedFormula) {\n    store = store || new IndexedFormula()\n    if (store.updater) {\n      throw new Error(\"You can't have two UpdateManagers for the same store\")\n    }\n    if (!(store as UpdateManagerFormula).fetcher) {\n      (store as UpdateManagerFormula).fetcher = new Fetcher(store)\n    }\n    this.store = store as UpdateManagerFormula\n    store.updater = this\n    this.ifps = {}\n    this.fps = {}\n    this.ns = {}\n    this.ns.link = Namespace('http://www.w3.org/2007/ont/link#')\n    this.ns.http = Namespace('http://www.w3.org/2007/ont/http#')\n    this.ns.httph = Namespace('http://www.w3.org/2007/ont/httph#')\n    this.ns.ldp = Namespace('http://www.w3.org/ns/ldp#')\n    this.ns.rdf = Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n    this.ns.rdfs = Namespace('http://www.w3.org/2000/01/rdf-schema#')\n    this.ns.rdf = Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n    this.ns.owl = Namespace('http://www.w3.org/2002/07/owl#')\n\n    this.patchControl = []\n  }\n\n  patchControlFor(doc: NamedNode) {\n    if (!this.patchControl[doc.value]) {\n      this.patchControl[doc.value] = []\n    }\n    return this.patchControl[doc.value]\n  }\n\n  isHttpUri(uri: string) {\n    return (uri.slice(0, 4) === 'http')\n  }\n\n  /** Remove from the store HTTP authorization metadata\n  * The editable function below relies on copies we have in the store\n  * of the results of previous HTTP transactions. However, when\n  * the user logs in, then that data misrepresents what would happen\n  * if the user tried again.\n  */\n  flagAuthorizationMetadata(kb?: IndexedFormula) {\n    if (!kb) {\n      kb = this.store\n    }\n    const meta = kb.fetcher?.appNode\n    const requests = kb.statementsMatching(undefined, this.ns.link('requestedURI'), undefined, meta).map(st => st.subject)\n    for (const request of requests) {\n      const response = kb.any(request, this.ns.link('response'), null, meta) as Quad_Subject\n      if (response != undefined) { // ts\n        kb.add(response, this.ns.link('outOfDate'), true as any, meta) // @@ Boolean is fine - fix types\n      }\n    }\n  }\n\n  /**\n   * Tests whether a file is editable.\n   * If the file has a specific annotation that it is machine written,\n   * for safety, it is editable (this doesn't actually check for write access)\n   * If the file has wac-allow and accept patch headers, those are respected.\n   * and local write access is determined by those headers.\n   * This async version not only looks at past HTTP requests, it also makes new ones if necessary.\n   *\n   * @returns The method string N3PATCH or SPARQL or DAV or\n   *   LOCALFILE or false if known, undefined if not known.\n   */\n  async checkEditable(uri: string | NamedNode, kb?: IndexedFormula): Promise<string | boolean | undefined> {\n    if (!uri) {\n      return false // Eg subject is bnode, no known doc to write to\n    }\n    if (!kb) {\n      kb = this.store\n    }\n\n    const initial = this.editable(uri, kb)\n    if (initial !== undefined) {\n      return initial\n    }\n    await kb.fetcher?.load(uri)\n    const final = this.editable(uri, kb)\n    // console.log(`Loaded ${uri} just to check editable, result: ${final}.`)\n    return final\n  }\n  /**\n   * Tests whether a file is editable.\n   * If the file has a specific annotation that it is machine written,\n   * for safety, it is editable (this doesn't actually check for write access)\n   * If the file has wac-allow and accept patch headers, those are respected.\n   * and local write access is determined by those headers.\n   * This synchronous version only looks at past HTTP requests, does not make new ones.\n   *\n   * @returns The method string SPARQL or DAV or\n   *   LOCALFILE or false if known, undefined if not known.\n   */\n  editable(uri: string | NamedNode, kb?: IndexedFormula): string | boolean | undefined {\n    if (!uri) {\n      return false // Eg subject is bnode, no known doc to write to\n    }\n    if (!kb) {\n      kb = this.store\n    }\n    uri = termValue(uri)\n\n    if (!this.isHttpUri(uri as string)) {\n      if (kb.holds(\n        kb.rdfFactory.namedNode(uri),\n        kb.rdfFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'),\n        kb.rdfFactory.namedNode('http://www.w3.org/2007/ont/link#MachineEditableDocument'))) {\n        return 'LOCALFILE'\n      }\n    }\n\n    var request\n    var definitive = false\n    const meta = kb.fetcher?.appNode\n    // const kb = s\n\n    // @ts-ignore passes a string to kb.each, which expects a term. Should this work?\n    var requests = kb.each(undefined, this.ns.link('requestedURI'), docpart(uri), meta)\n    var method: string\n    for (var r = 0; r < requests.length; r++) {\n      request = requests[r]\n      if (request !== undefined) {\n        const response = kb.any(request, this.ns.link('response'), null, meta) as Quad_Subject\n        if (response !== undefined) { // ts\n\n          const outOfDate = kb.anyJS(response, this.ns.link('outOfDate'), null, meta) as Quad_Subject\n          if (outOfDate) continue\n\n          var wacAllow = kb.anyValue(response, this.ns.httph('wac-allow'))\n          if (wacAllow) {\n            for (var bit of wacAllow.split(',')) {\n              var lr = bit.split('=')\n              if (lr[0].includes('user') && !lr[1].includes('write') && !lr[1].includes('append')) {\n                // console.log('    editable? excluded by WAC-Allow: ', wacAllow)\n                return false\n              }\n            }\n          }\n          var acceptPatch = kb.each(response, this.ns.httph('accept-patch'))\n          if (acceptPatch.length) {\n            for (let i = 0; i < acceptPatch.length; i++) {\n              method = acceptPatch[i].value.trim()\n              // 2025/02 temporarily priorize SPARQL until N3PATCH spec revised on inserts with blankNodes\n              if (method.indexOf('application/sparql-update') >= 0) return 'SPARQL'\n              if (method.indexOf('application/sparql-update-single-match') >= 0) return 'SPARQL'\n              if (method.indexOf('text/n3') >= 0) return 'N3PATCH'\n            }\n          }\n          var authorVia = kb.each(response, this.ns.httph('ms-author-via'))\n          if (authorVia.length) {\n            for (let i = 0; i < authorVia.length; i++) {\n              method = authorVia[i].value.trim()\n              if (method.indexOf('SPARQL') >= 0) {\n                return 'SPARQL'\n              }\n              if (method.indexOf('DAV') >= 0) {\n                return 'DAV'\n              }\n            }\n          }\n\n          if (!this.isHttpUri(uri as string)) {\n            if (!wacAllow) return false;\n            else return 'LOCALFILE';\n          }\n\n          var status = kb.each(response, this.ns.http('status'))\n          if (status.length) {\n            for (let i = 0; i < status.length; i++) {\n              // @ts-ignore since statuses should be TFTerms, this should always be false\n              if (status[i] === 200 || status[i] === 404) {\n                definitive = true\n                // return false // A definitive answer\n              }\n            }\n          }\n        } else {\n          // console.log('UpdateManager.editable: No response for ' + uri + '\\n')\n        }\n      }\n    }\n    if (requests.length === 0) {\n      // console.log('UpdateManager.editable: No request for ' + uri + '\\n')\n    } else {\n      if (definitive) {\n        return false // We have got a request and it did NOT say editable => not editable\n      }\n    }\n    // console.log('UpdateManager.editable: inconclusive for ' + uri + '\\n')\n    return undefined // We don't know (yet) as we haven't had a response (yet)\n  }\n\n  anonymize(obj) {\n    let anonymized = (obj.toNT().substr(0, 2) === '_:' && this.mentioned(obj))\n      ? '?' + obj.toNT().substr(2)\n      : obj.toNT();\n\n    return anonymized;\n  }\n\n  anonymizeNT(stmt: Quad) {\n    return this.anonymize(stmt.subject) + ' ' +\n      this.anonymize(stmt.predicate) + ' ' +\n      this.anonymize(stmt.object) + ' .'\n  }\n\n  nTriples(stmt) {\n    return `${stmt.subject.toNT()} ${stmt.predicate.toNT()} ${stmt.object.toNT()} .`\n  }\n\n  /**\n   * Returns a list of all bnodes occurring in a statement\n   * @private\n   */\n  statementBnodes(st: Quad): BlankNode[] {\n    return [st.subject, st.predicate, st.object].filter(function (x) {\n      return isBlankNode(x)\n    }) as BlankNode[]\n  }\n\n  /**\n   * Returns a list of all bnodes occurring in a list of statements\n   * @private\n   */\n  statementArrayBnodes(sts: ReadonlyArray<Quad>) {\n    var bnodes: BlankNode[] = []\n    for (let i = 0; i < sts.length; i++) {\n      bnodes = bnodes.concat(this.statementBnodes(sts[i]))\n    }\n    bnodes.sort() // in place sort - result may have duplicates\n    var bnodes2: BlankNode[] = []\n    for (let j = 0; j < bnodes.length; j++) {\n      if (j === 0 || !bnodes[j].equals(bnodes[j - 1])) {\n        bnodes2.push(bnodes[j])\n      }\n    }\n    return bnodes2\n  }\n\n  /**\n   * Makes a cached list of [Inverse-]Functional properties\n   * @private\n   */\n  cacheIfps() {\n    this.ifps = {}\n    var a = this.store.each(undefined, this.ns.rdf('type'),\n      this.ns.owl('InverseFunctionalProperty'))\n    for (let i = 0; i < a.length; i++) {\n      this.ifps[a[i].value] = true\n    }\n    this.fps = {}\n    a = this.store.each(undefined, this.ns.rdf('type'), this.ns.owl('FunctionalProperty'))\n    for (let i = 0; i < a.length; i++) {\n      this.fps[a[i].value] = true\n    }\n  }\n\n  /**\n   * Returns a context to bind a given node, up to a given depth\n   * @private\n   */\n  bnodeContext2(x, source, depth) {\n    // Return a list of statements which indirectly identify a node\n    //  Depth > 1 if try further indirection.\n    //  Return array of statements (possibly empty), or null if failure\n    var sts = this.store.statementsMatching(undefined, undefined, x, source) // incoming links\n    var y\n    var res\n    for (let i = 0; i < sts.length; i++) {\n      if (this.fps[sts[i].predicate.value]) {\n        y = sts[i].subject\n        if (!y.isBlank) {\n          return [sts[i]]\n        }\n        if (depth) {\n          res = this.bnodeContext2(y, source, depth - 1)\n          if (res) {\n            return res.concat([sts[i]])\n          }\n        }\n      }\n    }\n    // outgoing links\n    sts = this.store.statementsMatching(x, undefined, undefined, source)\n    for (let i = 0; i < sts.length; i++) {\n      if (this.ifps[sts[i].predicate.value]) {\n        y = sts[i].object\n        if (!y.isBlank) {\n          return [sts[i]]\n        }\n        if (depth) {\n          res = this.bnodeContext2(y, source, depth - 1)\n          if (res) {\n            return res.concat([sts[i]])\n          }\n        }\n      }\n    }\n    return null // Failure\n  }\n\n  /**\n   * Returns the smallest context to bind a given single bnode\n   * @private\n   */\n  bnodeContext1(x, source) {\n    // Return a list of statements which indirectly identify a node\n    //   Breadth-first\n    for (var depth = 0; depth < 3; depth++) { // Try simple first\n      var con = this.bnodeContext2(x, source, depth)\n      if (con !== null) return con\n    }\n    // If we can't guarantee unique with logic just send all info about node\n    return this.store.connectedStatements(x, source) // was:\n    // throw new Error('Unable to uniquely identify bnode: ' + x.toNT())\n  }\n\n  /**\n   * @private\n   */\n  mentioned(x) {\n    return this.store.statementsMatching(x, null, null, null).length !== 0 || // Don't pin fresh bnodes\n      this.store.statementsMatching(null, x).length !== 0 ||\n      this.store.statementsMatching(null, null, x).length !== 0\n  }\n\n  /**\n   * @private\n   */\n  bnodeContext(bnodes, doc) {\n    var context = []\n    if (bnodes.length) {\n      this.cacheIfps()\n      for (let i = 0; i < bnodes.length; i++) { // Does this occur in old graph?\n        var bnode = bnodes[i]\n        if (!this.mentioned(bnode)) continue\n        context = context.concat(this.bnodeContext1(bnode, doc))\n      }\n    }\n    return context\n  }\n\n  /**\n   * Returns the best context for a single statement\n   * @private\n   */\n  statementContext(st: Quad) {\n    var bnodes = this.statementBnodes(st)\n    return this.bnodeContext(bnodes, st.graph)\n  }\n\n  /**\n   * @private\n   */\n  contextWhere(context) {\n    var updater = this\n    return (!context || context.length === 0)\n      ? ''\n      : 'WHERE { ' +\n      context.map(function (x) {\n        return updater.anonymizeNT(x)\n      }).join('\\n') + ' }\\n'\n  }\n\n  /**\n   * @private\n   */\n  fire(\n    uri: string,\n    query: string,\n    callbackFunction: CallBackFunction,\n    options: Options = {}\n  ): Promise<void> {\n    return Promise.resolve()\n      .then(() => {\n        if (!uri) {\n          throw new Error('No URI given for remote editing operation: ' + query)\n        }\n        // console.log('UpdateManager: sending update to <' + uri + '>')\n\n        options.noMeta = true;\n        options.contentType = options.contentType || 'application/sparql-update';\n        options.body = query;\n\n        return this.store.fetcher.webOperation('PATCH', uri, options)\n      })\n      .then(response => {\n        if (!response.ok) {\n          let message = 'UpdateManager: update failed for <' + uri + '> status=' +\n            response.status + ', ' + response.statusText +\n            '\\n   for query: ' + query\n          // console.log(message)\n          throw new Error(message)\n        }\n\n        // console.log('UpdateManager: update Ok for <' + uri + '>')\n\n        callbackFunction(uri, response.ok, response.responseText as string, response)\n      })\n      .catch(err => {\n        callbackFunction(uri, false, err.message, err)\n      })\n  }\n\n  // ARE THESE THREE FUNCTIONS USED? DEPRECATE?\n\n  /** return a statemnet updating function\n   *\n   * This does NOT update the statement.\n   * It returns an object which includes\n   *  function which can be used to change the object of the statement.\n   */\n  update_statement(statement: Quad) {\n    if (statement && !statement.graph) {\n      return\n    }\n    var updater = this\n    var context = this.statementContext(statement)\n\n    return {\n      statement: statement ? [statement.subject, statement.predicate, statement.object, statement.graph] : undefined,\n      statementNT: statement ? this.anonymizeNT(statement) : undefined,\n      where: updater.contextWhere(context),\n\n      set_object: function (obj, callbackFunction) {\n        var query = this.where\n        query += 'DELETE DATA { ' + this.statementNT + ' } ;\\n'\n        query += 'INSERT DATA { ' +\n          // @ts-ignore `this` might refer to the wrong scope. Does this work?\n          this.anonymize(this.statement[0]) + ' ' +\n          // @ts-ignore\n          this.anonymize(this.statement[1]) + ' ' +\n          // @ts-ignore\n          this.anonymize(obj) + ' ' + ' . }\\n'\n\n        updater.fire((this.statement as [Quad_Subject, Quad_Predicate, Quad_Object, Quad_Graph])[3].value, query, callbackFunction)\n      }\n    }\n  }\n\n  insert_statement(st: Quad, callbackFunction: CallBackFunction): void {\n    var st0 = st instanceof Array ? st[0] : st\n    var query = this.contextWhere(this.statementContext(st0))\n\n    if (st instanceof Array) {\n      var stText = ''\n      for (let i = 0; i < st.length; i++) stText += st[i] + '\\n'\n      query += 'INSERT DATA { ' + stText + ' }\\n'\n    } else {\n      query += 'INSERT DATA { ' +\n        this.anonymize(st.subject) + ' ' +\n        this.anonymize(st.predicate) + ' ' +\n        this.anonymize(st.object) + ' ' + ' . }\\n'\n    }\n\n    this.fire(st0.graph.value, query, callbackFunction)\n  }\n\n  delete_statement(st: Quad | Quad[], callbackFunction: CallBackFunction): void {\n    var st0 = st instanceof Array ? st[0] : st\n    var query = this.contextWhere(this.statementContext(st0))\n\n    if (st instanceof Array) {\n      var stText = ''\n      for (let i = 0; i < st.length; i++) stText += st[i] + '\\n'\n      query += 'DELETE DATA { ' + stText + ' }\\n'\n    } else {\n      query += 'DELETE DATA { ' +\n        this.anonymize(st.subject) + ' ' +\n        this.anonymize(st.predicate) + ' ' +\n        this.anonymize(st.object) + ' ' + ' . }\\n'\n    }\n\n    this.fire(st0.graph.value, query, callbackFunction)\n  }\n\n  /// //////////////////////\n\n  /**\n   * Requests a now or future action to refresh changes coming downstream\n   * This is designed to allow the system to re-request the server version,\n   * when a websocket has pinged to say there are changes.\n   * If the websocket, by contrast, has sent a patch, then this may not be necessary.\n   *\n   * @param doc\n   * @param action\n   */\n  requestDownstreamAction(doc: NamedNode, action): void {\n    var control = this.patchControlFor(doc)\n    if (!control.pendingUpstream) {\n      action(doc)\n    } else {\n      if (control.downstreamAction) {\n        if ('' + control.downstreamAction !== '' + action) {  // Kludge compare\n          throw new Error(\"Can't wait for > 1 different downstream actions\")\n        }\n      } else {\n        control.downstreamAction = action\n      }\n    }\n  }\n\n  /**\n   * We want to start counting websocket notifications\n   * to distinguish the ones from others from our own.\n   */\n  clearUpstreamCount(doc: NamedNode): void {\n    var control = this.patchControlFor(doc)\n    control.upstreamCount = 0\n  }\n\n  getUpdatesVia(doc: NamedNode): string | null {\n    var linkHeaders = this.store.fetcher.getHeader(doc, 'updates-via')\n    if (!linkHeaders || !linkHeaders.length) return null\n    return linkHeaders[0].trim()\n  }\n\n  addDownstreamChangeListener(doc: NamedNode, listener): void {\n    var control = this.patchControlFor(doc)\n    if (!control.downstreamChangeListeners) { control.downstreamChangeListeners = [] }\n    control.downstreamChangeListeners.push(listener)\n    this.setRefreshHandler(doc, (doc: NamedNode) => {\n      this.reloadAndSync(doc)\n    })\n  }\n\n  reloadAndSync(doc: NamedNode): void {\n    var control = this.patchControlFor(doc)\n    var updater = this\n\n    if (control.reloading) {\n      // console.log('   Already reloading - note this load may be out of date')\n      control.outOfDate = true\n      return // once only needed @@ Not true, has changed again\n    }\n    control.reloading = true\n    var retryTimeout = 1000 // ms\n    var tryReload = function () {\n      // console.log('try reload - timeout = ' + retryTimeout)\n      updater.reload(updater.store, doc, function (ok, message, response) {\n        if (ok) {\n          if (control.downstreamChangeListeners) {\n            for (let i = 0; i < control.downstreamChangeListeners.length; i++) {\n              // console.log('        Calling downstream listener ' + i)\n              control.downstreamChangeListeners[i]()\n            }\n          }\n          control.reloading = false\n          if (control.outOfDate) {\n            // console.log('   Extra reload because of extra update.')\n            control.outOfDate = false\n            tryReload()\n          }\n        } else {\n          control.reloading = false\n          if (response && (response as Response).status === 0) {\n            // console.log('Network error refreshing the data. Retrying in ' +\n            // retryTimeout / 1000)\n            control.reloading = true\n            retryTimeout = retryTimeout * 2\n            setTimeout(tryReload, retryTimeout)\n          } else {\n            // console.log('Error ' + (response as Response).status + 'refreshing the data:' +\n            //  message + '. Stopped' + doc)\n          }\n        }\n      })\n    }\n    tryReload()\n  }\n\n  /**\n   * Sets up websocket to listen on\n   *\n   * There is coordination between upstream changes and downstream ones\n   * so that a reload is not done in the middle of an upstream patch.\n   * If you use this API then you get called when a change happens, and you\n   * have to reload the file yourself, and then refresh the UI.\n   * Alternative is addDownstreamChangeListener(), where you do not\n   * have to do the reload yourself. Do mot mix them.\n   *\n   * kb contains the HTTP  metadata from previous operations\n   *\n   * @param doc\n   * @param handler\n   *\n   * @returns {boolean}\n   */\n  setRefreshHandler(doc: NamedNode, handler): boolean {\n    let wssURI = this.getUpdatesVia(doc) // relative\n    // var kb = this.store\n    var theHandler = handler\n    var self = this\n    var updater = this\n    var retryTimeout = 1500 // *2 will be 3 Seconds, 6, 12, etc\n    var retries = 0\n\n    if (!wssURI) {\n      // console.log('Server does not support live updates through Updates-Via :-(')\n      return false\n    }\n\n    wssURI = uriJoin(wssURI, doc.value)\n    const validWssURI = wssURI.replace(/^http:/, 'ws:').replace(/^https:/, 'wss:')\n    // console.log('Web socket URI ' + wssURI)\n\n    var openWebsocket = function () {\n      // From https://github.com/solid/solid-spec#live-updates\n      var socket\n      if (typeof WebSocket !== 'undefined') {\n        socket = new WebSocket(validWssURI)\n      } else if (typeof window !== 'undefined' && window.WebSocket) {\n        socket = (window as any).WebSocket(validWssURI)\n      } else {\n        // console.log('Live update disabled, as WebSocket not supported by platform :-(')\n        return\n      }\n      socket.onopen = function () {\n        // console.log('    websocket open')\n        retryTimeout = 1500 // reset timeout to fast on success\n        this.send('sub ' + doc.value)\n        if (retries) {\n          // console.log('Web socket has been down, better check for any news.')\n          updater.requestDownstreamAction(doc, theHandler)\n        }\n      }\n      var control = self.patchControlFor(doc)\n      control.upstreamCount = 0\n\n      socket.onerror = function onerror(err: Error) {\n        // console.log('Error on Websocket:', err)\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n      //\n      // 1000  CLOSE_NORMAL  Normal closure; the connection successfully completed whatever purpose for which it was created.\n      // 1001  CLOSE_GOING_AWAY  The endpoint is going away, either\n      //                                  because of a server failure or because the browser is navigating away from the page that opened the connection.\n      // 1002  CLOSE_PROTOCOL_ERROR  The endpoint is terminating the connection due to a protocol error.\n      // 1003  CLOSE_UNSUPPORTED  The connection is being terminated because the endpoint\n      //                                  received data of a type it cannot accept (for example, a text-only endpoint received binary data).\n      // 1004                             Reserved. A meaning might be defined in the future.\n      // 1005  CLOSE_NO_STATUS  Reserved.  Indicates that no status code was provided even though one was expected.\n      // 1006  CLOSE_ABNORMAL  Reserved. Used to indicate that a connection was closed abnormally (\n      //\n      //\n      socket.onclose = function (event: CloseEvent) {\n        // console.log('*** Websocket closed with code ' + event.code +\n        //   \", reason '\" + event.reason + \"' clean = \" + event.wasClean)\n        retryTimeout *= 2\n        retries += 1\n        // console.log('Retrying in ' + retryTimeout + 'ms') // (ask user?)\n        setTimeout(function () {\n          // console.log('Trying websocket again')\n          openWebsocket()\n        }, retryTimeout)\n      }\n      socket.onmessage = function (msg: MessageEvent) {\n        if (msg.data && msg.data.slice(0, 3) === 'pub') {\n          if ('upstreamCount' in control) {\n            control.upstreamCount -= 1\n            if (control.upstreamCount >= 0) {\n              // console.log('just an echo: ' + control.upstreamCount)\n              return // Just an echo\n            }\n          }\n          // console.log('Assume a real downstream change: ' + control.upstreamCount + ' -> 0')\n          control.upstreamCount = 0\n          self.requestDownstreamAction(doc, theHandler)\n        }\n      }\n    } // openWebsocket\n    openWebsocket()\n\n    return true\n  }\n\n  /**\n   * This high-level function updates the local store iff the web is changed successfully.\n   * Deletions, insertions may be undefined or single statements or lists or formulae (may contain bnodes which can be indirectly identified by a where clause).\n   * The `why` property of each statement must be the give the web document to be updated.\n   * The statements to be deleted and inserted may span more than one web document.\n   * @param deletions - Statement or statements to be deleted.\n   * @param insertions - Statement or statements to be inserted.\n   * @returns a promise\n   */\n  updateMany(\n    deletions: ReadonlyArray<Statement>,\n    insertions: ReadonlyArray<Statement> = []\n  ): Promise<void[]> {\n    const docs = deletions.concat(insertions).map(st => st.why)\n    const thisUpdater = this\n    const uniqueDocs: Array<NamedNode> = []\n    docs.forEach(doc => {\n      if (!uniqueDocs.find(uniqueDoc => uniqueDoc.equals(doc))) uniqueDocs.push(doc as NamedNode)\n    })\n    const updates = uniqueDocs.map(doc =>\n      thisUpdater.update(deletions.filter(st => st.why.equals(doc)),\n        insertions.filter(st => st.why.equals(doc))))\n    if (updates.length > 1) {\n      // console.log(`@@ updateMany to ${updates.length}: ${uniqueDocs}`)\n    }\n    return Promise.all(updates)\n  }\n\n  /**\n   * @private\n   * \n   * This helper function constructs SPARQL Update query from resolved arguments.\n   * \n   * @param ds: deletions array.\n   * @param is: insertions array.\n   * @param bnodes_context: Additional context to uniquely identify any blank nodes.\n   */\n  constructSparqlUpdateQuery(\n    ds: ReadonlyArray<Statement>,\n    is: ReadonlyArray<Statement>,\n    bnodes_context,\n  ): string {\n    var whereClause = this.contextWhere(bnodes_context)\n    var query = ''\n    if (whereClause.length) { // Is there a WHERE clause?\n      if (ds.length) {\n        query += 'DELETE { '\n        for (let i = 0; i < ds.length; i++) {\n          query += this.anonymizeNT(ds[i]) + '\\n'\n        }\n        query += ' }\\n'\n      }\n      if (is.length) {\n        query += 'INSERT { '\n        for (let i = 0; i < is.length; i++) {\n          query += this.anonymizeNT(is[i]) + '\\n'\n        }\n        query += ' }\\n'\n      }\n      query += whereClause\n    } else { // no where clause\n      if (ds.length) {\n        query += 'DELETE DATA { '\n        for (let i = 0; i < ds.length; i++) {\n          query += this.anonymizeNT(ds[i]) + '\\n'\n        }\n        query += ' } \\n'\n      }\n      if (is.length) {\n        if (ds.length) query += ' ; '\n        query += 'INSERT DATA { '\n        for (let i = 0; i < is.length; i++) {\n          query += this.nTriples(is[i]) + '\\n'\n        }\n        query += ' }\\n'\n      }\n    }\n    return query;\n  }\n\n  /**\n   * @private\n   * \n   * This helper function constructs n3-patch query from resolved arguments.\n   * \n   * @param ds: deletions array.\n   * @param is: insertions array.\n   * @param bnodes_context: Additional context to uniquely identify any blanknodes.\n   */\n  constructN3PatchQuery(\n    ds: ReadonlyArray<Statement>,\n    is: ReadonlyArray<Statement>,\n    bnodes_context,\n  ): string {\n    var query = `\n@prefix solid: <http://www.w3.org/ns/solid/terms#>.\n@prefix ex: <http://www.example.org/terms#>.\n\n_:patch\n`;\n    // If bnode context is non trivial, express it as ?conditions formula.\n    if (bnodes_context && bnodes_context.length > 0) {\n      query += `\n      solid:where {\n        ${bnodes_context.map((x) => this.anonymizeNT(x)).join('\\n        ')}\n      };`\n    }\n    if (ds.length > 0) {\n      query += `\n      solid:deletes {\n        ${ds.map((x) => this.anonymizeNT(x)).join('\\n        ')}\n      };`\n    }\n    if (is.length > 0) {\n      query += `\n      solid:inserts {\n        ${is.map((x) => this.anonymizeNT(x)).join('\\n        ')}\n      };`\n    }\n    query += \"   a solid:InsertDeletePatch .\\n\"\n\n    return query;\n  }\n\n  /**\n   * This high-level function updates the local store if the web is changed successfully.\n   * Deletions, insertions may be undefined or single statements or lists or formulae (may contain bnodes which can be indirectly identified by a where clause).\n   * The `why` property of each statement must be the same and give the web document to be updated.\n   * @param deletions - Statement or statements to be deleted.\n   * @param insertions - Statement or statements to be inserted.\n   * @param callback - called as callbackFunction(uri, success, errorbody)\n   *           OR returns a promise\n   * @param options - Options for the fetch call\n   */\n  update(\n    deletions: ReadonlyArray<Statement>,\n    insertions: ReadonlyArray<Statement>,\n    callback?: (\n      uri: string | undefined | null,\n      success: boolean,\n      errorBody?: string,\n      response?: Response | Error\n    ) => void,\n    secondTry?: boolean,\n    options: Options = {}\n  ): void | Promise<void> {\n    if (!callback) {\n      var thisUpdater = this\n      return new Promise(function (resolve, reject) { // Promise version\n        thisUpdater.update(deletions, insertions, function (uri, ok, errorBody) {\n          if (!ok) {\n            reject(new Error(errorBody))\n          } else {\n            resolve()\n          }\n        }, secondTry, options) // callbackFunction\n      }) // promise\n    } // if\n\n    try {\n      var kb = this.store\n      var ds = !deletions ? []\n        : isStore(deletions) ? deletions.statements\n          : deletions instanceof Array ? deletions : [deletions]\n      var is = !insertions ? []\n        : isStore(insertions) ? insertions.statements\n          : insertions instanceof Array ? insertions : [insertions]\n      if (!(ds instanceof Array)) {\n        throw new Error('Type Error ' + (typeof ds) + ': ' + ds)\n      }\n      if (!(is instanceof Array)) {\n        throw new Error('Type Error ' + (typeof is) + ': ' + is)\n      }\n      if (ds.length === 0 && is.length === 0) {\n        return callback(null, true) // success -- nothing needed to be done.\n      }\n      var doc = ds.length ? ds[0].graph : is[0].graph\n      if (!doc) {\n        let message = 'Error patching: statement does not specify which document to patch:' + ds[0] + ', ' + is[0]\n        // console.log(message)\n        throw new Error(message)\n      }\n      if (doc.termType !== 'NamedNode') {\n        let message = 'Error patching: document not a NamedNode:' + ds[0] + ', ' + is[0]\n        // console.log(message)\n        throw new Error(message)\n      }\n      var control = this.patchControlFor(doc)\n\n      var startTime = Date.now()\n\n      var props = ['subject', 'predicate', 'object', 'why']\n      var verbs = ['insert', 'delete']\n      var clauses = { 'delete': ds, 'insert': is }\n      verbs.map(function (verb) {\n        clauses[verb].map(function (st: Quad) {\n          if (!doc.equals(st.graph)) {\n            throw new Error('update: destination ' + doc +\n              ' inconsistent with delete quad ' + st.graph)\n          }\n          props.map(function (prop) {\n            if (typeof st[prop] === 'undefined') {\n              throw new Error('update: undefined ' + prop + ' of statement.')\n            }\n          })\n        })\n      })\n\n      var protocol = this.editable(doc.value, kb);\n\n      if (protocol === false) {\n        throw new Error('Update: Can\\'t make changes in uneditable ' + doc)\n      }\n      if (protocol === undefined) { // Not enough metadata\n        if (secondTry) {\n          throw new Error('Update: Loaded ' + doc + \"but still can't figure out what editing protocol it supports.\")\n        }\n        // console.log(`Update: have not loaded ${doc} before: loading now...`);\n        (this.store.fetcher.load(doc as NamedNode) as Promise<Response>).then(response => {\n          this.update(deletions, insertions, callback, true, options)\n        }, err => {\n          if (err.response.status === 404) { // nonexistent files are fine\n            this.update(deletions, insertions, callback, true, options)\n          } else {\n            throw new Error(`Update: Can't get updatability status ${doc} before patching: ${err}`)\n          }\n        })\n        return\n      } else if ((protocol as string).indexOf('SPARQL') >= 0 || (protocol as string).indexOf('N3PATCH') >= 0) {\n        var isSparql = (protocol as string).indexOf('SPARQL') >= 0\n\n        var bnodes: BlankNode[] = []\n        // change ReadOnly type to Mutable type\n        type Mutable<Type> = {\n          -readonly [Key in keyof Type]: Type[Key];\n        }\n\n        if (ds.length) bnodes = this.statementArrayBnodes(ds as Mutable<typeof ds>)\n        if (is.length) bnodes = bnodes.concat(this.statementArrayBnodes(is as Mutable<typeof is>))\n        var context = this.bnodeContext(bnodes, doc)\n\n        var query = isSparql ? this.constructSparqlUpdateQuery(ds, is, context) : this.constructN3PatchQuery(ds, is, context);\n        options.contentType = isSparql ? 'application/sparql-update' : 'text/n3' \n        \n        // Track pending upstream patches until they have finished their callbackFunction\n        control.pendingUpstream = control.pendingUpstream ? control.pendingUpstream + 1 : 1\n        if ('upstreamCount' in control) {\n          control.upstreamCount += 1 // count changes we originated ourselves\n          // console.log('upstream count up to : ' + control.upstreamCount)\n        }\n\n        this.fire(doc.value, query, (uri, success, body, response) => {\n          (response as any).elapsedTimeMs = Date.now() - startTime\n          /* console.log('    UpdateManager: Return ' +\n            (success ? 'success ' : 'FAILURE ') + (response as Response).status +\n            ' elapsed ' + (response as any).elapsedTimeMs + 'ms')\n            */\n          if (success) {\n            try {\n              kb.remove(ds as Mutable<typeof ds>)\n            } catch (e) {\n              success = false\n              body = 'Remote Ok BUT error deleting ' + ds.length + ' from store!!! ' + e\n            } // Add in any case -- help recover from weirdness??\n            for (let i = 0; i < is.length; i++) {\n              kb.add(is[i].subject, is[i].predicate, is[i].object, doc)\n            }\n          }\n\n          callback(uri, success, body, response)\n          control.pendingUpstream -= 1\n          // When upstream patches have been sent, reload state if downstream waiting\n          if (control.pendingUpstream === 0 && control.downstreamAction) {\n            var downstreamAction = control.downstreamAction\n            delete control.downstreamAction\n            // console.log('delayed downstream action:')\n            downstreamAction(doc)\n          }\n        }, options)\n      } else if ((protocol as string).indexOf('DAV') >= 0) {\n        this.updateDav(doc as NamedNode, ds, is, callback, options)\n      } else {\n        if ((protocol as string).indexOf('LOCALFILE') >= 0) {\n          try {\n            this.updateLocalFile(doc as NamedNode, ds, is, callback, options)\n          } catch (e) {\n            callback(doc.value, false,\n              'Exception trying to write back file <' + doc.value + '>\\n'\n              // + tabulator.Util.stackString(e))\n            )\n          }\n        } else {\n          throw new Error(\"Unhandled edit method: '\" + protocol + \"' for \" + doc)\n        }\n      }\n    } catch (e) {\n      callback(undefined, false, 'Exception in update: ' + e + '\\n' +\n        Util.stackString(e))\n    }\n  }\n\n  updateDav(\n    doc: Quad_Subject,\n    ds,\n    is,\n    callbackFunction,\n    options: Options = {}\n  ): null | Promise<void> {\n    let kb = this.store\n    // The code below is derived from Kenny's UpdateCenter.js\n    var request = kb.any(doc, this.ns.link('request'))\n    if (!request) {\n      throw new Error('No record of our HTTP GET request for document: ' +\n        doc)\n    } // should not happen\n    var response = kb.any(request as NamedNode, this.ns.link('response')) as Quad_Subject\n    if (!response) {\n      return null // throw \"No record HTTP GET response for document: \"+doc\n    }\n    var contentType = (kb.the(response, this.ns.httph('content-type')) as Term).value\n\n    // prepare contents of revised document\n    let newSts = kb.statementsMatching(undefined, undefined, undefined, doc).slice() // copy!\n    for (let i = 0; i < ds.length; i++) {\n      Util.RDFArrayRemove(newSts, ds[i])\n    }\n    for (let i = 0; i < is.length; i++) {\n      newSts.push(is[i])\n    }\n\n    const documentString = this.serialize(doc.value, newSts, contentType)\n\n    // Write the new version back\n    var candidateTarget = kb.the(response, this.ns.httph('content-location'))\n    var targetURI\n    if (candidateTarget) {\n      targetURI = uriJoin(candidateTarget.value, targetURI)\n    }\n\n    options.contentType = contentType\n    options.noMeta = true\n    options.body = documentString\n\n    return kb.fetcher.webOperation('PUT', targetURI, options)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.error)\n        }\n\n        for (let i = 0; i < ds.length; i++) {\n          kb.remove(ds[i])\n        }\n        for (let i = 0; i < is.length; i++) {\n          kb.add(is[i].subject, is[i].predicate, is[i].object, doc)\n        }\n\n        callbackFunction(doc.value, response.ok, response.responseText, response)\n      })\n      .catch(err => {\n        callbackFunction(doc.value, false, err.message, err)\n      })\n  }\n\n  /**\n   * Likely deprecated, since this lib no longer deals with browser extension\n   *\n   * @param doc\n   * @param ds\n   * @param is\n   * @param callbackFunction\n   * @param options\n   */\n  updateLocalFile(doc: NamedNode, ds, is, callbackFunction, options: Options = {}): void {\n    const kb = this.store\n    // console.log('Writing back to local file\\n')\n\n    // prepare contents of revised document\n    let newSts = kb.statementsMatching(undefined, undefined, undefined, doc).slice() // copy!\n\n    for (let i = 0; i < ds.length; i++) {\n      Util.RDFArrayRemove(newSts, ds[i])\n    }\n    for (let i = 0; i < is.length; i++) {\n      newSts.push(is[i])\n    }\n    // serialize to the appropriate format\n    var dot = doc.value.lastIndexOf('.')\n    if (dot < 1) {\n      throw new Error('Rewriting file: No filename extension: ' + doc.value)\n    }\n    var ext = doc.value.slice(dot + 1)\n\n    let contentType = Fetcher.CONTENT_TYPE_BY_EXT[ext]\n    if (!contentType) {\n      throw new Error('File extension .' + ext + ' not supported for data write')\n    }\n\n    options.body = this.serialize(doc.value, newSts, contentType);\n    options.contentType = contentType;\n\n    kb.fetcher.webOperation('PUT', doc.value, options).then((response) => {\n      if (!response.ok) return callbackFunction(doc.value, false, response.error)\n      for (let i = 0; i < ds.length; i++) {\n        kb.remove(ds[i]);\n      }\n      for (let i = 0; i < is.length; i++) {\n        kb.add(is[i].subject, is[i].predicate, is[i].object, doc);\n      }\n      callbackFunction(doc.value, true, '')  // success!\n    })\n  }\n\n  /**\n   * @throws {Error} On unsupported content type\n   *\n   * @returns {string}\n   */\n  serialize(uri: string, data: string | Quad[], contentType: string): string {\n    const kb = this.store\n    let documentString\n\n    if (typeof data === 'string') {\n      return data\n    }\n\n    // serialize to the appropriate format\n    var sz = Serializer(kb)\n    sz.suggestNamespaces(kb.namespaces)\n    sz.setBase(uri)\n    switch (contentType) {\n      case 'text/xml':\n      case 'application/rdf+xml':\n        documentString = sz.statementsToXML(data)\n        break\n      case 'text/n3':\n      case 'text/turtle':\n      case 'application/x-turtle': // Legacy\n      case 'application/n3': // Legacy\n        documentString = sz.statementsToN3(data)\n        break\n      default:\n        throw new Error('Content-type ' + contentType +\n          ' not supported for data serialization')\n    }\n\n    return documentString\n  }\n\n  /**\n   * This is suitable for an initial creation of a document.\n   */\n  put(\n    doc: RDFlibNamedNode,\n    data: string | Quad[],\n    contentType: string,\n    callback: (uri: string, ok: boolean, errorMessage?: string, response?: unknown) => void,\n  ): Promise<void> {\n    const kb = this.store\n    let documentString: string\n\n    return Promise.resolve()\n      .then(() => {\n        documentString = this.serialize(doc.value, data, contentType)\n\n        return kb.fetcher\n          .webOperation('PUT', doc.value, { contentType, body: documentString })\n      })\n      .then(response => {\n        if (!response.ok) {\n          return callback(doc.value, response.ok, response.error, response)\n        }\n\n        delete kb.fetcher.nonexistent[doc.value]\n        delete kb.fetcher.requested[doc.value] // @@ could this mess with the requested state machine? if a fetch is in progress\n\n        if (typeof data !== 'string') {\n          data.map((st) => {\n            kb.addStatement(st)\n          })\n        }\n\n        callback(doc.value, response.ok, '', response)\n      })\n      .catch(err => {\n        callback(doc.value, false, err.message)\n      })\n  }\n\n  /**\n   * Reloads a document.\n   *\n   * Fast and cheap, no metadata. Measure times for the document.\n   * Load it provisionally.\n   * Don't delete the statements before the load, or it will leave a broken\n   * document in the meantime.\n   *\n   * @param kb\n   * @param doc {RDFlibNamedNode}\n   * @param callbackFunction\n   */\n  reload(\n    kb: IndexedFormula,\n    doc: docReloadType,\n    callbackFunction: (ok: boolean, message?: string, response?: Error | Response) => {} | void\n  ): void {\n    var startTime = Date.now()\n    // force sets no-cache and\n    const options = {\n      force: true,\n      noMeta: true,\n      clearPreviousData: true,\n    };\n\n    (kb as any).fetcher.nowOrWhenFetched(doc.value, options, function (ok: boolean, body: Body, response: Response) {\n      if (!ok) {\n        // console.log('    ERROR reloading data: ' + body)\n        callbackFunction(false, 'Error reloading data: ' + body, response)\n        //@ts-ignore Where does onErrorWasCalled come from?\n      } else if (response.onErrorWasCalled || response.status !== 200) {\n        // console.log('    Non-HTTP error reloading data! onErrorWasCalled=' +\n        //@ts-ignore Where does onErrorWasCalled come from?\n        // response.onErrorWasCalled + ' status: ' + response.status)\n        callbackFunction(false, 'Non-HTTP error reloading data: ' + body, response)\n      } else {\n        var elapsedTimeMs = Date.now() - startTime\n\n        if (!doc.reloadTimeTotal) doc.reloadTimeTotal = 0\n        if (!doc.reloadTimeCount) doc.reloadTimeCount = 0\n\n        doc.reloadTimeTotal += elapsedTimeMs\n        doc.reloadTimeCount += 1\n\n        // console.log('    Fetch took ' + elapsedTimeMs + 'ms, av. of ' +\n        // doc.reloadTimeCount + ' = ' +\n        // (doc.reloadTimeTotal / doc.reloadTimeCount) + 'ms.')\n\n        callbackFunction(true)\n      }\n    })\n  }\n}\n\ninterface docReloadType extends NamedNode {\n  reloadTimeCount?: number\n  reloadTimeTotal?: number\n}\n","import {\n  IRDFlibDataFactory,\n} from '../types'\nimport Literal from '../literal'\nimport Statement from '../statement'\nimport IndexedFormula from '../store'\nimport Fetcher from '../fetcher'\nimport ExtendedTermFactory from './extended-term-factory'\nimport { NamedNode, Quad_Subject, Quad_Predicate, Quad_Object, Quad_Graph } from '../tf-types'\n\n/** Full RDFLib.js Data Factory */\nconst RDFlibDataFactory: IRDFlibDataFactory = {\n  ...ExtendedTermFactory,\n\n  /**\n   * Creates a new fetcher\n   * @param store - The store to use\n   * @param options - The options\n   */\n  fetcher (store: IndexedFormula, options: any): Fetcher {\n    return new Fetcher(store, options)\n  },\n\n  /**\n   * Creates a new graph (store)\n   */\n  graph (features = undefined, opts = undefined): IndexedFormula {\n    return new IndexedFormula(features, opts || {rdfFactory: ExtendedTermFactory})\n  },\n\n  /**\n   * Creates a new literal node\n   * @param val The lexical value\n   * @param lang The language\n   * @param dt The datatype\n   */\n  lit (val: string, lang?: string, dt?: NamedNode): Literal {\n    return this.literal('' + val, lang || dt)\n  },\n\n  /**\n   * Creates a new statement\n   * @param subject The subject\n   * @param predicate The predicate\n   * @param object The object\n   * @param graph The containing graph\n   */\n  st (\n    subject: Quad_Subject,\n    predicate: Quad_Predicate,\n    object: Quad_Object,\n    graph?: Quad_Graph\n  ): Statement {\n    return this.quad(subject, predicate, object, graph)\n  },\n}\n\nexport default RDFlibDataFactory\n","/*\n * Updates-Via\n */\nimport DataFactory from './factories/rdflib-data-factory'\n\nexport class UpdatesSocket {\n  constructor (parent, via) {\n    this.parent = parent\n    this.via = via\n    this.connected = false\n    this.pending = {}\n    this.subscribed = {}\n    this.socket = {}\n    try {\n      this.socket = new WebSocket(via)\n      this.socket.onopen = this.onOpen\n      this.socket.onclose = this.onClose\n      this.socket.onmessage = this.onMessage\n      this.socket.onerror = this.onError\n    } catch (error) {\n      this.onError(error)\n    }\n  }\n  _decode (q) {\n    var elt\n    var i\n    var k\n    var r\n    var ref\n    var ref1\n    var v\n    r = {}\n    ref = (function () {\n      var j, len, ref, results\n      ref = q.split('&')\n      results = []\n      for (j = 0, len = ref.length; j < len; j++) {\n        elt = ref[j]\n        results.push(elt.split('='))\n      }\n      return results\n    })()\n    for (i in ref) {\n      elt = ref[i]\n      ref1 = [decodeURIComponent(elt[0]), decodeURIComponent(elt[1])]\n      k = ref1[0]\n      v = ref1[1]\n      if (r[k] == null) {\n        r[k] = []\n      }\n      r[k].push(v)\n    }\n    return r\n  }\n  _send (method, uri, data) {\n    var base, message\n    message = [method, uri, data].join(' ')\n    return typeof (base = this.socket).send === 'function' ? base.send(message) : void 0\n  }\n  _subscribe (uri) {\n    this._send('sub', uri, '')\n    this.subscribed[uri] = true\n    return this.subscribed[uri]\n  }\n  onClose (e) {\n    var uri\n    this.connected = false\n    for (uri in this.subscribed) {\n      this.pending[uri] = true\n    }\n    this.subscribed = {}\n    return this.subscribed\n  }\n  onError (e) {\n    throw new Error('onError' + e)\n  }\n  onMessage (e) {\n    var base, message\n    message = e.data.split(' ')\n    if (message[0] === 'ping') {\n      return typeof (base = this.socket).send === 'function' ? base.send('pong ' + message.slice(1).join(' ')) : void 0\n    } else if (message[0] === 'pub') {\n      return this.parent.onUpdate(message[1], this._decode(message[2]))\n    }\n  }\n  onOpen (e) {\n    var results, uri\n    this.connected = true\n    results = []\n    for (uri in this.pending) {\n      delete this.pending[uri]\n      results.push(this._subscribe(uri))\n    }\n    return results\n  }\n  subscribe (uri) {\n    if (this.connected) {\n      return this._subscribe(uri)\n    } else {\n      this.pending[uri] = true\n      return this.pending[uri]\n    }\n  }\n}\n\nexport class UpdatesVia {\n  constructor (fetcher) {\n    this.fetcher = fetcher\n    this.graph = {}\n    this.via = {}\n    this.fetcher.addCallback('headers', this.onHeaders)\n  }\n  onHeaders (d) {\n    var etag, uri, via\n    if (d.headers == null) {\n      return true\n    }\n    if (typeof WebSocket === 'undefined' || WebSocket === null) {\n      return true\n    }\n    etag = d.headers['etag']\n    via = d.headers['updates-via']\n    uri = d.uri\n    if (etag && via) {\n      this.graph[uri] = {\n        etag: etag,\n        via: via\n      }\n      this.register(via, uri)\n    }\n    return true\n  }\n  onUpdate (uri, d) {\n    return this.fetcher.refresh(DataFactory.namedNode(uri))\n  }\n  register (via, uri) {\n    if (this.via[via] == null) {\n      this.via[via] = new UpdatesSocket(this, via)\n    }\n    return this.via[via].subscribe(uri)\n  }\n}\n","import { IRDFlibDataFactory } from './types'\n\nimport BlankNode from './blank-node'\nimport Collection from './collection'\nimport Empty from './empty'\nimport Fetcher from './fetcher'\nimport Formula from './formula'\nimport Store from './store'\nimport jsonParser from './jsonparser'\nimport Literal from './literal'\nimport log from './log'\nimport N3Parser from './n3parser'\nimport NamedNode from './named-node'\nimport Namespace from './namespace'\nimport Node from './node'\nimport parse from './parse'\nimport { Query } from './query'\nimport queryToSPARQL from './query-to-sparql'\nimport RDFaProcessor from './rdfaparser'\nimport RDFParser from './rdfxmlparser'\nimport serialize from './serialize'\nimport Serializer from './serializer'\nimport SPARQLToQuery from './sparql-to-query'\nimport sparqlUpdateParser from './patch-parser'\nimport Statement from './statement'\nimport UpdateManager from './update-manager'\nimport { UpdatesSocket } from './updates-via'\nimport { UpdatesVia } from './updates-via'\nimport * as uri from './uri'\nimport * as Util from './utils-js'\nimport Variable from './variable'\nimport DataFactory from './factories/rdflib-data-factory'\n\n// Prepare bound versions of data factory methods for export\nconst boundDataFactory = {} as IRDFlibDataFactory\nfor (const name in DataFactory) {\n  if (typeof DataFactory[name] === 'function')\n    boundDataFactory[name] = DataFactory[name].bind(DataFactory);\n}\nconst {\n  fetcher,\n  graph,\n  lit,\n  st,\n  namedNode,\n  variable,\n  blankNode,\n  defaultGraph,\n  literal,\n  quad,\n  triple,\n} = boundDataFactory\n\nconst formula = new Formula();\nconst fromNT = str => formula.fromNT(str);\n\nconst term = Node.fromValue\n\n// TODO: this export is broken;\n// it exports the _current_ value of nextId, which is always 0\nconst NextId = BlankNode.nextId\n\nexport * from './utils/terms'\nexport type { AutoInitOptions, ExtendedResponse, FetchError } from './fetcher'\nexport {\n  BlankNode,\n  Collection,\n  DataFactory,\n  Empty,\n  Fetcher,\n  Formula,\n  Store,\n  jsonParser,\n  Literal,\n  log,\n  N3Parser,\n  NamedNode,\n  Namespace,\n  Node,\n  parse,\n  Query,\n  queryToSPARQL,\n  RDFaProcessor,\n  RDFParser,\n  serialize,\n  Serializer,\n  SPARQLToQuery,\n  sparqlUpdateParser,\n  Statement,\n  term,\n  UpdateManager,\n  UpdatesSocket,\n  UpdatesVia,\n  uri,\n  Util,\n  Variable,\n\n  Store as IndexedFormula, // Alias\n\n  NextId,\n\n  fromNT,\n  fetcher,\n  graph,\n  lit,\n  st,\n  namedNode as sym,\n\n  // RDFJS DataFactory interface\n  blankNode,\n  defaultGraph,\n  literal,\n  namedNode,\n  quad,\n  triple,\n  variable,\n}\nexport { termValue } from './utils/termValue'\n\nexport class ConnectedStore extends Store {\n\n  fetcher: Fetcher;\n\n  constructor (features) {\n    super(features)\n    this.fetcher = new Fetcher(this, {})\n  }\n}\n\nexport class  LiveStore extends ConnectedStore {\n\n  updater: UpdateManager;\n  \n  constructor (features) {\n    super(features)\n    this.updater = new UpdateManager(this)\n  }\n}\n"],"names":["root","factory","exports","module","require","e","define","amd","self","__WEBPACK_EXTERNAL_MODULE__392__","leafPrototypes","getProto","inProgress","dataWebpackPrefix","peg$SyntaxError","message","expected","found","location","this","name","Error","captureStackTrace","child","parent","ctor","constructor","prototype","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","i","escapedParts","parts","length","Array","classEscape","inverted","any","end","other","description","hex","ch","charCodeAt","toString","toUpperCase","s","replace","describeExpectation","type","j","descriptions","sort","slice","join","describeExpected","describeFound","SyntaxError","parse","input","options","peg$result","peg$FAILED","peg$startRuleFunctions","turtleDoc","peg$parseturtleDoc","peg$startRuleFunction","peg$c0","statements","jsonld","context","toJSON","filter","a","isArray","forEach","b","push","Object","assign","peg$c1","peg$c2","peg$literalExpectation","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$classExpectation","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","addPrefix","peg$c16","peg$c17","peg$c18","addBase","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","peg$c28","peg$c29","peg$c30","peg$c31","peg$c32","peg$c33","peg$c34","peg$c35","peg$c36","peg$c37","p","x","peg$c38","peg$c39","peg$c40","peg$c41","f","peg$c42","d","peg$c43","c","unshift","property","value","createObject","t","keys","key","val","undefined","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","peg$c50","peg$c51","expandList","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c66","peg$c67","parseInt","parseFloat","uri","resolve","prefix","split","decrement","peg$c68","peg$c69","peg$c70","peg$c71","peg$c72","peg$c73","peg$c74","peg$c75","peg$c76","peg$c77","peg$c78","peg$c79","peg$c80","peg$c81","decoded","map","codePointAt","String","fromCharCode","substring","fromCodePoint","match","error","peg$c82","peg$c83","peg$c84","hasPrefix","peg$c85","peg$c86","increment","peg$c87","peg$c88","peg$c89","peg$c90","peg$c91","peg$c92","peg$c93","peg$c94","peg$c95","peg$c96","peg$c97","peg$c98","peg$c99","peg$c100","peg$c101","peg$c102","peg$c103","peg$c104","peg$c105","peg$c106","peg$c107","peg$c108","peg$c109","peg$c110","peg$c111","peg$c112","peg$c113","peg$c114","peg$c115","peg$c116","peg$c117","peg$c118","peg$c119","peg$c120","peg$c121","peg$c122","head","peg$c123","peg$c124","body","peg$c125","peg$c126","peg$c127","peg$c128","peg$c129","peg$c130","peg$c131","peg$c132","peg$c133","peg$c134","peg$c135","peg$c136","peg$c137","peg$c138","peg$c139","peg$c140","peg$c141","peg$c142","peg$c143","peg$c144","peg$c145","peg$c146","peg$c147","peg$c148","peg$c149","peg$c150","peg$c151","peg$c152","peg$c153","peg$c154","peg$c155","peg$c156","peg$c157","peg$c158","peg$c159","peg$c160","peg$c161","peg$c162","peg$c163","peg$c164","peg$c165","peg$c166","peg$c167","peg$c168","peg$c169","peg$c170","peg$c171","peg$c172","peg$c173","peg$c174","peg$c175","peg$c176","peg$c177","peg$c178","peg$c179","peg$c180","peg$c181","peg$c182","tail","peg$c183","peg$c184","peg$c185","peg$c186","peg$c187","peg$c188","peg$c189","peg$c190","peg$currPos","peg$savedPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","peg$buildSimpleError","peg$computeLocation","ignoreCase","peg$computePosDetails","pos","details","startPos","endPos","startPosDetails","endPosDetails","start","offset","peg$fail","s0","s1","s2","s3","s4","peg$parseBOM","peg$parsestatement","peg$parseIGNORE","s5","s6","s7","s8","substr","peg$parsePNAME_NS_NO_CHECK","peg$parseIRIREF","peg$parseprefixID","peg$parsebase","s9","s10","s11","test","charAt","peg$parsesparqlPrefix","peg$parsesparqlBase","peg$parsedirective","peg$parsecollection","peg$parseBlankNode","peg$parseiri","peg$parsesubject","peg$parsepredicateObjectList","peg$parseblankNodePropertyList","peg$parsetriples","peg$parseWS","peg$parseCOMMENT","peg$parseverb","peg$parseobjectList","peg$parseobject","peg$parsepredicate","peg$parseString","peg$parseLANGTAG","peg$parseRDFLiteral","peg$parseEXPONENT","peg$parseDOUBLE","peg$parseDECIMAL","peg$parseINTEGER","peg$parseNumericLiteral","peg$parseBooleanLiteral","peg$parseliteral","peg$parseECHAR","peg$parseUCHAR","peg$parseSTRING_LITERAL_LONG_SINGLE_QUOTE","peg$parseSTRING_LITERAL_LONG_QUOTE","peg$parseSTRING_LITERAL_SINGLE_QUOTE","peg$parseSTRING_LITERAL_QUOTE","peg$parsePNAME_NS","peg$parsePN_CHARS_U","peg$parsePLX","peg$parsePN_CHARS","peg$parsePN_LOCAL","peg$parsePNAME_LN","peg$parsePrefixedName","peg$parseBLANK_NODE_LABEL","peg$parseANON","peg$parsePN_PREFIX","peg$parseHEX","peg$parsePN_CHARS_BASE","peg$parsePERCENT","peg$parsePN_LOCAL_ESC","isIRI","base","data","last","URL","list","count","pname","force","find","indexOf","baseIRI","container","focus","code","aliases","acl","arg","as","bookmark","cal","cco","cert","contact","dc","dct","doap","foaf","geo","gpx","gr","http","httph","icalTZ","ldp","link","log","meeting","mo","org","owl","pad","patch","prov","pto","qu","trip","rdf","rdfs","rss","sched","schema","sioc","skos","solid","space","stat","tab","tabont","ui","vann","vcard","wf","xsd","namedNode","u","namespaces","alias","expansion","localName","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","m","n","getter","__esModule","getPrototypeOf","obj","mode","then","ns","create","r","def","current","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","chunkId","Promise","all","reduce","promises","g","globalThis","Function","window","prop","hasOwnProperty","l","url","done","script","needAttach","scripts","document","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","timeout","doneFns","parentNode","removeChild","fn","setTimeout","bind","target","appendChild","Symbol","toStringTag","scriptUrl","importScripts","currentScript","tagName","installedChunks","installedChunkData","promise","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","id","chunkLoadingGlobal","_typeof","iterator","_defineProperty","toPrimitive","TypeError","toPropertyKey","configurable","writable","Node","substitute","bindings","compareTerm","classOrder","equals","termType","hashString","toCanonical","sameTerm","toNT","toNQ","NamedNodeTermType","BlankNodeTermType","LiteralTermType","VariableTermType","DefaultGraphTermType","CollectionTermType","EmptyTermType","GraphTermType","HTMLContentType","JSONLDContentType","N3ContentType","N3LegacyContentType","NQuadsAltContentType","NQuadsContentType","NTriplesContentType","RDFXMLContentType","SPARQLUpdateContentType","SPARQLUpdateSingleMatchContentType","TurtleContentType","TurtleLegacyContentType","XHTMLContentType","BlankNode","getId","includes","fragments","nextId","super","ClassOrder","copy","formula","bnodeNew","copyTo","NTAnonymousNodePrefix","termValue","node","isStatement","isStore","isCollection","isTerm","isRDFlibObject","isRDFlibSubject","isRDFlibPredicate","isVariable","isLiteral","isQuad","isNamedNode","isBlankNode","isSubject","isPredicate","isRDFObject","isGraph","NamedNode","iri","dir","str","lastIndexOf","q","site","doc","fromValue","boolean","dateTime","decimal","double","integer","langString","string","Literal","language","datatype","XSD","RDFlibNamedNode","lang","fromBoolean","fromDate","Date","d2","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","fromNumber","strValue","Math","abs","Number","MAX_SAFE_INTEGER","isInteger","Collection","initial","RdflibBlankNode","element","elements","append","close","closed","shift","elementsCopy","ea","collection","Empty","defaultGraphURI","DefaultGraph","isDefaultGraph","object","defaultGraph","DefaultGraphNode","Statement","subject","predicate","graph","why","terms","alert","console","docpart","hostpart","exec","given","baseColon","baseScheme","baseSingle","lastSlash","path","baseHash","protocol","refTo","k","len","len1","ref","ref1","commonHost","RegExp","Variable","Uri","variable","Feature","CanonicalDataFactory","supports","collections","defaultGraphType","equalsMethod","identity","reversibleId","variableType","blankNode","term","quadToNQ","nq","termToNQ","languageOrDatatype","quad","triple","debug","warn","info","success","msg","Namespace","nsuri","dataFactory","ln","template","subs","baseA","result","mediaTypeClass","mediaType","trim","linkRelationProperty","relation","callbackify","callbacks","addHook","hook","addCallback","func","removeCallback","funcName","splice","insertCallback","fireCallbacks","args","newCallbacks","replaceCallbacks","callback","apply","DOMParserFactory","DOMParser","ActiveXObject","domToString","selfClosing","skipAttributes","dumpNode","out","noEsc","nodeType","hasAttribute","classWithChildText","matches","class","querySelector","textContent","skipNodeWithClass","ename","nodeName","toLowerCase","attrList","attributes","atn","replaceClassItemWith","source","re","skipClassWithValue","sortAttributes","localeCompare","childNodes","pop","nodeValue","nl","dtstamp","now","year","getYear","month","getMonth","day","getDate","hour","minute","second","getSeconds","heavyCompare","y","uriMap","nonBlank","signature","lis","statementsMatching","st","concat","comparison","compareTerms","heavyCompareSPO","output","_xmldomParser","parseXML","contentType","parseFromString","process","versions","parser","xmldom","getNodeDOMParser","RDFArrayRemove","string_startswith","pref","stackString","stack","lines","toprint","chunks","createXSD","localFactory","_ttl2jsonld","createSerializer","store","Serializer","_notQNameChars","flags","prefixes","nsKeys","solidNs","suggestPrefix","namespacesUsed","keywords","prefixchars","incoming","formulas","rdfFactory","setBase","setFlags","toStr","fromStr","fromNT","setNamespaces","px","setPrefix","existingNs","suggestNamespaces","checkIntegrity","prefixs","makeUpPrefix","canUse","pp","validPrefix","slash","rootSubjects","sts","subjects","allBnodes","checkMentions","z","ss","roots","xNT","rootsHash","toN3","statementsToN3","isValidPNLocal","local","_notNameChars","explicitURI","res","backslashUify","decodeURI","encodeURI","statementsToNTriples","sorted","rdfns","kb","termToNT","atomicTermToN3","rest","sym","bnode","Util","defaultNamespace","predMap","spaces","treeToLine","tree","branch","treeToString","level","lastLength","statementListToTree","stats","results","subjectTree","termToN3","propertyTree","objectTree","lastPred","objects","expr","prefixDirectives","eNotation","stringToN3","symbolToN3","delim","forbidden","forbidden3","forbidden1","lastIndex","localid","namesp","minNamespaceLength","baseDir","max","namespaceIsBaseDir","forbidDotLocal","keyords","writeStore","write","fetcher","session","appNode","sources","index","metaSources","metadata","statementsToXML","namespaceCounts","liPrefix","XMLtreeToLine","XMLtreeToString","statementListToXMLTree","subjectXMLTree","escapeForXML","relURI","pred","propertyXMLTree","ap","bp","bs","an","bn","isNaN","number","qname","collectionXMLTree","tag","attrs","ns2","statementsToJsonld","ttl2jsonld","getTtl2Jsonld","jsonldObj","JSON","stringify","serialize","opts","sz","newSts","executeCallback","err","appliedFactoryMethods","first","nil","arrayToStatements","_listObj","listData","nextNode","ArrayIndexOf","arr","item","Formula","constraints","initBindings","optional","Graph","factoryMethod","add","arguments","addStatement","statement","addAll","anyStatementMatching","anyValue","anyJS","toJS","justOne","bottomTypeURIs","types","bots","bottom","elt","v","each","len2","len3","findMembersNT","thisClass","len4","members","ref2","ref3","ref4","ref5","seeds","transitiveClosure","findMemberURIs","NTtoURI","findSubClassesNT","findSuperClassesNT","findTypesNT","domain","range","rdftype","findTypeURIs","connectedStatements","excludePredicateURIs","todo","doneArcs","follow","queue","hash","_features","dt","holds","holdsStatement","values","uris","provenance","statementsCopy","the","inverse","sups","agenda","topTypeURIs","tops","whether","Query","pat","IndexedFormula","vars","indexedFormulaQuery","myQuery","onDone","bindingDebug","bindingsDebug","nbs","unifyContents","nbs2","actual","isVar","complexType","redirections","defaultDocumentURI","unifyTerm","nb","nb2","bindings2","binding","union","OptionalBranchJunction","originalCallback","trunkBindings","branches","MandatoryBranch","checkAllDone","doCallBacks","reportMatch","reportDone","OptionalBranch","junction","prepare","termIndex","ind","nvars","subjectIndex","predicateIndex","objectIndex","whyIndex","easiestQuery","bindingsSoFar","localCallback","pattern_debug","pattern","br","fetchResource","requestedTerm","docuri","nowOrWhenFetched","ok","xhr","getState","match2","constraintsSatisfied","nk","newBindings1","nbs1","onward","trunck","sync","owlNamespaceURI","handleFP","subj","o1","equate","handleIFP","handleRDFType","typeCallback","classActions","features","propertyActions","HTTPRedirects","rdfArrayRemove","dataCallback","dataCallbacks","dataRemovalCallback","dataRemovalCallbacks","initPropertyActions","addDataCallback","cb","addDataRemovalCallback","applyPatch","patchCallback","ds","targetKB","doPatch","onDonePatch","bad","ds2","remove","where","query","bindingsFound","declareExistential","_existentialVariables","addFn","newPropertyAction","proj","actions","objNode","predicateCallback","predHash","canon","ix","h","check","checkStatementList","from","origin","arrayContains","u1","u2","statList","u1in","u2in","replaceWith","mentionsURI","newExistential","action","toBeFixed","newUniversal","_universalVariables","nextSymbol","querySync","removeStatement","removeDocument","removeMetadata","removeMatches","meta","linkNamespaceURI","requests","status","response","removeMany","limit","removeStatements","big","small","oldhash","newhash","moveIndex","oldlist","newlist","nowKnownAs","allAliases","sameThings","x1","y1","setPrefixForURI","existingPrefix","wild","iBest","best","pBest","possibles","cterm","RDF","convertFirstRestNil","preceding","ele","listSoFar","trash","rests","firsts","total","totalTrash","pres","newList","newStatement","substituteInDoc","pre","substituteNillsInDoc","Logic_NS","pyjslib_Tuple","theList","pyjslib_List","pyjslib_Dict","listOfPairs","pyjslib_len","pyjslib_slice","StopIteration","pyjslib_Iterator","li","next","string_find","assertFudge","condition","desc","encode","encoding","utftext","Utf8","decode","uripath_join","RDF_nil_URI","DAML_sameAs_URI","number_syntax","datetime_syntax","wsOrHash","interesting","langcode","dotTerminatesName","openFormula","thisDoc","baseURI","genPrefix","metaURI","SinkParser","_bindings","_flags","_store","setGenPrefix","_thisDoc","statementCount","hasNil","startOfLine","previousLine","_genPrefix","keywordsSet","_anonymousNodes","_variables","_parentVariables","_reason","_reason2","_baseURI","RDFSink_uniqueURI","_formula","_context","_parentContext","here","loadStream","stream","loadBuf","read","buf","startDoc","feed","endDoc","octets","skipSpace","directiveOrStatement","BadSyntax","directive","checkDot","tok","commaSeparatedList","setKeywords","__x","uri_ref2","hexify","qn","makeStatement","property_list","verb","nodeOrLiteral","anonymousNode","subjectAlready","bnodeID","objs","objectList","__obj","mylist","first_run","newSet","oldParentContext","parentAnonymousNodes","grandParentVariables","reason2","thing_type","pairFudge","ofUris","bareWord","pfx","symb","uref","strconst","startline","res2","ustr","uEscape","UEscape","uch","uesc","lineNo","characterInFile","syntaxProblem","ExtendedTermFactory","jsonldObjectToTerm","listToCollection","listId","items","listItem","listToStatements","async","jsonldParser","baseString","default","flatten","flatResource","processResource","startsWith","graphId","nestedFlatResources","createStatement","parseTerm","token","iriMatch","blankMatch","litMatch","langMatch","dtMatch","createTerm","parsed","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","RDFaProcessor","blankNodes","htmlOptions","theOne","getTime","vocabulary","blankCounter","langAttributes","namespaceURI","inXHTMLMode","absURIRE","finishedHandlers","init","addTriple","su","ob","pr","or","toRDFNodeObject","ancestorPath","copyMappings","mappings","newMappings","copyProperties","deriveDateTimeType","dateTimeTypes","matched","newBlankNode","newSubjectOrigin","parseCURIE","colon","NCNAME","parseCURIEOrURI","resolveAndNormalize","parsePredicate","defaultVocabulary","ignoreTerms","parseTermOrCURIEOrAbsURI","parsePrefixMappings","tokenize","parseRDFaDOM","dom","parseSafeCURIEOrCURIEOrURI","curie","parseTermOrCURIEOrURI","parseURI","documentElement","setContext","removeHash","baseURIMap","listMapping","bnodes","objectURI","skip","newSubject","currentObjectResource","typedResource","prefixesCopied","incomplete","listMappingDifferent","vocabAtt","getAttributeNode","baseSubject","spec","att","prefixAtt","xmlLangAtt","getAttributeNodeNS","relAtt","revAtt","typeofAtt","propertyAtt","datatypeAtt","datetimeAtt","inHTMLMode","contentAtt","aboutAtt","srcAtt","resourceAtt","hrefAtt","inlistAtt","relAttPredicates","revAttPredicates","parentObject","typeURI","forward","content","PlainLiteralURI","XMLLiteralURI","HTMLLiteralURI","childContext","listSubject","lastChild","previousSibling","setXHTMLContext","doctype","publicId","systemId","setHTMLContext","setXMLContext","setInitialContext","nameChar","nameStartChar","RDFParser","reify","frameFactory","uriUtil","rdfid","NODE","ARC","addSymbol","isTripleToLoad","loadTriple","listIndex","attributeNode","potentialNode","children","cleanParser","DOCUMENT","ELEMENT","parseDOM","buildFrame","frame","elementURI","el","dig","TEXT","CDATA_SECTION","addArc","addLiteral","addCollectionArc","removeAttributeNode","parsetype","nv","innerHTML","addBNode","addCollection","resource","bnid2","addNode","about","bnid","pframe","candidate","terminateFrame","removeAttribute","sparqlUpdateParser","SQNS","N3Parser","clauses","badSyntax","catch","executeErrorCallback","trimmed","tokens","inQuotes","escape","char","parseNQuads","DataFactory","e2","cause","handled","Parsable","CONTENT_TYPE_BY_EXT","getNS","Handler","RDFXMLHandler","register","mediatypes","responseText","failFetch","original","noMeta","doneFetch","XHTMLHandler","reverse","title","links","linkData","rdfParse","noRDFa","XMLHandler","isElement","addStatus","req","html","xmlns","HTMLHandler","isXML","docTypeStart","docTypeEnd","isXHTML","isXMLNS","titleMatch","JsonLdHandler","TextHandler","N3Handler","defaultHandlers","Fetcher","fetchFunc","fetch","global","solidFetcher","solidFetch","_fetch","requested","timeouts","redirectedTo","fetchQueue","fetchCallbacks","nonexistent","lookedUp","handlers","addHandler","crossSiteProxy","crossSiteProxyTemplate","encodeURIComponent","offlineOverride","requestedURI","UI","panes","preferences","proxyIfNecessary","isExtension","$SolidTestEnvironment","localSiteMap","hostpath","lookup","unsupportedProtocol","pcol","setCredentials","credentials","withCredentials","load","initFetchOptions","clearPreviousData","initialisedOptions","pendingFetchPromise","originalUri","pendingPromise","race","setRequestTimeout","fetchUri","cleanupFetchRequest","_options","isPending","method","headers","cache","acceptString","actualProxyURI","proxyUsed","state","statusText","dummyResponse","Headers","bodyUsed","size","saveRequestMetadata","handleResponse","errno","handleError","uriIn","p2","userCallback","referringTerm","fetchResponse","oops","statusMessage","getHours","getMinutes","getMilliseconds","statusNode","errorMessage","statusCode","meth","rel","parseLinkHeader","linkHeader","reqNode","paramexp","href","was","lookUpThing","putBack","uriSting","jsonString","webOperation","webCopy","there","delete","unload","createIfNotExists","createContainer","parentURI","folderName","invalidateCache","rterm","getHeader","header","timeNow","saveResponseMetadata","responseNode","objectRefresh","refresh","refreshIfExpired","exp","retract","handler","retryNoCredentials","retriedWithNoCredentials","newOptions","isCrossSite","proxyUri","redirectToProxy","addType","rdfType","locURI","reqURI","redirection","normalizedContentType","contentLocation","saveErrorResponse","diffLocation","absContentLocation","isImage","handlerForContentType","guessContentType","forceContentType","guess","newURI","oldReq","addFetchCallback","acceptstring","HANDLERS","parseJSON","preds","queryToSPARQL","indent","getPattern","addIndent","getConstraints","foo","describe","getOptionals","getWhere","getSelect","getSPARQL","SPARQLToQuery","SPARQL","testMode","variableHash","makeVar","newVar","isRealText","fixSymbolBrackets","isSymbol","isBnode","isPrefix","isPrefixedSymbol","getPrefix","getSuffix","removeBrackets","parseLiterals","sin","doub","end2","spaceDelimit","arrayIndexOf","arrayIndicesOf","getMatchingBracket","open","ConstraintEqualTo","varstr","ConstraintRegexp","rg","setConstraint","setOptional","opt","setWhere","toTerms","filt","arrayZero","per","sem","stat2","com","stat3","extractStatements","sp","token1","token2","strarr","replaceKeywords","prefInd","symbol","getPrefixDeclarations","selectLoc","whereLoc","label","setVars","UpdateManager","updater","ifps","fps","patchControl","patchControlFor","isHttpUri","flagAuthorizationMetadata","checkEditable","editable","definitive","wacAllow","bit","lr","acceptPatch","authorVia","anonymize","mentioned","anonymizeNT","stmt","nTriples","statementBnodes","statementArrayBnodes","bnodes2","cacheIfps","bnodeContext2","depth","isBlank","bnodeContext1","con","bnodeContext","statementContext","contextWhere","fire","callbackFunction","update_statement","statementNT","set_object","insert_statement","st0","stText","delete_statement","requestDownstreamAction","control","pendingUpstream","downstreamAction","clearUpstreamCount","upstreamCount","getUpdatesVia","linkHeaders","addDownstreamChangeListener","listener","downstreamChangeListeners","setRefreshHandler","reloadAndSync","reloading","outOfDate","retryTimeout","tryReload","reload","wssURI","theHandler","retries","uriJoin","validWssURI","openWebsocket","socket","WebSocket","onopen","send","onclose","onmessage","updateMany","deletions","insertions","docs","thisUpdater","uniqueDocs","uniqueDoc","updates","update","constructSparqlUpdateQuery","is","bnodes_context","whereClause","constructN3PatchQuery","secondTry","errorBody","startTime","props","isSparql","elapsedTimeMs","updateDav","updateLocalFile","documentString","targetURI","candidateTarget","dot","ext","put","onErrorWasCalled","reloadTimeTotal","reloadTimeCount","RDFlibDataFactory","lit","UpdatesSocket","via","connected","pending","subscribed","onOpen","onClose","onMessage","onError","_decode","decodeURIComponent","_send","_subscribe","onUpdate","subscribe","UpdatesVia","onHeaders","etag","boundDataFactory","NextId","ConnectedStore","Store","LiveStore"],"ignoreList":[],"sourceRoot":""}